var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,n)=>{let r={};for(var i in e)t(r,i,{get:e[i],enumerable:!0});return n&&t(r,Symbol.toStringTag,{value:`Module`}),r},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>a.call(e,`module.exports`)?e[`module.exports`]:l(t({},`__esModule`,{value:!0}),e),f=s((e=>{e.HttpAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpAuthLocation||={}),e.HttpApiKeyAuthLocation=void 0,(function(e){e.HEADER=`header`,e.QUERY=`query`})(e.HttpApiKeyAuthLocation||={}),e.EndpointURLScheme=void 0,(function(e){e.HTTP=`http`,e.HTTPS=`https`})(e.EndpointURLScheme||={}),e.AlgorithmId=void 0,(function(e){e.MD5=`md5`,e.CRC32=`crc32`,e.CRC32C=`crc32c`,e.SHA1=`sha1`,e.SHA256=`sha256`})(e.AlgorithmId||={});let t=t=>{let n=[];return t.sha256!==void 0&&n.push({algorithmId:()=>e.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&n.push({algorithmId:()=>e.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(e){n.push(e)},checksumAlgorithms(){return n}}},n=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t};e.FieldPosition=void 0,(function(e){e[e.HEADER=0]=`HEADER`,e[e.TRAILER=1]=`TRAILER`})(e.FieldPosition||={}),e.IniSectionType=void 0,(function(e){e.PROFILE=`profile`,e.SSO_SESSION=`sso-session`,e.SERVICES=`services`})(e.IniSectionType||={}),e.RequestHandlerProtocol=void 0,(function(e){e.HTTP_0_9=`http/0.9`,e.HTTP_1_0=`http/1.0`,e.TDS_8_0=`tds/8.0`})(e.RequestHandlerProtocol||={}),e.SMITHY_CONTEXT_KEY=`__smithy_context`,e.getDefaultClientConfiguration=e=>t(e),e.resolveDefaultRuntimeConfig=e=>n(e)})),p=s((e=>{var t=f();let n=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,n){e.httpHandler?.updateHttpClientConfig(t,n)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),r=e=>({httpHandler:e.httpHandler()});var i=class{name;kind;values;constructor({name:e,kind:n=t.FieldPosition.HEADER,values:r=[]}){this.name=e,this.kind=n,this.values=r}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(t=>t!==e)}toString(){return this.values.map(e=>e.includes(`,`)||e.includes(` `)?`"${e}"`:e).join(`, `)}get(){return this.values}},a=class{entries={};encoding;constructor({fields:e=[],encoding:t=`utf-8`}){e.forEach(this.setField.bind(this)),this.encoding=t}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(t=>t.kind===e)}},o=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||`GET`,this.hostname=e.hostname||`localhost`,this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)===`:`?e.protocol:`${e.protocol}:`:`https:`,this.path=e.path?e.path.charAt(0)===`/`?e.path:`/${e.path}`:`/`,this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(t){let n=new e({...t,headers:{...t.headers}});return n.query&&=s(n.query),n}static isInstance(e){if(!e)return!1;let t=e;return`method`in t&&`protocol`in t&&`hostname`in t&&`path`in t&&typeof t.query==`object`&&typeof t.headers==`object`}clone(){return e.clone(this)}};function s(e){return Object.keys(e).reduce((t,n)=>{let r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}var c=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let t=e;return typeof t.statusCode==`number`&&typeof t.headers==`object`}};function l(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}e.Field=i,e.Fields=a,e.HttpRequest=o,e.HttpResponse=c,e.getHttpHandlerExtensionConfiguration=n,e.isValidHostname=l,e.resolveHttpHandlerRuntimeConfig=r})),m=s((e=>{var t=p();function n(e){return e}let r=e=>n=>async r=>{if(!t.HttpRequest.isInstance(r.request))return n(r);let{request:i}=r,{handlerProtocol:a=``}=e.requestHandler.metadata||{};if(a.indexOf(`h2`)>=0&&!i.headers[`:authority`])delete i.headers.host,i.headers[`:authority`]=i.hostname+(i.port?`:`+i.port:``);else if(!i.headers.host){let e=i.hostname;i.port!=null&&(e+=`:${i.port}`),i.headers.host=e}return n(r)},i={name:`hostHeaderMiddleware`,step:`build`,priority:`low`,tags:[`HOST`],override:!0};e.getHostHeaderPlugin=e=>({applyToStack:t=>{t.add(r(e),i)}}),e.hostHeaderMiddleware=r,e.hostHeaderMiddlewareOptions=i,e.resolveHostHeaderConfig=n})),h=s((e=>{let t=()=>(e,t)=>async n=>{try{let r=await e(n),{clientName:i,commandName:a,logger:o,dynamoDbDocumentClientOptions:s={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:l}=s,u=c??t.inputFilterSensitiveLog,d=l??t.outputFilterSensitiveLog,{$metadata:f,...p}=r.output;return o?.info?.({clientName:i,commandName:a,input:u(n.input),output:d(p),metadata:f}),r}catch(e){let{clientName:r,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=t,{overrideInputFilterSensitiveLog:s}=o,c=s??t.inputFilterSensitiveLog;throw a?.error?.({clientName:r,commandName:i,input:c(n.input),error:e,metadata:e.$metadata}),e}},n={name:`loggerMiddleware`,tags:[`LOGGER`],step:`initialize`,override:!0};e.getLoggerPlugin=e=>({applyToStack:e=>{e.add(t(),n)}}),e.loggerMiddleware=t,e.loggerMiddlewareOptions=n})),g=c({InvokeStore:()=>S,InvokeStoreBase:()=>y}),_,v,y,b,x,S,C=o((()=>{_={REQUEST_ID:Symbol.for(`_AWS_LAMBDA_REQUEST_ID`),X_RAY_TRACE_ID:Symbol.for(`_AWS_LAMBDA_X_RAY_TRACE_ID`),TENANT_ID:Symbol.for(`_AWS_LAMBDA_TENANT_ID`)},v=[`true`,`1`].includes(process.env?.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA??``),v||(globalThis.awslambda=globalThis.awslambda||{}),y=class{static PROTECTED_KEYS=_;isProtectedKey(e){return Object.values(_).includes(e)}getRequestId(){return this.get(_.REQUEST_ID)??`-`}getXRayTraceId(){return this.get(_.X_RAY_TRACE_ID)}getTenantId(){return this.get(_.TENANT_ID)}},b=class extends y{currentContext;getContext(){return this.currentContext}hasContext(){return this.currentContext!==void 0}get(e){return this.currentContext?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);this.currentContext=this.currentContext||{},this.currentContext[e]=t}run(e,t){return this.currentContext=e,t()}},x=class e extends y{als;static async create(){let t=new e;return t.als=new(await(import(`node:async_hooks`))).AsyncLocalStorage,t}getContext(){return this.als.getStore()}hasContext(){return this.als.getStore()!==void 0}get(e){return this.als.getStore()?.[e]}set(e,t){if(this.isProtectedKey(e))throw Error(`Cannot modify protected Lambda context field: ${String(e)}`);let n=this.als.getStore();if(!n)throw Error(`No context available`);n[e]=t}run(e,t){return this.als.run(e,t)}},(function(e){let t=null;async function n(){return t||=(async()=>{let e=`AWS_LAMBDA_MAX_CONCURRENCY`in process.env?await x.create():new b;return!v&&globalThis.awslambda?.InvokeStore?globalThis.awslambda.InvokeStore:(!v&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=e),e)})(),t}e.getInstanceAsync=n,e._testing=process.env.AWS_LAMBDA_BENCHMARK_MODE===`1`?{reset:()=>{t=null,globalThis.awslambda?.InvokeStore&&delete globalThis.awslambda.InvokeStore,globalThis.awslambda={}}}:void 0})(S||={})})),w=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.recursionDetectionMiddleware=void 0;let t=(C(),d(g)),n=p(),r=`X-Amzn-Trace-Id`;e.recursionDetectionMiddleware=()=>e=>async i=>{let{request:a}=i;if(!n.HttpRequest.isInstance(a))return e(i);let o=Object.keys(a.headers??{}).find(e=>e.toLowerCase()===`x-amzn-trace-id`)??r;if(a.headers.hasOwnProperty(o))return e(i);let s=process.env.AWS_LAMBDA_FUNCTION_NAME,c=process.env._X_AMZN_TRACE_ID,l=(await t.InvokeStore.getInstanceAsync())?.getXRayTraceId()??c,u=e=>typeof e==`string`&&e.length>0;return u(s)&&u(l)&&(a.headers[r]=l),e({...i,request:a})}})),T=s((e=>{var t=w();let n={step:`build`,tags:[`RECURSION_DETECTION`],name:`recursionDetectionMiddleware`,override:!0,priority:`low`};e.getRecursionDetectionPlugin=e=>({applyToStack:e=>{e.add(t.recursionDetectionMiddleware(),n)}}),Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),E,D,O=o((()=>{E=f(),D=e=>e[E.SMITHY_CONTEXT_KEY]||(e[E.SMITHY_CONTEXT_KEY]={})})),k=s((e=>{var t=f();e.getSmithyContext=e=>e[t.SMITHY_CONTEXT_KEY]||(e[t.SMITHY_CONTEXT_KEY]={}),e.normalizeProvider=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}})),A,j=o((()=>{A=(e,t)=>{if(!t||t.length===0)return e;let n=[];for(let r of t)for(let t of e)t.schemeId.split(`#`)[1]===r&&n.push(t);for(let t of e)n.find(({schemeId:e})=>e===t.schemeId)||n.push(t);return n}}));function M(e){let t=new Map;for(let n of e)t.set(n.schemeId,n);return t}var N,ee,te=o((()=>{N=k(),j(),ee=(e,t)=>(n,r)=>async i=>{let a=A(e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,r,i.input)),e.authSchemePreference?await e.authSchemePreference():[]),o=M(e.httpAuthSchemes),s=(0,N.getSmithyContext)(r),c=[];for(let n of a){let i=o.get(n.schemeId);if(!i){c.push(`HttpAuthScheme \`${n.schemeId}\` was not enabled for this service.`);continue}let a=i.identityProvider(await t.identityProviderConfigProvider(e));if(!a){c.push(`HttpAuthScheme \`${n.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:l={},signingProperties:u={}}=n.propertiesExtractor?.(e,r)||{};n.identityProperties=Object.assign(n.identityProperties||{},l),n.signingProperties=Object.assign(n.signingProperties||{},u),s.selectedHttpAuthScheme={httpAuthOption:n,identity:await a(n.identityProperties),signer:i.signer};break}if(!s.selectedHttpAuthScheme)throw Error(c.join(`
`));return n(i)}})),ne,re,ie=o((()=>{te(),ne={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:`endpointV2Middleware`},re=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(ee(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),ne)}})})),ae=s((e=>{var t=p();let n=(e,n)=>(i,a)=>async o=>{let{response:s}=await i(o);try{return{response:s,output:await n(s,e)}}catch(e){if(Object.defineProperty(e,`$response`,{value:s,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let n=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+n}catch{!a.logger||a.logger?.constructor?.name===`NoOpLogger`?console.warn(n):a.logger?.warn?.(n)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(t.HttpResponse.isInstance(s)){let{headers:t={}}=s,n=Object.entries(t);e.$metadata={httpStatusCode:s.statusCode,requestId:r(/^x-[\w-]+-request-?id$/,n),extendedRequestId:r(/^x-[\w-]+-id-2$/,n),cfId:r(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},r=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1],i=(e,t)=>(n,r)=>async i=>{let a=e,o=r.endpointV2?.url&&a.urlParser?async()=>a.urlParser(r.endpointV2.url):a.endpoint;if(!o)throw Error(`No valid endpoint provider available.`);let s=await t(i.input,{...e,endpoint:o});return n({...i,request:s})},a={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},o={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0};function s(e,t,r){return{applyToStack:s=>{s.add(n(e,r),a),s.add(i(e,t),o)}}}e.deserializerMiddleware=n,e.deserializerMiddlewareOption=a,e.getSerdePlugin=s,e.serializerMiddleware=i,e.serializerMiddlewareOption=o})),P,F,oe,se=o((()=>{P=ae(),te(),F={step:`serialize`,tags:[`HTTP_AUTH_SCHEME`],name:`httpAuthSchemeMiddleware`,override:!0,relation:`before`,toMiddleware:P.serializerMiddlewareOption.name},oe=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(ee(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:n}),F)}})})),ce=o((()=>{te(),ie(),se()})),le,I,ue,de,L,fe=o((()=>{le=p(),I=k(),ue=e=>e=>{throw e},de=(e,t)=>{},L=e=>(e,t)=>async n=>{if(!le.HttpRequest.isInstance(n.request))return e(n);let r=(0,I.getSmithyContext)(t).selectedHttpAuthScheme;if(!r)throw Error(`No HttpAuthScheme was selected: unable to sign request`);let{httpAuthOption:{signingProperties:i={}},identity:a,signer:o}=r,s=await e({...n,request:await o.sign(n.request,a,i)}).catch((o.errorHandler||ue)(i));return(o.successHandler||de)(s.response,i),s}})),pe,me,he=o((()=>{fe(),pe={step:`finalizeRequest`,tags:[`HTTP_SIGNING`],name:`httpSigningMiddleware`,aliases:[`apiKeyMiddleware`,`tokenMiddleware`,`awsAuthMiddleware`],override:!0,relation:`after`,toMiddleware:`retryMiddleware`},me=e=>({applyToStack:t=>{t.addRelativeTo(L(e),pe)}})})),ge=o((()=>{fe(),he()})),_e,ve=o((()=>{_e=e=>{if(typeof e==`function`)return e;let t=Promise.resolve(e);return()=>t}}));function ye(e,t,n,r,i){return async function*(a,o,...s){let c=o,l=a.startingToken??c[n],u=!0,d;for(;u;){if(c[n]=l,i&&(c[i]=c[i]??a.pageSize),a.client instanceof e)d=await be(t,a.client,o,a.withCommand,...s);else throw Error(`Invalid client, expected instance of ${e.name}`);yield d;let f=l;l=xe(d,r),u=!!(l&&(!a.stopOnSameToken||l!==f))}return void 0}}var be,xe,Se=o((()=>{be=async(e,t,n,r=e=>e,...i)=>{let a=new e(n);return a=r(a)??a,await t.send(a,...i)},xe=(e,t)=>{let n=e,r=t.split(`.`);for(let e of r){if(!n||typeof n!=`object`)return;n=n[e]}return n}})),Ce=s((e=>{e.isArrayBuffer=e=>typeof ArrayBuffer==`function`&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)===`[object ArrayBuffer]`})),we=s((e=>{var t=Ce(),n=require(`buffer`);e.fromArrayBuffer=(e,r=0,i=e.byteLength-r)=>{if(!t.isArrayBuffer(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return n.Buffer.from(e,r,i)},e.fromString=(e,t)=>{if(typeof e!=`string`)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?n.Buffer.from(e,t):n.Buffer.from(e)}})),Te=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromBase64=void 0;let t=we(),n=/^[A-Za-z0-9+/]*={0,2}$/;e.fromBase64=e=>{if(e.length*3%4!=0)throw TypeError(`Incorrect padding on base64 string.`);if(!n.exec(e))throw TypeError(`Invalid base64 string.`);let r=(0,t.fromString)(e,`base64`);return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}})),R=s((e=>{var t=we();let n=e=>{let n=t.fromString(e,`utf8`);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT)};e.fromUtf8=n,e.toUint8Array=e=>typeof e==`string`?n(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),e.toUtf8=e=>{if(typeof e==`string`)return e;if(typeof e!=`object`||typeof e.byteOffset!=`number`||typeof e.byteLength!=`number`)throw Error(`@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.`);return t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString(`utf8`)}})),Ee=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.toBase64=void 0;let t=we(),n=R();e.toBase64=e=>{let r;if(r=typeof e==`string`?(0,n.fromUtf8)(e):e,typeof r!=`object`||typeof r.byteOffset!=`number`||typeof r.byteLength!=`number`)throw Error(`@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.`);return(0,t.fromArrayBuffer)(r.buffer,r.byteOffset,r.byteLength).toString(`base64`)}})),De=s((e=>{var t=Te(),n=Ee();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Oe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=De(),n=require(`stream`);e.ChecksumStream=class extends n.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:e,checksum:n,source:r,checksumSourceLocation:i,base64Encoder:a}){if(super(),typeof r.pipe==`function`)this.source=r;else throw Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);this.base64Encoder=a??t.toBase64,this.expectedChecksum=e,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(e){}_write(e,t,n){try{this.checksum.update(e),this.push(e)}catch(e){return n(e)}return n()}async _final(e){try{let t=await this.checksum.digest(),n=this.base64Encoder(t);if(this.expectedChecksum!==n)return e(Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(t){return e(t)}return this.push(null),e()}}})),ke=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBlob=e.isReadableStream=void 0,e.isReadableStream=e=>typeof ReadableStream==`function`&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream),e.isBlob=e=>typeof Blob==`function`&&(e?.constructor?.name===Blob.name||e instanceof Blob)})),Ae=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ChecksumStream=void 0;let t=typeof ReadableStream==`function`?ReadableStream:function(){};e.ChecksumStream=class extends t{}})),je=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=void 0;let t=De(),n=ke(),r=Ae();e.createChecksumStream=({expectedChecksum:e,checksum:i,source:a,checksumSourceLocation:o,base64Encoder:s})=>{if(!(0,n.isReadableStream)(a))throw Error(`@smithy/util-stream: unsupported source type ${a?.constructor?.name??a} in ChecksumStream.`);let c=s??t.toBase64;if(typeof TransformStream!=`function`)throw Error(`@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.`);let l=new TransformStream({start(){},async transform(e,t){i.update(e),t.enqueue(e)},async flush(t){let n=c(await i.digest());if(e!==n){let r=Error(`Checksum mismatch: expected "${e}" but received "${n}" in response header "${o}".`);t.error(r)}else t.terminate()}});a.pipeThrough(l);let u=l.readable;return Object.setPrototypeOf(u,r.ChecksumStream.prototype),u}})),Me=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createChecksumStream=i;let t=ke(),n=Oe(),r=je();function i(e){return typeof ReadableStream==`function`&&(0,t.isReadableStream)(e.source)?(0,r.createChecksumStream)(e):new n.ChecksumStream(e)}})),Ne=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ByteArrayCollector=void 0,e.ByteArrayCollector=class{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let e=this.byteArrays[0];return this.reset(),e}let e=this.allocByteArray(this.byteLength),t=0;for(let n=0;n<this.byteArrays.length;++n){let r=this.byteArrays[n];e.set(r,t),t+=r.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}})),Pe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=void 0,e.createBufferedReadableStream=n,e.merge=r,e.flush=i,e.sizeOf=a,e.modeOf=o;let t=Ne();function n(e,n,s){let c=e.getReader(),l=!1,u=0,d=[``,new t.ByteArrayCollector(e=>new Uint8Array(e))],f=-1,p=async e=>{let{value:t,done:m}=await c.read(),h=t;if(m){if(f!==-1){let t=i(d,f);a(t)>0&&e.enqueue(t)}e.close()}else{let t=o(h,!1);if(f!==t&&(f>=0&&e.enqueue(i(d,f)),f=t),f===-1){e.enqueue(h);return}let c=a(h);u+=c;let m=a(d[f]);if(c>=n&&m===0)e.enqueue(h);else{let t=r(d,f,h);!l&&u>n*2&&(l=!0,s?.warn(`@smithy/util-stream - stream chunk size ${c} is below threshold of ${n}, automatically buffering.`)),t>=n?e.enqueue(i(d,f)):await p(e)}}};return new ReadableStream({pull:p})}e.createBufferedReadable=n;function r(e,t,n){switch(t){case 0:return e[0]+=n,a(e[0]);case 1:case 2:return e[t].push(n),a(e[t])}}function i(e,t){switch(t){case 0:let n=e[0];return e[0]=``,n;case 1:case 2:return e[t].flush()}throw Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function a(e){return e?.byteLength??e?.length??0}function o(e,t=!0){return t&&typeof Buffer<`u`&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e==`string`?0:-1}})),Fe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createBufferedReadable=a;let t=require(`node:stream`),n=Ne(),r=Pe(),i=ke();function a(e,a,o){if((0,i.isReadableStream)(e))return(0,r.createBufferedReadableStream)(e,a,o);let s=new t.Readable({read(){}}),c=!1,l=0,u=[``,new n.ByteArrayCollector(e=>new Uint8Array(e)),new n.ByteArrayCollector(e=>Buffer.from(new Uint8Array(e)))],d=-1;return e.on(`data`,e=>{let t=(0,r.modeOf)(e,!0);if(d!==t&&(d>=0&&s.push((0,r.flush)(u,d)),d=t),d===-1){s.push(e);return}let n=(0,r.sizeOf)(e);l+=n;let i=(0,r.sizeOf)(u[d]);if(n>=a&&i===0)s.push(e);else{let t=(0,r.merge)(u,d,e);!c&&l>a*2&&(c=!0,o?.warn(`@smithy/util-stream - stream chunk size ${n} is below threshold of ${a}, automatically buffering.`)),t>=a&&s.push((0,r.flush)(u,d))}}),e.on(`end`,()=>{if(d!==-1){let e=(0,r.flush)(u,d);(0,r.sizeOf)(e)>0&&s.push(e)}s.push(null)}),s}})),Ie=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getAwsChunkedEncodingStream=void 0;let t=require(`stream`);e.getAwsChunkedEncodingStream=(e,n)=>{let{base64Encoder:r,bodyLengthChecker:i,checksumAlgorithmFn:a,checksumLocationName:o,streamHasher:s}=n,c=r!==void 0&&a!==void 0&&o!==void 0&&s!==void 0,l=c?s(a,e):void 0,u=new t.Readable({read:()=>{}});return e.on(`data`,e=>{let t=i(e)||0;u.push(`${t.toString(16)}\r\n`),u.push(e),u.push(`\r
`)}),e.on(`end`,async()=>{if(u.push(`0\r
`),c){let e=r(await l);u.push(`${o}:${e}\r\n`),u.push(`\r
`)}u.push(null)}),u}})),Le=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=t;async function t(e,t){let n=0,r=[],i=e.getReader(),a=!1;for(;!a;){let{done:e,value:o}=await i.read();if(o&&(r.push(o),n+=o?.byteLength??0),n>=t)break;a=e}i.releaseLock();let o=new Uint8Array(Math.min(t,n)),s=0;for(let e of r){if(e.byteLength>o.byteLength-s){o.set(e.subarray(0,o.byteLength-s),s);break}else o.set(e,s);s+=e.length}return o}})),Re=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.headStream=void 0;let t=require(`stream`),n=Le(),r=ke();e.headStream=(e,t)=>(0,r.isReadableStream)(e)?(0,n.headStream)(e,t):new Promise((n,r)=>{let a=new i;a.limit=t,e.pipe(a),e.on(`error`,e=>{a.end(),r(e)}),a.on(`error`,r),a.on(`finish`,function(){n(new Uint8Array(Buffer.concat(this.buffers)))})});var i=class extends t.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(e,t,n){if(this.buffers.push(e),this.bytesBuffered+=e.byteLength??0,this.bytesBuffered>=this.limit){let e=this.bytesBuffered-this.limit,t=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=t.subarray(0,t.byteLength-e),this.emit(`finish`)}n()}}})),ze=s((e=>{let t=e=>encodeURIComponent(e).replace(/[!'()*]/g,n),n=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;e.escapeUri=t,e.escapeUriPath=e=>e.split(`/`).map(t).join(`/`)})),Be=s((e=>{var t=ze();function n(e){let n=[];for(let r of Object.keys(e).sort()){let i=e[r];if(r=t.escapeUri(r),Array.isArray(i))for(let e=0,a=i.length;e<a;e++)n.push(`${r}=${t.escapeUri(i[e])}`);else{let e=r;(i||typeof i==`string`)&&(e+=`=${t.escapeUri(i)}`),n.push(e)}}return n.join(`&`)}e.buildQueryString=n})),Ve=s((e=>{var t=p(),n=Be(),r=require(`http`),i=require(`https`),a=require(`stream`),o=require(`http2`);let s=[`ECONNRESET`,`EPIPE`,`ETIMEDOUT`],c=e=>{let t={};for(let n of Object.keys(e)){let r=e[n];t[n]=Array.isArray(r)?r.join(`,`):r}return t},l={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},u=1e3,d=(e,t,n=0)=>{if(!n)return-1;let r=r=>{let i=l.setTimeout(()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${n} ms.`),{name:`TimeoutError`}))},n-r),a=e=>{e?.connecting?e.on(`connect`,()=>{l.clearTimeout(i)}):l.clearTimeout(i)};e.socket?a(e.socket):e.on(`socket`,a)};return n<2e3?(r(0),0):l.setTimeout(r.bind(null,u),u)},f=(e,t,n=0,r,i)=>n?l.setTimeout(()=>{let a=`@smithy/node-http-handler - [${r?`ERROR`:`WARN`}] a request has exceeded the configured ${n} ms requestTimeout.`;if(r){let n=Object.assign(Error(a),{name:`TimeoutError`,code:`ETIMEDOUT`});e.destroy(n),t(n)}else a+=` Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.`,i?.warn?.(a)},n):-1,m=(e,{keepAlive:t,keepAliveMsecs:n},r=3e3)=>{if(t!==!0)return-1;let i=()=>{e.socket?e.socket.setKeepAlive(t,n||0):e.on(`socket`,e=>{e.setKeepAlive(t,n||0)})};return r===0?(i(),0):l.setTimeout(i,r)},h=3e3,g=(e,t,n=0)=>{let r=r=>{let i=n-r,a=()=>{e.destroy(),t(Object.assign(Error(`@smithy/node-http-handler - the request socket timed out after ${n} ms of inactivity (configured by client requestHandler).`),{name:`TimeoutError`}))};e.socket?(e.socket.setTimeout(i,a),e.on(`close`,()=>e.socket?.removeListener(`timeout`,a))):e.setTimeout(i,a)};return 0<n&&n<6e3?(r(0),0):l.setTimeout(r.bind(null,n===0?0:h),h)},_=6e3;async function v(e,t,n=_,r=!1){let i=t.headers??{},a=i.Expect||i.expect,o=-1,s=!0;!r&&a===`100-continue`&&(s=await Promise.race([new Promise(e=>{o=Number(l.setTimeout(()=>e(!0),Math.max(_,n)))}),new Promise(t=>{e.on(`continue`,()=>{l.clearTimeout(o),t(!0)}),e.on(`response`,()=>{l.clearTimeout(o),t(!1)}),e.on(`error`,()=>{l.clearTimeout(o),t(!1)})})])),s&&y(e,t.body)}function y(e,t){if(t instanceof a.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t==`string`){e.end(t);return}let n=t;if(typeof n==`object`&&n.buffer&&typeof n.byteOffset==`number`&&typeof n.byteLength==`number`){e.end(Buffer.from(n.buffer,n.byteOffset,n.byteLength));return}e.end(Buffer.from(t));return}e.end()}var b=class e{config;configProvider;socketWarningTimestamp=0;externalAgent=!1;metadata={handlerProtocol:`http/1.1`};static create(t){return typeof t?.handle==`function`?t:new e(t)}static checkSocketUsage(e,t,n=console){let{sockets:r,requests:i,maxSockets:a}=e;if(typeof a!=`number`||a===1/0||Date.now()-15e3<t)return t;if(r&&i)for(let e in r){let t=r[e]?.length??0,o=i[e]?.length??0;if(t>=a&&o>=2*a)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${t} and ${o} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return t}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(this.resolveDefaultConfig(e))}).catch(n):t(this.resolveDefaultConfig(e))})}resolveDefaultConfig(e){let{requestTimeout:t,connectionTimeout:n,socketTimeout:a,socketAcquisitionWarningTimeout:o,httpAgent:s,httpsAgent:c,throwOnRequestTimeout:l}=e||{};return{connectionTimeout:n,requestTimeout:t,socketTimeout:a,socketAcquisitionWarningTimeout:o,throwOnRequestTimeout:l,httpAgent:(()=>s instanceof r.Agent||typeof s?.destroy==`function`?(this.externalAgent=!0,s):new r.Agent({keepAlive:!0,maxSockets:50,...s}))(),httpsAgent:(()=>c instanceof i.Agent||typeof c?.destroy==`function`?(this.externalAgent=!0,c):new i.Agent({keepAlive:!0,maxSockets:50,...c}))(),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(a,{abortSignal:o,requestTimeout:u}={}){return this.config||=await this.configProvider,new Promise((p,h)=>{let _=this.config,y,b=[],x=async e=>{await y,b.forEach(l.clearTimeout),p(e)},S=async e=>{await y,b.forEach(l.clearTimeout),h(e)};if(o?.aborted){let e=Error(`Request aborted`);e.name=`AbortError`,S(e);return}let C=a.protocol===`https:`,w=a.headers??{},T=(w.Expect??w.expect)===`100-continue`,E=C?_.httpsAgent:_.httpAgent;T&&!this.externalAgent&&(E=new(C?i.Agent:r.Agent)({keepAlive:!1,maxSockets:1/0})),b.push(l.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(E,this.socketWarningTimestamp,_.logger)},_.socketAcquisitionWarningTimeout??(_.requestTimeout??2e3)+(_.connectionTimeout??1e3)));let D=n.buildQueryString(a.query||{}),O;(a.username!=null||a.password!=null)&&(O=`${a.username??``}:${a.password??``}`);let k=a.path;D&&(k+=`?${D}`),a.fragment&&(k+=`#${a.fragment}`);let A=a.hostname??``;A=A[0]===`[`&&A.endsWith(`]`)?a.hostname.slice(1,-1):a.hostname;let j={headers:a.headers,host:A,method:a.method,path:k,port:a.port,agent:E,auth:O},M=(C?i.request:r.request)(j,e=>{x({response:new t.HttpResponse({statusCode:e.statusCode||-1,reason:e.statusMessage,headers:c(e.headers),body:e})})});if(M.on(`error`,e=>{s.includes(e.code)?S(Object.assign(e,{name:`TimeoutError`})):S(e)}),o){let e=()=>{M.destroy();let e=Error(`Request aborted`);e.name=`AbortError`,S(e)};if(typeof o.addEventListener==`function`){let t=o;t.addEventListener(`abort`,e,{once:!0}),M.once(`close`,()=>t.removeEventListener(`abort`,e))}else o.onabort=e}let N=u??_.requestTimeout;b.push(d(M,S,_.connectionTimeout)),b.push(f(M,S,N,_.throwOnRequestTimeout,_.logger??console)),b.push(g(M,S,_.socketTimeout));let ee=j.agent;typeof ee==`object`&&`keepAlive`in ee&&b.push(m(M,{keepAlive:ee.keepAlive,keepAliveMsecs:ee.keepAliveMsecs})),y=v(M,a,N,this.externalAgent).catch(e=>(b.forEach(l.clearTimeout),h(e)))})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}},x=class{sessions=[];constructor(e){this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(t=>t!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let t of this.sessions)t===e&&(t.destroyed||t.destroy())}},S=class{constructor(e){if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw RangeError(`maxConcurrency must be greater than zero.`)}config;sessionCache=new Map;lease(e,t){let n=this.getUrlString(e),r=this.sessionCache.get(n);if(r){let e=r.poll();if(e&&!this.config.disableConcurrency)return e}let i=o.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},t=>{if(t)throw Error(`Fail to set maxConcurrentStreams to `+this.config.maxConcurrency+`when creating new session for `+e.destination.toString())}),i.unref();let a=()=>{i.destroy(),this.deleteSession(n,i)};i.on(`goaway`,a),i.on(`error`,a),i.on(`frameError`,a),i.on(`close`,()=>this.deleteSession(n,i)),t.requestTimeout&&i.setTimeout(t.requestTimeout,a);let s=this.sessionCache.get(n)||new x;return s.offerLast(i),this.sessionCache.set(n,s),i}deleteSession(e,t){let n=this.sessionCache.get(e);n&&n.contains(t)&&(n.remove(t),this.sessionCache.set(e,n))}release(e,t){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(t)}destroy(){for(let[e,t]of this.sessionCache){for(let e of t)e.destroyed||e.destroy(),t.remove(e);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw RangeError(`maxConcurrentStreams must be greater than zero.`);this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},C=class e{config;configProvider;metadata={handlerProtocol:`h2`};connectionManager=new S({});static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){this.configProvider=new Promise((t,n)=>{typeof e==`function`?e().then(e=>{t(e||{})}).catch(n):t(e||{})})}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:i}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:a,disableConcurrentStreams:s}=this.config,l=i??a;return new Promise((i,a)=>{let u=!1,d,f=async e=>{await d,i(e)},p=async e=>{await d,a(e)};if(r?.aborted){u=!0;let e=Error(`Request aborted`);e.name=`AbortError`,p(e);return}let{hostname:m,method:h,port:g,protocol:_,query:y}=e,b=``;(e.username!=null||e.password!=null)&&(b=`${e.username??``}:${e.password??``}@`);let x=`${_}//${b}${m}${g?`:${g}`:``}`,S={destination:new URL(x)},C=this.connectionManager.lease(S,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),w=e=>{s&&this.destroySession(C),u=!0,p(e)},T=n.buildQueryString(y||{}),E=e.path;T&&(E+=`?${T}`),e.fragment&&(E+=`#${e.fragment}`);let D=C.request({...e.headers,[o.constants.HTTP2_HEADER_PATH]:E,[o.constants.HTTP2_HEADER_METHOD]:h});if(C.ref(),D.on(`response`,e=>{let n=new t.HttpResponse({statusCode:e[`:status`]||-1,headers:c(e),body:D});u=!0,f({response:n}),s&&(C.close(),this.connectionManager.deleteSession(x,C))}),l&&D.setTimeout(l,()=>{D.close();let e=Error(`Stream timed out because of no activity for ${l} ms`);e.name=`TimeoutError`,w(e)}),r){let e=()=>{D.close();let e=Error(`Request aborted`);e.name=`AbortError`,w(e)};if(typeof r.addEventListener==`function`){let t=r;t.addEventListener(`abort`,e,{once:!0}),D.once(`close`,()=>t.removeEventListener(`abort`,e))}else r.onabort=e}D.on(`frameError`,(e,t,n)=>{w(Error(`Frame type id ${e} in stream id ${n} has failed with code ${t}.`))}),D.on(`error`,w),D.on(`aborted`,()=>{w(Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${D.rstCode}.`))}),D.on(`close`,()=>{C.unref(),s&&C.destroy(),u||w(Error(`Unexpected error: http2 request did not get a response`))}),d=v(D,e,l)})}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:t}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},w=class extends a.Writable{bufferedBytes=[];_write(e,t,n){this.bufferedBytes.push(e),n()}};let T=e=>E(e)?D(e):new Promise((t,n)=>{let r=new w;e.pipe(r),e.on(`error`,e=>{r.end(),n(e)}),r.on(`error`,n),r.on(`finish`,function(){t(new Uint8Array(Buffer.concat(this.bufferedBytes)))})}),E=e=>typeof ReadableStream==`function`&&e instanceof ReadableStream;async function D(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}e.DEFAULT_REQUEST_TIMEOUT=0,e.NodeHttp2Handler=C,e.NodeHttpHandler=b,e.streamCollector=T})),He=s((e=>{var t=p(),n=Be(),r=De();function i(e,t){return new Request(e,t)}function a(e=0){return new Promise((t,n)=>{e&&setTimeout(()=>{let t=Error(`Request did not complete within ${e} ms`);t.name=`TimeoutError`,n(t)},e)})}let o={supported:void 0};var s=class e{config;configProvider;static create(t){return typeof t?.handle==`function`?t:new e(t)}constructor(e){typeof e==`function`?this.configProvider=e().then(e=>e||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),o.supported===void 0&&(o.supported=typeof Request<`u`&&`keepalive`in i(`https://[::1]`))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:s}={}){this.config||=await this.configProvider;let c=s??this.config.requestTimeout,l=this.config.keepAlive===!0,u=this.config.credentials;if(r?.aborted){let e=Error(`Request aborted`);return e.name=`AbortError`,Promise.reject(e)}let d=e.path,f=n.buildQueryString(e.query||{});f&&(d+=`?${f}`),e.fragment&&(d+=`#${e.fragment}`);let p=``;(e.username!=null||e.password!=null)&&(p=`${e.username??``}:${e.password??``}@`);let{port:m,method:h}=e,g=`${e.protocol}//${p}${e.hostname}${m?`:${m}`:``}${d}`,_=h===`GET`||h===`HEAD`?void 0:e.body,v={body:_,headers:new Headers(e.headers),method:h,credentials:u};this.config?.cache&&(v.cache=this.config.cache),_&&(v.duplex=`half`),typeof AbortController<`u`&&(v.signal=r),o.supported&&(v.keepalive=l),typeof this.config.requestInit==`function`&&Object.assign(v,this.config.requestInit(e));let y=()=>{},b=i(g,v),x=[fetch(b).then(e=>{let n=e.headers,r={};for(let e of n.entries())r[e[0]]=e[1];return e.body==null?e.blob().then(n=>({response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:n})})):{response:new t.HttpResponse({headers:r,reason:e.statusText,statusCode:e.status,body:e.body})}}),a(c)];return r&&x.push(new Promise((e,t)=>{let n=()=>{let e=Error(`Request aborted`);e.name=`AbortError`,t(e)};if(typeof r.addEventListener==`function`){let e=r;e.addEventListener(`abort`,n,{once:!0}),y=()=>e.removeEventListener(`abort`,n)}else r.onabort=n})),Promise.race(x).finally(y)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=t,n))}httpHandlerConfigs(){return this.config??{}}};let c=async e=>typeof Blob==`function`&&e instanceof Blob||e.constructor?.name===`Blob`?Blob.prototype.arrayBuffer===void 0?l(e):new Uint8Array(await e.arrayBuffer()):u(e);async function l(e){let t=await d(e),n=r.fromBase64(t);return new Uint8Array(n)}async function u(e){let t=[],n=e.getReader(),r=!1,i=0;for(;!r;){let{done:e,value:a}=await n.read();a&&(t.push(a),i+=a.length),r=e}let a=new Uint8Array(i),o=0;for(let e of t)a.set(e,o),o+=e.length;return a}function d(e){return new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(Error(`Reader aborted too early`));let e=r.result??``,i=e.indexOf(`,`),a=i>-1?i+1:e.length;t(e.substring(a))},r.onabort=()=>n(Error(`Read aborted`)),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}e.FetchHttpHandler=s,e.keepAliveSupport=o,e.streamCollector=c})),Ue=s((e=>{let t={},n={};for(let e=0;e<256;e++){let r=e.toString(16).toLowerCase();r.length===1&&(r=`0${r}`),t[e]=r,n[r]=e}function r(e){if(e.length%2!=0)throw Error(`Hex encoded strings must have an even number length`);let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let i=e.slice(r,r+2).toLowerCase();if(i in n)t[r/2]=n[i];else throw Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return t}function i(e){let n=``;for(let r=0;r<e.byteLength;r++)n+=t[e[r]];return n}e.fromHex=r,e.toHex=i})),We=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=He(),n=De(),r=Ue(),i=R(),a=ke(),o=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!s(e)&&!(0,a.isReadableStream)(e)){let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${t}`)}let c=!1,l=async()=>{if(c)throw Error(o);return c=!0,await(0,t.streamCollector)(e)},u=e=>{if(typeof e.stream!=`function`)throw Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return e.stream()};return Object.assign(e,{transformToByteArray:l,transformToString:async e=>{let t=await l();if(e===`base64`)return(0,n.toBase64)(t);if(e===`hex`)return(0,r.toHex)(t);if(e===void 0||e===`utf8`||e===`utf-8`)return(0,i.toUtf8)(t);if(typeof TextDecoder==`function`)return new TextDecoder(e).decode(t);throw Error(`TextDecoder is not available, please make sure polyfill is provided.`)},transformToWebStream:()=>{if(c)throw Error(o);if(c=!0,s(e))return u(e);if((0,a.isReadableStream)(e))return e;throw Error(`Cannot transform payload to web stream, got ${e}`)}})};let s=e=>typeof Blob==`function`&&e instanceof Blob})),Ge=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.sdkStreamMixin=void 0;let t=Ve(),n=we(),r=require(`stream`),i=We(),a=`The stream has already been transformed.`;e.sdkStreamMixin=e=>{if(!(e instanceof r.Readable))try{return(0,i.sdkStreamMixin)(e)}catch{let t=e?.__proto__?.constructor?.name||e;throw Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${t}`)}let o=!1,s=async()=>{if(o)throw Error(a);return o=!0,await(0,t.streamCollector)(e)};return Object.assign(e,{transformToByteArray:s,transformToString:async e=>{let t=await s();return e===void 0||Buffer.isEncoding(e)?(0,n.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString(e):new TextDecoder(e).decode(t)},transformToWebStream:()=>{if(o)throw Error(a);if(e.readableFlowing!==null)throw Error(`The stream has been consumed by other callbacks.`);if(typeof r.Readable.toWeb!=`function`)throw Error(`Readable.toWeb() is not supported. Please ensure a polyfill is available.`);return o=!0,r.Readable.toWeb(e)}})}})),Ke=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=t;async function t(e){return typeof e.stream==`function`&&(e=e.stream()),e.tee()}})),qe=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.splitStream=i;let t=require(`stream`),n=Ke(),r=ke();async function i(e){if((0,r.isReadableStream)(e)||(0,r.isBlob)(e))return(0,n.splitStream)(e);let i=new t.PassThrough,a=new t.PassThrough;return e.pipe(i),e.pipe(a),[i,a]}})),Je=s((e=>{var t=De(),n=R(),r=Oe(),i=Me(),a=Fe(),o=Ie(),s=Re(),c=Ge(),l=qe(),u=ke();e.Uint8ArrayBlobAdapter=class e extends Uint8Array{static fromString(r,i=`utf-8`){if(typeof r==`string`)return i===`base64`?e.mutate(t.fromBase64(r)):e.mutate(n.fromUtf8(r));throw Error(`Unsupported conversion from ${typeof r} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(e=`utf-8`){return e===`base64`?t.toBase64(this):n.toUtf8(this)}},Object.keys(r).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(s).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(c).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(l).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(u).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})})})),Ye,Xe,Ze=o((()=>{Ye=Je(),Xe=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ye.Uint8ArrayBlobAdapter.mutate(e);if(!e)return Ye.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let n=t.streamCollector(e);return Ye.Uint8ArrayBlobAdapter.mutate(await n)}}));function Qe(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return`%`+e.charCodeAt(0).toString(16).toUpperCase()})}var $e=o((()=>{})),et,tt=o((()=>{et=e=>typeof e==`function`?e():e})),nt,rt=o((()=>{nt=(e,t,n,r,i)=>({name:t,namespace:e,traits:n,input:r,output:i})})),it,at,ot,st,ct=o((()=>{it=p(),at=k(),rt(),ot=e=>(t,n)=>async r=>{let{response:i}=await t(r),{operationSchema:a}=(0,at.getSmithyContext)(n),[,o,s,c,l,u]=a??[];try{return{response:i,output:await e.protocol.deserializeResponse(nt(o,s,c,l,u),{...e,...n},i)}}catch(e){if(Object.defineProperty(e,`$response`,{value:i,enumerable:!1,writable:!1,configurable:!1}),!(`$metadata`in e)){let t=`Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.`;try{e.message+=`
  `+t}catch{!n.logger||n.logger?.constructor?.name===`NoOpLogger`?console.warn(t):n.logger?.warn?.(t)}e.$responseBodyText!==void 0&&e.$response&&(e.$response.body=e.$responseBodyText);try{if(it.HttpResponse.isInstance(i)){let{headers:t={}}=i,n=Object.entries(t);e.$metadata={httpStatusCode:i.statusCode,requestId:st(/^x-[\w-]+-request-?id$/,n),extendedRequestId:st(/^x-[\w-]+-id-2$/,n),cfId:st(/^x-[\w-]+-cf-id$/,n)}}}catch{}}throw e}},st=(e,t)=>(t.find(([t])=>t.match(e))||[void 0,void 0])[1]})),lt,ut,dt=o((()=>{lt=k(),rt(),ut=e=>(t,n)=>async r=>{let{operationSchema:i}=(0,lt.getSmithyContext)(n),[,a,o,s,c,l]=i??[],u=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint,d=await e.protocol.serializeRequest(nt(a,o,s,c,l),r.input,{...e,...n,endpoint:u});return t({...r,request:d})}}));function ft(e){return{applyToStack:t=>{t.add(ut(e),mt),t.add(ot(e),pt),e.protocol.setSerdeContext(e)}}}var pt,mt,ht=o((()=>{ct(),dt(),pt={name:`deserializerMiddleware`,step:`deserialize`,tags:[`DESERIALIZER`],override:!0},mt={name:`serializerMiddleware`,step:`serialize`,tags:[`SERIALIZER`],override:!0}})),gt,_t=o((()=>{gt=class{name;namespace;traits;static assign(e,t){return Object.assign(e,t)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}getName(){return this.namespace+`#`+this.name}}})),vt,yt,bt=o((()=>{_t(),vt=class e extends gt{static symbol=Symbol.for(`@smithy/lis`);name;traits;valueSchema;symbol=e.symbol},yt=(e,t,n,r)=>gt.assign(new vt,{name:t,namespace:e,traits:n,valueSchema:r})})),xt,St,Ct=o((()=>{_t(),xt=class e extends gt{static symbol=Symbol.for(`@smithy/map`);name;traits;keySchema;valueSchema;symbol=e.symbol},St=(e,t,n,r,i)=>gt.assign(new xt,{name:t,namespace:e,traits:n,keySchema:r,valueSchema:i})})),wt,Tt,Et=o((()=>{_t(),wt=class e extends gt{static symbol=Symbol.for(`@smithy/ope`);name;traits;input;output;symbol=e.symbol},Tt=(e,t,n,r,i)=>gt.assign(new wt,{name:t,namespace:e,traits:n,input:r,output:i})})),Dt,Ot,kt=o((()=>{_t(),Dt=class e extends gt{static symbol=Symbol.for(`@smithy/str`);name;traits;memberNames;memberList;symbol=e.symbol},Ot=(e,t,n,r,i)=>gt.assign(new Dt,{name:t,namespace:e,traits:n,memberNames:r,memberList:i})})),At,jt,Mt=o((()=>{_t(),kt(),At=class e extends Dt{static symbol=Symbol.for(`@smithy/err`);ctor;symbol=e.symbol},jt=(e,t,n,r,i,a)=>gt.assign(new At,{name:t,namespace:e,traits:n,memberNames:r,memberList:i,ctor:null})}));function Nt(e){if(typeof e==`object`)return e;e|=0;let t={},n=0;for(let r of[`httpLabel`,`idempotent`,`idempotencyToken`,`sensitive`,`httpPayload`,`httpResponseCode`,`httpQueryParams`])(e>>n++&1)==1&&(t[r]=1);return t}var Pt=o((()=>{}));function Ft(e,t){return e instanceof z?Object.assign(e,{memberName:t,_isMemberSchema:!0}):new z(e,t)}var z,It,Lt,Rt=o((()=>{tt(),Pt(),z=class e{ref;memberName;static symbol=Symbol.for(`@smithy/nor`);symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,n){this.ref=t,this.memberName=n;let r=[],i=t,a=t;for(this._isMemberSchema=!1;It(i);)r.push(i[1]),i=i[0],a=et(i),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let e=r.length-1;e>=0;--e){let t=r[e];Object.assign(this.memberTraits,Nt(t))}}else this.memberTraits=0;if(a instanceof e){let e=this.memberTraits;Object.assign(this,a),this.memberTraits=Object.assign({},e,a.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??a.memberName;return}if(this.schema=et(a),Lt(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(a),this.traits=0),this._isMemberSchema&&!n)throw Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let t=this.prototype.isPrototypeOf(e);return!t&&typeof e==`object`&&e?e.symbol===this.symbol:t}static of(t){let n=et(t);if(n instanceof e)return n;if(It(n)){let[r,i]=n;if(r instanceof e)return Object.assign(r.getMergedTraits(),Nt(i)),r;throw Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(n)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:t}=this;return!e&&t&&t.includes(`#`)?t.split(`#`)[1]:t||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e==`number`?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e==`number`?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e==`number`&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()===`unit`}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=e=>(e&4)==4||!!e?.idempotencyToken,{normalizedTraits:t,traits:n,memberTraits:r}=this;return e(t)||e(n)||e(r)}getMergedTraits(){return this.normalizedTraits??={...this.getOwnTraits(),...this.getMemberTraits()}}getMemberTraits(){return Nt(this.memberTraits)}getOwnTraits(){return Nt(this.traits)}getKeySchema(){let[e,t]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!t)throw Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema();return Ft([e?15:n[4]??0,0],`key`)}getValueSchema(){let e=this.getSchema(),[t,n,r]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e==`number`?63&e:e&&typeof e==`object`&&(n||r)?e[3+e[0]]:t?15:void 0;if(i!=null)return Ft([i,0],n?`value`:`member`);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let t=this.getSchema();if(this.isStructSchema()&&t[4].includes(e)){let n=t[4].indexOf(e),r=t[5][n];return Ft(It(r)?r:[r,0],e)}if(this.isDocumentSchema())return Ft([15,0],e);throw Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[t,n]of this.structIterator())e[t]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,t]of this.structIterator())if(t.isStreaming()&&t.isStructSchema())return e}return``}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw Error(`@smithy/core/schema - cannot iterate non-struct schema.`);let e=this.getSchema();for(let t=0;t<e[4].length;++t)yield[e[4][t],Ft([e[5][t],0],e[4][t])]}},It=e=>Array.isArray(e)&&e.length===2,Lt=e=>Array.isArray(e)&&e.length>=5})),zt,Bt,Vt,Ht=o((()=>{_t(),zt=class e extends gt{static symbol=Symbol.for(`@smithy/sim`);name;schemaRef;traits;symbol=e.symbol},Bt=(e,t,n,r)=>gt.assign(new zt,{name:t,namespace:e,traits:r,schemaRef:n}),Vt=(e,t,n,r)=>gt.assign(new zt,{name:t,namespace:e,traits:n,schemaRef:r})})),Ut,Wt=o((()=>{Ut={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}})),B,Gt=o((()=>{B=class e{namespace;schemas;exceptions;static registries=new Map;constructor(e,t=new Map,n=new Map){this.namespace=e,this.schemas=t,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,n){let r=this.normalizeShapeId(t);e.for(r.split(`#`)[0]).schemas.set(r,n)}getSchema(e){let t=this.normalizeShapeId(e);if(!this.schemas.has(t))throw Error(`@smithy/core/schema - schema not found for ${t}`);return this.schemas.get(t)}registerError(t,n){let r=t,i=e.for(r[1]);i.schemas.set(r[1]+`#`+r[2],r),i.exceptions.set(r,n)}getErrorCtor(t){let n=t;return e.for(n[1]).exceptions.get(n)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,t,n]=e,r=t+`#`+n;if(r.startsWith(`smithy.ts.sdk.synthetic.`)&&r.endsWith(`ServiceException`))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes(`#`)?e:this.namespace+`#`+e}}})),Kt=c({ErrorSchema:()=>At,ListSchema:()=>vt,MapSchema:()=>xt,NormalizedSchema:()=>z,OperationSchema:()=>wt,SCHEMA:()=>Ut,Schema:()=>gt,SimpleSchema:()=>zt,StructureSchema:()=>Dt,TypeRegistry:()=>B,deref:()=>et,deserializerMiddlewareOption:()=>pt,error:()=>jt,getSchemaSerdePlugin:()=>ft,isStaticSchema:()=>Lt,list:()=>yt,map:()=>St,op:()=>Tt,operation:()=>nt,serializerMiddlewareOption:()=>mt,sim:()=>Bt,simAdapter:()=>Vt,struct:()=>Ot,translateTraits:()=>Nt}),V=o((()=>{tt(),ht(),bt(),Ct(),Et(),rt(),Mt(),Rt(),_t(),Ht(),kt(),Wt(),Pt(),Gt()})),qt,Jt=o((()=>{qt=(e,t,n=e=>e)=>e})),Yt,Xt,Zt,Qt,$t,en,tn,nn,rn,an,on,sn,cn,ln,un,dn,fn,pn,mn,hn,gn,_n,vn,yn,bn,xn,Sn,Cn,wn,Tn,En,Dn,On,kn=o((()=>{Yt=e=>{switch(e){case`true`:return!0;case`false`:return!1;default:throw Error(`Unable to parse boolean value "${e}"`)}},Xt=e=>{if(e!=null){if(typeof e==`number`){if((e===0||e===1)&&On.warn(Dn(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e==`string`){let t=e.toLowerCase();if((t===`false`||t===`true`)&&On.warn(Dn(`Expected boolean, got ${typeof e}: ${e}`)),t===`false`)return!1;if(t===`true`)return!0}if(typeof e==`boolean`)return e;throw TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Zt=e=>{if(e!=null){if(typeof e==`string`){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&On.warn(Dn(`Expected number but observed string: ${e}`)),t}if(typeof e==`number`)return e;throw TypeError(`Expected number, got ${typeof e}: ${e}`)}},Qt=Math.ceil(2**127*(2-2**-23)),$t=e=>{let t=Zt(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Qt)throw TypeError(`Expected 32-bit float, got ${e}`);return t},en=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw TypeError(`Expected integer, got ${typeof e}: ${e}`)}},tn=en,nn=e=>on(e,32),rn=e=>on(e,16),an=e=>on(e,8),on=(e,t)=>{let n=en(e);if(n!==void 0&&sn(n,t)!==n)throw TypeError(`Expected ${t}-bit integer, got ${e}`);return n},sn=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},cn=(e,t)=>{if(e==null)throw t?TypeError(`Expected a non-null value for ${t}`):TypeError(`Expected a non-null value`);return e},ln=e=>{if(e==null)return;if(typeof e==`object`&&!Array.isArray(e))return e;let t=Array.isArray(e)?`array`:typeof e;throw TypeError(`Expected object, got ${t}: ${e}`)},un=e=>{if(e!=null){if(typeof e==`string`)return e;if([`boolean`,`number`,`bigint`].includes(typeof e))return On.warn(Dn(`Expected string, got ${typeof e}: ${e}`)),String(e);throw TypeError(`Expected string, got ${typeof e}: ${e}`)}},dn=e=>{if(e==null)return;let t=ln(e),n=Object.entries(t).filter(([,e])=>e!=null).map(([e])=>e);if(n.length===0)throw TypeError(`Unions must have exactly one non-null member. None were found.`);if(n.length>1)throw TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},fn=e=>Zt(typeof e==`string`?gn(e):e),pn=fn,mn=e=>$t(typeof e==`string`?gn(e):e),hn=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,gn=e=>{let t=e.match(hn);if(t===null||t[0].length!==e.length)throw TypeError(`Expected real number, got implicit NaN`);return parseFloat(e)},_n=e=>typeof e==`string`?xn(e):Zt(e),vn=_n,yn=_n,bn=e=>typeof e==`string`?xn(e):$t(e),xn=e=>{switch(e){case`NaN`:return NaN;case`Infinity`:return 1/0;case`-Infinity`:return-1/0;default:throw Error(`Unable to parse float value: ${e}`)}},Sn=e=>en(typeof e==`string`?gn(e):e),Cn=Sn,wn=e=>nn(typeof e==`string`?gn(e):e),Tn=e=>rn(typeof e==`string`?gn(e):e),En=e=>an(typeof e==`string`?gn(e):e),Dn=e=>String(TypeError(e).stack||e).split(`
`).slice(0,5).filter(e=>!e.includes(`stackTraceWarning`)).join(`
`),On={warn:console.warn}}));function An(e){let t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),a=e.getUTCHours(),o=e.getUTCMinutes(),s=e.getUTCSeconds(),c=i<10?`0${i}`:`${i}`,l=a<10?`0${a}`:`${a}`,u=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`;return`${jn[r]}, ${c} ${Mn[n]} ${t} ${l}:${u}:${d} GMT`}var jn,Mn,Nn,Pn,Fn,In,Ln,Rn,zn,Bn,Vn,Hn,Un,Wn,Gn,Kn,qn,Jn,Yn,Xn,Zn,Qn,$n,er=o((()=>{kn(),jn=[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],Mn=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],Nn=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Pn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Nn.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l]=t;return Hn(Tn($n(r)),Xn(i,`month`,1,12),Xn(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l})},Fn=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),In=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-3339 date-times must be expressed as strings`);let t=Fn.exec(e);if(!t)throw TypeError(`Invalid RFC-3339 date-time value`);let[n,r,i,a,o,s,c,l,u]=t,d=Hn(Tn($n(r)),Xn(i,`month`,1,12),Xn(a,`day`,1,31),{hours:o,minutes:s,seconds:c,fractionalMilliseconds:l});return u.toUpperCase()!=`Z`&&d.setTime(d.getTime()-Qn(u)),d},Ln=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Rn=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),zn=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Bn=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC-7231 date-times must be expressed as strings`);let t=Ln.exec(e);if(t){let[e,n,r,i,a,o,s,c]=t;return Hn(Tn($n(i)),Kn(r),Xn(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c})}if(t=Rn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return Gn(Hn(Un(i),Kn(r),Xn(n,`day`,1,31),{hours:a,minutes:o,seconds:s,fractionalMilliseconds:c}))}if(t=zn.exec(e),t){let[e,n,r,i,a,o,s,c]=t;return Hn(Tn($n(c)),Kn(n),Xn(r.trimLeft(),`day`,1,31),{hours:i,minutes:a,seconds:o,fractionalMilliseconds:s})}throw TypeError(`Invalid RFC-7231 date-time value`)},Vn=e=>{if(e==null)return;let t;if(typeof e==`number`)t=e;else if(typeof e==`string`)t=fn(e);else if(typeof e==`object`&&e.tag===1)t=e.value;else throw TypeError(`Epoch timestamps must be expressed as floating point numbers or their string representation`);if(Number.isNaN(t)||t===1/0||t===-1/0)throw TypeError(`Epoch timestamps must be valid, non-Infinite, non-NaN numerics`);return new Date(Math.round(t*1e3))},Hn=(e,t,n,r)=>{let i=t-1;return Jn(e,i,n),new Date(Date.UTC(e,i,n,Xn(r.hours,`hour`,0,23),Xn(r.minutes,`minute`,0,59),Xn(r.seconds,`seconds`,0,60),Zn(r.fractionalMilliseconds)))},Un=e=>{let t=new Date().getUTCFullYear(),n=Math.floor(t/100)*100+Tn($n(e));return n<t?n+100:n},Wn=50*365*24*60*60*1e3,Gn=e=>e.getTime()-new Date().getTime()>Wn?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Kn=e=>{let t=Mn.indexOf(e);if(t<0)throw TypeError(`Invalid month: ${e}`);return t+1},qn=[31,28,31,30,31,30,31,31,30,31,30,31],Jn=(e,t,n)=>{let r=qn[t];if(t===1&&Yn(e)&&(r=29),n>r)throw TypeError(`Invalid day for ${Mn[t]} in ${e}: ${n}`)},Yn=e=>e%4==0&&(e%100!=0||e%400==0),Xn=(e,t,n,r)=>{let i=En($n(e));if(i<n||i>r)throw TypeError(`${t} must be between ${n} and ${r}, inclusive`);return i},Zn=e=>e==null?0:mn(`0.`+e)*1e3,Qn=e=>{let t=e[0],n=1;if(t==`+`)n=1;else if(t==`-`)n=-1;else throw TypeError(`Offset direction, ${t}, must be "+" or "-"`);let r=Number(e.substring(1,3)),i=Number(e.substring(4,6));return n*(r*60+i)*60*1e3},$n=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)===`0`;)t++;return t===0?e:e.slice(t)}})),tr=c({__addDisposableResource:()=>kr,__assign:()=>Nr,__asyncDelegator:()=>xr,__asyncGenerator:()=>br,__asyncValues:()=>Sr,__await:()=>yr,__awaiter:()=>dr,__classPrivateFieldGet:()=>Er,__classPrivateFieldIn:()=>Or,__classPrivateFieldSet:()=>Dr,__createBinding:()=>Pr,__decorate:()=>ir,__disposeResources:()=>Ar,__esDecorate:()=>or,__exportStar:()=>pr,__extends:()=>nr,__generator:()=>fr,__importDefault:()=>Tr,__importStar:()=>wr,__makeTemplateObject:()=>Cr,__metadata:()=>ur,__param:()=>ar,__propKey:()=>cr,__read:()=>hr,__rest:()=>rr,__rewriteRelativeImportExtension:()=>jr,__runInitializers:()=>sr,__setFunctionName:()=>lr,__spread:()=>gr,__spreadArray:()=>vr,__spreadArrays:()=>_r,__values:()=>mr,default:()=>Rr});function nr(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);Mr(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function rr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ir(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function ar(e,t){return function(n,r){t(n,r,e)}}function or(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function sr(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function cr(e){return typeof e==`symbol`?e:`${e}`}function lr(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})}function ur(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function dr(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function fr(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator==`function`?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function pr(e,t){for(var n in e)n!==`default`&&!Object.prototype.hasOwnProperty.call(t,n)&&Pr(t,e,n)}function mr(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function hr(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function gr(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hr(arguments[t]));return e}function _r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function vr(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function yr(e){return this instanceof yr?(this.v=e,this):new yr(e)}function br(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator==`function`?AsyncIterator:Object).prototype),s(`next`),s(`throw`),s(`return`,o),i[Symbol.asyncIterator]=function(){return this},i;function o(e){return function(t){return Promise.resolve(t).then(e,d)}}function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})},t&&(i[e]=t(i[e])))}function c(e,t){try{l(r[e](t))}catch(e){f(a[0][3],e)}}function l(e){e.value instanceof yr?Promise.resolve(e.value.v).then(u,d):f(a[0][2],e)}function u(e){c(`next`,e)}function d(e){c(`throw`,e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function xr(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:yr(e[r](t)),done:!1}:i?i(t):t}:i}}function Sr(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof mr==`function`?mr(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function Cr(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function wr(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Ir(e),r=0;r<n.length;r++)n[r]!==`default`&&Pr(t,e,n[r]);return Fr(t,e),t}function Tr(e){return e&&e.__esModule?e:{default:e}}function Er(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}function Dr(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n}function Or(e,t){if(t===null||typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Cannot use 'in' operator on non-object`);return typeof e==`function`?t===e:e.has(t)}function kr(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function Ar(e){function t(t){e.error=e.hasError?new Lr(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(e){return t(e),i()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function jr(e,t){return typeof e==`string`&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,a){return n?t?`.jsx`:`.js`:r&&(!i||!a)?e:r+i+`.`+a.toLowerCase()+`js`}):e}var Mr,Nr,Pr,Fr,Ir,Lr,Rr,zr=o((()=>{Mr=function(e,t){return Mr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Mr(e,t)},Nr=function(){return Nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nr.apply(this,arguments)},Pr=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Fr=Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t},Ir=function(e){return Ir=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Ir(e)},Lr=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r},Rr={__extends:nr,__assign:Nr,__rest:rr,__decorate:ir,__param:ar,__esDecorate:or,__runInitializers:sr,__propKey:cr,__setFunctionName:lr,__metadata:ur,__awaiter:dr,__generator:fr,__createBinding:Pr,__exportStar:pr,__values:mr,__read:hr,__spread:gr,__spreadArrays:_r,__spreadArray:vr,__await:yr,__asyncGenerator:br,__asyncDelegator:xr,__asyncValues:Sr,__makeTemplateObject:Cr,__importStar:wr,__importDefault:Tr,__classPrivateFieldGet:Er,__classPrivateFieldSet:Dr,__classPrivateFieldIn:Or,__addDisposableResource:kr,__disposeResources:Ar,__rewriteRelativeImportExtension:jr}})),Br=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.randomUUID=void 0;let t=(zr(),d(tr)).__importDefault(require(`crypto`));e.randomUUID=t.default.randomUUID.bind(t.default)})),Vr=s((e=>{var t=Br();let n=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,`0`));e.v4=()=>{if(t.randomUUID)return t.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,n[e[0]]+n[e[1]]+n[e[2]]+n[e[3]]+`-`+n[e[4]]+n[e[5]]+`-`+n[e[6]]+n[e[7]]+`-`+n[e[8]]+n[e[9]]+`-`+n[e[10]]+n[e[11]]+n[e[12]]+n[e[13]]+n[e[14]]+n[e[15]]}})),Hr,Ur=o((()=>{Hr=Vr()})),Wr,Gr=o((()=>{Wr=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})},Wr.from=e=>e&&typeof e==`object`&&(e instanceof Wr||`deserializeJSON`in e)?e:typeof e==`string`||Object.getPrototypeOf(e)===String.prototype?Wr(String(e)):Wr(JSON.stringify(e)),Wr.fromObject=Wr.from}));function Kr(e){return(e.includes(`,`)||e.includes(`"`))&&(e=`"${e.replace(/"/g,`\\"`)}"`),e}var qr=o((()=>{}));function Jr(e,t,n){let r=Number(e);if(r<t||r>n)throw Error(`Value ${r} out of range [${t}, ${n}]`)}var Yr,Xr,Zr,Qr,$r,ei,ti,ni,ri,ii,ai,oi,si,ci=o((()=>{Yr=`(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?`,Xr=`(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)`,Zr=`(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?`,Qr=`(\\d?\\d)`,$r=`(\\d{4})`,ei=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),ti=RegExp(`^${Yr}, ${Qr} ${Xr} ${$r} ${Zr} GMT$`),ni=RegExp(`^${Yr}, ${Qr}-${Xr}-(\\d\\d) ${Zr} GMT$`),ri=RegExp(`^${Yr} ${Xr} ( [1-9]|\\d\\d) ${Zr} ${$r}$`),ii=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`],ai=e=>{if(e==null)return;let t=NaN;if(typeof e==`number`)t=e;else if(typeof e==`string`){if(!/^-?\d*\.?\d+$/.test(e))throw TypeError(`parseEpochTimestamp - numeric string invalid.`);t=Number.parseFloat(e)}else typeof e==`object`&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw TypeError(`Epoch timestamps must be valid finite numbers.`);return new Date(Math.round(t*1e3))},oi=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC3339 timestamps must be strings`);let t=ei.exec(e);if(!t)throw TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,n,r,i,a,o,s,,c,l]=t;Jr(r,1,12),Jr(i,1,31),Jr(a,0,23),Jr(o,0,59),Jr(s,0,60);let u=new Date(Date.UTC(Number(n),Number(r)-1,Number(i),Number(a),Number(o),Number(s),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(u.setUTCFullYear(Number(n)),l.toUpperCase()!=`Z`){let[,e,t,n]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,`+`,0,0],r=e===`-`?1:-1;u.setTime(u.getTime()+r*(Number(t)*60*60*1e3+Number(n)*60*1e3))}return u},si=e=>{if(e==null)return;if(typeof e!=`string`)throw TypeError(`RFC7231 timestamps must be strings.`);let t,n,r,i,a,o,s,c;if((c=ti.exec(e))?[,t,n,r,i,a,o,s]=c:(c=ni.exec(e))?([,t,n,r,i,a,o,s]=c,r=(Number(r)+1900).toString()):(c=ri.exec(e))&&([,n,t,i,a,o,s,r]=c),r&&o){let e=Date.UTC(Number(r),ii.indexOf(n),Number(t),Number(i),Number(a),Number(o),s?Math.round(parseFloat(`0.${s}`)*1e3):0);Jr(t,1,31),Jr(i,0,23),Jr(a,0,59),Jr(o,0,60);let c=new Date(e);return c.setUTCFullYear(Number(r)),c}throw TypeError(`Invalid RFC7231 date-time value ${e}.`)}}));function li(e,t,n){if(n<=0||!Number.isInteger(n))throw Error(`Invalid number of delimiters (`+n+`) for splitEvery.`);let r=e.split(t);if(n===1)return r;let i=[],a=``;for(let e=0;e<r.length;e++)a===``?a=r[e]:a+=t+r[e],(e+1)%n===0&&(i.push(a),a=``);return a!==``&&i.push(a),i}var ui=o((()=>{})),di,fi=o((()=>{di=e=>{let t=e.length,n=[],r=!1,i,a=0;for(let o=0;o<t;++o){let t=e[o];switch(t){case`"`:i!==`\\`&&(r=!r);break;case`,`:r||(n.push(e.slice(a,o)),a=o+1);break;default:}i=t}return n.push(e.slice(a)),n.map(e=>{e=e.trim();let t=e.length;return t<2?e:(e[0]===`"`&&e[t-1]===`"`&&(e=e.slice(1,t-1)),e.replace(/\\"/g,`"`))})}}));function pi(e){return new hi(String(e),`bigDecimal`)}var mi,hi,gi=o((()=>{mi=/^-?\d*(\.\d+)?$/,hi=class e{string;type;constructor(e,t){if(this.string=e,this.type=t,!mi.test(e))throw Error(`@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".`)}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!=`object`)return!1;let n=t;return e.prototype.isPrototypeOf(t)||n.type===`bigDecimal`&&mi.test(n.string)}}})),_i=c({LazyJsonString:()=>Wr,NumericValue:()=>hi,_parseEpochTimestamp:()=>ai,_parseRfc3339DateTimeWithOffset:()=>oi,_parseRfc7231DateTime:()=>si,copyDocumentWithTransform:()=>qt,dateToUtcString:()=>An,expectBoolean:()=>Xt,expectByte:()=>an,expectFloat32:()=>$t,expectInt:()=>tn,expectInt32:()=>nn,expectLong:()=>en,expectNonNull:()=>cn,expectNumber:()=>Zt,expectObject:()=>ln,expectShort:()=>rn,expectString:()=>un,expectUnion:()=>dn,generateIdempotencyToken:()=>Hr.v4,handleFloat:()=>vn,limitedParseDouble:()=>_n,limitedParseFloat:()=>yn,limitedParseFloat32:()=>bn,logger:()=>On,nv:()=>pi,parseBoolean:()=>Yt,parseEpochTimestamp:()=>Vn,parseRfc3339DateTime:()=>Pn,parseRfc3339DateTimeWithOffset:()=>In,parseRfc7231DateTime:()=>Bn,quoteHeader:()=>Kr,splitEvery:()=>li,splitHeader:()=>di,strictParseByte:()=>En,strictParseDouble:()=>fn,strictParseFloat:()=>pn,strictParseFloat32:()=>mn,strictParseInt:()=>Cn,strictParseInt32:()=>wn,strictParseLong:()=>Sn,strictParseShort:()=>Tn}),vi=o((()=>{Jt(),er(),Ur(),Gr(),kn(),qr(),ci(),ui(),fi(),gi()})),yi,bi=o((()=>{yi=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}})),xi,Si,Ci=o((()=>{xi=R(),Si=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:t,deserializer:n,serdeContext:r,defaultContentType:i}){this.marshaller=e,this.serializer=t,this.deserializer=n,this.serdeContext=r,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i),o=this.serializer,s=this.defaultContentType,c=Symbol(`initialRequestMarker`),l={async*[Symbol.asyncIterator](){if(n){let e={":event-type":{type:`string`,value:`initial-request`},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:s}};o.write(t,n);let r=o.flush();yield{[c]:!0,headers:e,body:r}}for await(let t of e)yield t}};return r.serialize(l,e=>{if(e[c])return{headers:e.headers,body:e.body};let t=Object.keys(e).find(e=>e!==`__type`)??``,{additionalHeaders:n,body:r,eventType:i,explicitPayloadContentType:o}=this.writeEventBody(t,a,e);return{headers:{":event-type":{type:`string`,value:i},":message-type":{type:`string`,value:`event`},":content-type":{type:`string`,value:o??s},...n},body:r}})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){let r=this.marshaller,i=t.getEventStreamMember(),a=t.getMemberSchema(i).getMemberSchemas(),o=Symbol(`initialResponseMarker`),s=r.deserialize(e.body,async e=>{let n=Object.keys(e).find(e=>e!==`__type`)??``,r=e[n].body;if(n===`initial-response`){let e=await this.deserializer.read(t,r);return delete e[i],{[o]:!0,...e}}else if(n in a){let t=a[n];if(t.isStructSchema()){let i={},a=!1;for(let[o,s]of t.structIterator()){let{eventHeader:t,eventPayload:c}=s.getMergedTraits();if(a||=!!(t||c),c)s.isBlobSchema()?i[o]=r:s.isStringSchema()?i[o]=(this.serdeContext?.utf8Encoder??xi.toUtf8)(r):s.isStructSchema()&&(i[o]=await this.deserializer.read(s,r));else if(t){let t=e[n].headers[o]?.value;t!=null&&(s.isNumericSchema()?t&&typeof t==`object`&&`bytes`in t?i[o]=BigInt(t.toString()):i[o]=Number(t):i[o]=t)}}if(a)return{[n]:i}}return{[n]:await this.deserializer.read(t,r)}}else return{$unknown:e}}),c=s[Symbol.asyncIterator](),l=await c.next();if(l.done)return s;if(l.value?.[o]){if(!t)throw Error(`@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.`);for(let[e,t]of Object.entries(l.value))n[e]=t}return{async*[Symbol.asyncIterator](){for(l?.value?.[o]||(yield l.value);;){let{done:e,value:t}=await c.next();if(e)break;yield t}}}}writeEventBody(e,t,n){let r=this.serializer,i=e,a=null,o,s=(()=>t.getSchema()[4].includes(e))(),c={};if(s){let i=t.getMemberSchema(e);if(i.isStructSchema()){for(let[t,r]of i.structIterator()){let{eventHeader:i,eventPayload:o}=r.getMergedTraits();if(o)a=t;else if(i){let i=n[e][t],a=`binary`;r.isNumericSchema()?a=(-2)**31<=i&&i<=2**31-1?`integer`:`long`:r.isTimestampSchema()?a=`timestamp`:r.isStringSchema()?a=`string`:r.isBooleanSchema()&&(a=`boolean`),i!=null&&(c[t]={type:a,value:i},delete n[e][t])}}if(a!==null){let t=i.getMemberSchema(a);t.isBlobSchema()?o=`application/octet-stream`:t.isStringSchema()&&(o=`text/plain`),r.write(t,n[e][a])}else r.write(i,n[e])}else throw Error(`@smithy/core/event-streams - non-struct member not supported in event stream union.`)}else{let[t,a]=n[e];i=t,r.write(15,a)}let l=r.flush();return{body:typeof l==`string`?(this.serdeContext?.utf8Decoder??xi.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:o,additionalHeaders:c}}}})),wi=c({EventStreamSerde:()=>Si}),Ti=o((()=>{Ci()})),Ei,Di,Oi=o((()=>{V(),Ei=p(),bi(),Di=class extends yi{options;constructor(e){super(),this.options=e}getRequestType(){return Ei.HttpRequest}getResponseType(){return Ei.HttpResponse}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,t){if(`url`in t){e.protocol=t.url.protocol,e.hostname=t.url.hostname,e.port=t.url.port?Number(t.url.port):void 0,e.path=t.url.pathname,e.fragment=t.url.hash||void 0,e.username=t.url.username||void 0,e.password=t.url.password||void 0,e.query||={};for(let[n,r]of t.url.searchParams.entries())e.query[n]=r;return e}else return e.protocol=t.protocol,e.hostname=t.hostname,e.port=t.port?Number(t.port):void 0,e.path=t.path,e.query={...t.query},e}setHostPrefix(e,t,n){let r=z.of(t.input),i=Nt(t.traits??{});if(i.endpoint){let t=i.endpoint?.[0];if(typeof t==`string`){let i=[...r.structIterator()].filter(([,e])=>e.getMergedTraits().hostLabel);for(let[e]of i){let r=n[e];if(typeof r!=`string`)throw Error(`@smithy/core/schema - ${e} in input must be a string as hostLabel.`);t=t.replace(`{${e}}`,r)}e.hostname=t+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}}async serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:t,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:t,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:e}=await Promise.resolve().then(()=>(Ti(),wi));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,t,n,r,i){return[]}getEventStreamMarshaller(){let e=this.serdeContext;if(!e.eventStreamMarshaller)throw Error(`@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.`);return e.eventStreamMarshaller}}})),ki,Ai,ji,Mi=o((()=>{V(),vi(),ki=p(),Ai=Je(),Ze(),$e(),Oi(),ji=class extends Di{async serializeRequest(e,t,n){let r={...t??{}},i=this.serializer,a={},o={},s=await n.endpoint(),c=z.of(e?.input),l=c.getSchema(),u=!1,d,f=new ki.HttpRequest({protocol:``,hostname:``,port:void 0,path:``,fragment:void 0,query:a,headers:o,body:void 0});if(s){this.updateServiceEndpoint(f,s),this.setHostPrefix(f,e,r);let t=Nt(e.traits);if(t.http){f.method=t.http[0];let[e,n]=t.http[1].split(`?`);f.path==`/`?f.path=e:f.path+=e;let r=new URLSearchParams(n??``);Object.assign(a,Object.fromEntries(r))}}for(let[e,t]of c.structIterator()){let n=t.getMergedTraits()??{},s=r[e];if(!(s==null&&!t.isIdempotencyToken()))if(n.httpPayload)t.isStreaming()?t.isStructSchema()?r[e]&&(d=await this.serializeEventStream({eventStream:r[e],requestSchema:c})):d=s:(i.write(t,s),d=i.flush()),delete r[e];else if(n.httpLabel){i.write(t,s);let n=i.flush();f.path.includes(`{${e}+}`)?f.path=f.path.replace(`{${e}+}`,n.split(`/`).map(Qe).join(`/`)):f.path.includes(`{${e}}`)&&(f.path=f.path.replace(`{${e}}`,Qe(n))),delete r[e]}else if(n.httpHeader)i.write(t,s),o[n.httpHeader.toLowerCase()]=String(i.flush()),delete r[e];else if(typeof n.httpPrefixHeaders==`string`){for(let[e,r]of Object.entries(s)){let a=n.httpPrefixHeaders+e;i.write([t.getValueSchema(),{httpHeader:a}],r),o[a.toLowerCase()]=i.flush()}delete r[e]}else n.httpQuery||n.httpQueryParams?(this.serializeQuery(t,s,a),delete r[e]):u=!0}return u&&r&&(i.write(l,r),d=i.flush()),f.headers=o,f.query=a,f.body=d,f}serializeQuery(e,t,n){let r=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[r,a]of Object.entries(t))if(!(r in n)){let t=e.getValueSchema();Object.assign(t.getMergedTraits(),{...i,httpQuery:r,httpQueryParams:void 0}),this.serializeQuery(t,a,n)}return}if(e.isListSchema()){let a=!!e.getMergedTraits().sparse,o=[];for(let n of t){r.write([e.getValueSchema(),i],n);let t=r.flush();(a||t!==void 0)&&o.push(t)}n[i.httpQuery]=o}else r.write([e,i],t),n[i.httpQuery]=r.flush()}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Xe(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - HTTP Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=await this.deserializeHttpMessage(i,t,n,a);if(o.length){let e=await Xe(n.body,t);if(e.byteLength>0){let t=await r.read(i,e);for(let e of o)a[e]=t[e]}}else o.discardResponseBody&&await Xe(n.body,t);return a.$metadata=this.deserializeMetadata(n),a}async deserializeHttpMessage(e,t,n,r,i){let a;a=r instanceof Set?i:r;let o=!0,s=this.deserializer,c=z.of(e),l=[];for(let[e,r]of c.structIterator()){let i=r.getMemberTraits();if(i.httpPayload){if(o=!1,r.isStreaming())r.isStructSchema()?a[e]=await this.deserializeEventStream({response:n,responseSchema:c}):a[e]=(0,Ai.sdkStreamMixin)(n.body);else if(n.body){let i=await Xe(n.body,t);i.byteLength>0&&(a[e]=await s.read(r,i))}}else if(i.httpHeader){let t=String(i.httpHeader).toLowerCase(),o=n.headers[t];if(o!=null)if(r.isListSchema()){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t;let i;i=n.isTimestampSchema()&&n.getSchema()===4?li(o,`,`,2):di(o);let c=[];for(let e of i)c.push(await s.read(n,e.trim()));a[e]=c}else a[e]=await s.read(r,o)}else if(i.httpPrefixHeaders!==void 0){a[e]={};for(let[t,o]of Object.entries(n.headers))if(t.startsWith(i.httpPrefixHeaders)){let n=r.getValueSchema();n.getMergedTraits().httpHeader=t,a[e][t.slice(i.httpPrefixHeaders.length)]=await s.read(n,o)}}else i.httpResponseCode?a[e]=n.statusCode:l.push(e)}return l.discardResponseBody=o,l}}})),Ni,Pi,Fi=o((()=>{V(),Ni=p(),Ze(),Oi(),Pi=class extends Di{async serializeRequest(e,t,n){let r=this.serializer,i={},a={},o=await n.endpoint(),s=z.of(e?.input),c=s.getSchema(),l,u=new Ni.HttpRequest({protocol:``,hostname:``,port:void 0,path:`/`,fragment:void 0,query:i,headers:a,body:void 0});o&&(this.updateServiceEndpoint(u,o),this.setHostPrefix(u,e,t));let d={...t};if(t){let e=s.getEventStreamMember();if(e){if(d[e]){let t={};for(let[n,i]of s.structIterator())n!==e&&d[n]&&(r.write(i,d[n]),t[n]=r.flush());l=await this.serializeEventStream({eventStream:d[e],requestSchema:s,initialRequest:t})}}else r.write(c,d),l=r.flush()}return u.headers=a,u.query=i,u.body=l,u.method=`POST`,u}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Xe(n.body,t);throw i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n)),Error(`@smithy/core/protocols - RPC Protocol error handler failed to throw.`)}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=i.getEventStreamMember();if(o)a[o]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:a});else{let e=await Xe(n.body,t);e.byteLength>0&&Object.assign(a,await r.read(i,e))}return a.$metadata=this.deserializeMetadata(n),a}}})),Ii,Li=o((()=>{$e(),Ii=(e,t,n,r,i,a)=>{if(t!=null&&t[n]!==void 0){let t=r();if(t.length<=0)throw Error(`Empty value provided for input HTTP label: `+n+`.`);e=e.replace(i,a?t.split(`/`).map(e=>Qe(e)).join(`/`):Qe(t))}else throw Error(`No value provided for input HTTP label: `+n+`.`);return e}}));function Ri(e,t){return new Bi(e,t)}var zi,Bi,Vi=o((()=>{zi=p(),Li(),Bi=class{input;context;query={};method=``;headers={};path=``;body=null;hostname=``;resolvePathStack=[];constructor(e,t){this.input=e,this.context=t}async build(){let{hostname:e,protocol:t=`https`,port:n,path:r}=await this.context.endpoint();this.path=r;for(let e of this.resolvePathStack)e(this.path);return new zi.HttpRequest({protocol:t,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith(`/`)?t.slice(0,-1):t||``}`+e}),this}p(e,t,n,r){return this.resolvePathStack.push(i=>{this.path=Ii(i,this.input,e,t,n,r)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}}));function Hi(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:n,httpPrefixHeaders:r,httpHeader:i,httpQuery:a}=e.getMergedTraits();return(t.httpBindings?typeof r==`string`||i?6:a||n?5:void 0:void 0)??t.timestampFormat.default}var Ui=o((()=>{})),Wi,Gi,Ki,qi=o((()=>{V(),vi(),Wi=De(),Gi=R(),bi(),Ui(),Ki=class extends yi{settings;constructor(e){super(),this.settings=e}read(e,t){let n=z.of(e);if(n.isListSchema())return di(t).map(e=>this.read(n.getValueSchema(),e));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Wi.fromBase64)(t);if(n.isTimestampSchema())switch(Hi(n,this.settings)){case 5:return oi(t);case 6:return si(t);case 7:return ai(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(n.isStringSchema()){let e=n.getMergedTraits().mediaType,r=t;if(e)return n.getMergedTraits().httpHeader&&(r=this.base64ToUtf8(r)),(e===`application/json`||e.endsWith(`+json`))&&(r=Wr.from(r)),r}return n.isNumericSchema()?Number(t):n.isBigIntegerSchema()?BigInt(t):n.isBigDecimalSchema()?new hi(t,`bigDecimal`):n.isBooleanSchema()?String(t).toLowerCase()===`true`:t}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??Gi.toUtf8)((this.serdeContext?.base64Decoder??Wi.fromBase64)(e))}}})),Ji,Yi,Xi=o((()=>{V(),Ji=R(),bi(),qi(),Yi=class extends yi{codecDeserializer;stringDeserializer;constructor(e,t){super(),this.codecDeserializer=e,this.stringDeserializer=new Ki(t)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,t){let n=z.of(e),r=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??Ji.toUtf8;if(r.httpHeader||r.httpResponseCode)return this.stringDeserializer.read(n,i(t));if(r.httpPayload){if(n.isBlobSchema()){let e=this.serdeContext?.utf8Decoder??Ji.fromUtf8;return typeof t==`string`?e(t):t}else if(n.isStringSchema())return`byteLength`in t?i(t):t}return this.codecDeserializer.read(n,t)}}})),Zi,Qi,$i=o((()=>{V(),vi(),Zi=De(),bi(),Ui(),Qi=class extends yi{settings;stringBuffer=``;constructor(e){super(),this.settings=e}write(e,t){let n=z.of(e);switch(typeof t){case`object`:if(t===null){this.stringBuffer=`null`;return}if(n.isTimestampSchema()){if(!(t instanceof Date))throw Error(`@smithy/core/protocols - received non-Date value ${t} when schema expected Date in ${n.getName(!0)}`);switch(Hi(n,this.settings)){case 5:this.stringBuffer=t.toISOString().replace(`.000Z`,`Z`);break;case 6:this.stringBuffer=An(t);break;case 7:this.stringBuffer=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using epoch seconds`,t),this.stringBuffer=String(t.getTime()/1e3)}return}if(n.isBlobSchema()&&`byteLength`in t){this.stringBuffer=(this.serdeContext?.base64Encoder??Zi.toBase64)(t);return}if(n.isListSchema()&&Array.isArray(t)){let e=``;for(let r of t){this.write([n.getValueSchema(),n.getMergedTraits()],r);let t=this.flush(),i=n.getValueSchema().isTimestampSchema()?t:Kr(t);e!==``&&(e+=`, `),e+=i}this.stringBuffer=e;return}this.stringBuffer=JSON.stringify(t,null,2);break;case`string`:let e=n.getMergedTraits().mediaType,r=t;if(e&&((e===`application/json`||e.endsWith(`+json`))&&(r=Wr.from(r)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Zi.toBase64)(r.toString());return}this.stringBuffer=t;break;default:n.isIdempotencyToken()?this.stringBuffer=(0,Hr.v4)():this.stringBuffer=String(t)}}flush(){let e=this.stringBuffer;return this.stringBuffer=``,e}}})),ea,ta=o((()=>{V(),$i(),ea=class{codecSerializer;stringSerializer;buffer;constructor(e,t,n=new Qi(t)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,t){let n=z.of(e),r=n.getMergedTraits();if(r.httpHeader||r.httpLabel||r.httpQuery){this.stringSerializer.write(n,t),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,t)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}})),na=c({FromStringShapeDeserializer:()=>Ki,HttpBindingProtocol:()=>ji,HttpInterceptingShapeDeserializer:()=>Yi,HttpInterceptingShapeSerializer:()=>ea,HttpProtocol:()=>Di,RequestBuilder:()=>Bi,RpcProtocol:()=>Pi,SerdeContext:()=>yi,ToStringShapeSerializer:()=>Qi,collectBody:()=>Xe,determineTimestampFormat:()=>Hi,extendedEncodeURIComponent:()=>Qe,requestBuilder:()=>Ri,resolvedPath:()=>Ii}),ra=o((()=>{Ze(),$e(),Mi(),Oi(),Fi(),Vi(),Li(),qi(),Xi(),ta(),$i(),Ui(),bi()})),ia=o((()=>{ra()}));function aa(e,t,n){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=n}var oa=o((()=>{})),sa,ca=o((()=>{sa=class{authSchemes=new Map;constructor(e){for(let[t,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(t,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}})),la,ua,da,fa=o((()=>{la=p(),ua=f(),da=class{async sign(e,t,n){if(!n)throw Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!t.apiKey)throw Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let r=la.HttpRequest.clone(e);if(n.in===ua.HttpApiKeyAuthLocation.QUERY)r.query[n.name]=t.apiKey;else if(n.in===ua.HttpApiKeyAuthLocation.HEADER)r.headers[n.name]=n.scheme?`${n.scheme} ${t.apiKey}`:t.apiKey;else throw Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return r}}})),pa,ma,ha=o((()=>{pa=p(),ma=class{async sign(e,t,n){let r=pa.HttpRequest.clone(e);if(!t.token)throw Error("request could not be signed with `token` since the `token` is not defined");return r.headers.Authorization=`Bearer ${t.token}`,r}}})),ga,_a=o((()=>{ga=class{async sign(e,t,n){return e}}})),va=o((()=>{fa(),ha(),_a()})),ya,ba,xa,Sa,Ca,wa=o((()=>{ya=e=>function(t){return Sa(t)&&t.expiration.getTime()-Date.now()<e},ba=3e5,xa=ya(ba),Sa=e=>e.expiration!==void 0,Ca=(e,t,n)=>{if(e===void 0)return;let r=typeof e==`function`?e:async()=>Promise.resolve(e),i,a,o,s=!1,c=async e=>{a||=r(e);try{i=await a,o=!0,s=!1}finally{a=void 0}return i};return t===void 0?async e=>((!o||e?.forceRefresh)&&(i=await c(e)),i):async e=>((!o||e?.forceRefresh)&&(i=await c(e)),s?i:n(i)?(t(i)&&await c(e),i):(s=!0,i))}})),Ta=o((()=>{ca(),va(),wa()})),Ea=c({DefaultIdentityProviderConfig:()=>sa,EXPIRATION_MS:()=>ba,HttpApiKeyAuthSigner:()=>da,HttpBearerAuthSigner:()=>ma,NoAuthSigner:()=>ga,createIsIdentityExpiredFunction:()=>ya,createPaginator:()=>ye,doesIdentityRequireRefresh:()=>Sa,getHttpAuthSchemeEndpointRuleSetPlugin:()=>re,getHttpAuthSchemePlugin:()=>oe,getHttpSigningPlugin:()=>me,getSmithyContext:()=>D,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>ne,httpAuthSchemeMiddleware:()=>ee,httpAuthSchemeMiddlewareOptions:()=>F,httpSigningMiddleware:()=>L,httpSigningMiddlewareOptions:()=>pe,isIdentityExpired:()=>xa,memoizeIdentityProvider:()=>Ca,normalizeProvider:()=>_e,requestBuilder:()=>Ri,setFeature:()=>aa}),Da=o((()=>{O(),ce(),ge(),ve(),Se(),ia(),oa(),Ta()})),Oa=s((e=>{var t=f(),n=class{capacity;data=new Map;parameters=[];constructor({size:e,params:t}){this.capacity=e??50,t&&(this.parameters=t)}get(e,t){let n=this.hash(e);if(n===!1)return t();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let e=this.data.keys(),t=0;for(;;){let{value:n,done:r}=e.next();if(this.data.delete(n),r||++t>10)break}}this.data.set(n,t())}return this.data.get(n)}size(){return this.data.size}hash(e){let t=``,{parameters:n}=this;if(n.length===0)return!1;for(let r of n){let n=String(e[r]??``);if(n.includes(`|;`))return!1;t+=n+`|;`}return t}};let r=RegExp(`^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$`),i=e=>r.test(e)||e.startsWith(`[`)&&e.endsWith(`]`),a=RegExp(`^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$`),o=(e,t=!1)=>{if(!t)return a.test(e);let n=e.split(`.`);for(let e of n)if(!o(e))return!1;return!0},s={},c=`endpoints`;function l(e){return typeof e!=`object`||!e?e:`ref`in e?`$${l(e.ref)}`:`fn`in e?`${e.fn}(${(e.argv||[]).map(l).join(`, `)})`:JSON.stringify(e,null,2)}var u=class extends Error{constructor(e){super(e),this.name=`EndpointError`}};let d=(e,t)=>e===t,p=e=>{let t=e.split(`.`),n=[];for(let r of t){let t=r.indexOf(`[`);if(t!==-1){if(r.indexOf(`]`)!==r.length-1)throw new u(`Path: '${e}' does not end with ']'`);let i=r.slice(t+1,-1);if(Number.isNaN(parseInt(i)))throw new u(`Invalid array index: '${i}' in path: '${e}'`);t!==0&&n.push(r.slice(0,t)),n.push(i)}else n.push(r)}return n},m=(e,t)=>p(t).reduce((n,r)=>{if(typeof n!=`object`)throw new u(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),h=e=>e!=null,g=e=>!e,_={[t.EndpointURLScheme.HTTP]:80,[t.EndpointURLScheme.HTTPS]:443},v={booleanEquals:d,getAttr:m,isSet:h,isValidHostLabel:o,not:g,parseURL:e=>{let n=(()=>{try{if(e instanceof URL)return e;if(typeof e==`object`&&`hostname`in e){let{hostname:t,port:n,protocol:r=``,path:i=``,query:a={}}=e,o=new URL(`${r}//${t}${n?`:${n}`:``}${i}`);return o.search=Object.entries(a).map(([e,t])=>`${e}=${t}`).join(`&`),o}return new URL(e)}catch{return null}})();if(!n)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=n.href,{host:a,hostname:o,pathname:s,protocol:c,search:l}=n;if(l)return null;let u=c.slice(0,-1);if(!Object.values(t.EndpointURLScheme).includes(u))return null;let d=i(o);return{scheme:u,authority:`${a}${r.includes(`${a}:${_[u]}`)||typeof e==`string`&&e.includes(`${a}:${_[u]}`)?`:${_[u]}`:``}`,path:s,normalizedPath:s.endsWith(`/`)?s:`${s}/`,isIp:d}},stringEquals:(e,t)=>e===t,substring:(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),uriEncode:e=>encodeURIComponent(e).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},y=(e,t)=>{let n=[],r={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let t=e.indexOf(`{`,i);if(t===-1){n.push(e.slice(i));break}n.push(e.slice(i,t));let a=e.indexOf(`}`,t);if(a===-1){n.push(e.slice(t));break}e[t+1]===`{`&&e[a+1]===`}`&&(n.push(e.slice(t+1,a)),i=a+2);let o=e.substring(t+1,a);if(o.includes(`#`)){let[e,t]=o.split(`#`);n.push(m(r[e],t))}else n.push(r[o]);i=a+1}return n.join(``)},b=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],x=(e,t,n)=>{if(typeof e==`string`)return y(e,n);if(e.fn)return C.callFunction(e,n);if(e.ref)return b(e,n);throw new u(`'${t}': ${String(e)} is not a string, function or reference.`)},S=({fn:e,argv:t},n)=>{let r=t.map(e=>[`boolean`,`number`].includes(typeof e)?e:C.evaluateExpression(e,`arg`,n)),i=e.split(`.`);return i[0]in s&&i[1]!=null?s[i[0]][i[1]](...r):v[e](...r)},C={evaluateExpression:x,callFunction:S},w=({assign:e,...t},n)=>{if(e&&e in n.referenceRecord)throw new u(`'${e}' is already defined in Reference Record.`);let r=S(t,n);return n.logger?.debug?.(`${c} evaluateCondition: ${l(t)} = ${l(r)}`),{result:r===``?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},T=(e=[],t)=>{let n={};for(let r of e){let{result:e,toAssign:i}=w(r,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!e)return{result:e};i&&(n[i.name]=i.value,t.logger?.debug?.(`${c} assign: ${i.name} := ${l(i.value)}`))}return{result:!0,referenceRecord:n}},E=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:r.map(e=>{let r=x(e,`Header value entry`,t);if(typeof r!=`string`)throw new u(`Header '${n}' value '${r}' is not a string`);return r})}),{}),D=(e,t)=>Object.entries(e).reduce((e,[n,r])=>({...e,[n]:k.getEndpointProperty(r,t)}),{}),O=(e,t)=>{if(Array.isArray(e))return e.map(e=>O(e,t));switch(typeof e){case`string`:return y(e,t);case`object`:if(e===null)throw new u(`Unexpected endpoint property: ${e}`);return k.getEndpointProperties(e,t);case`boolean`:return e;default:throw new u(`Unexpected endpoint property type: ${typeof e}`)}},k={getEndpointProperty:O,getEndpointProperties:D},A=(e,t)=>{let n=x(e,`Endpoint URL`,t);if(typeof n==`string`)try{return new URL(n)}catch(e){throw console.error(`Failed to construct URL with ${n}`,e),e}throw new u(`Endpoint URL must be a string, got ${typeof n}`)},j=(e,t)=>{let{conditions:n,endpoint:r}=e,{result:i,referenceRecord:a}=T(n,t);if(!i)return;let o={...t,referenceRecord:{...t.referenceRecord,...a}},{url:s,properties:u,headers:d}=r;return t.logger?.debug?.(`${c} Resolving endpoint from template: ${l(r)}`),{...d!=null&&{headers:E(d,o)},...u!=null&&{properties:D(u,o)},url:A(s,o)}},M=(e,t)=>{let{conditions:n,error:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)throw new u(x(r,`Error`,{...t,referenceRecord:{...t.referenceRecord,...a}}))},N=(e,t)=>{for(let n of e)if(n.type===`endpoint`){let e=j(n,t);if(e)return e}else if(n.type===`error`)M(n,t);else if(n.type===`tree`){let e=ee.evaluateTreeRule(n,t);if(e)return e}else throw new u(`Unknown endpoint rule: ${n}`);throw new u(`Rules evaluation failed`)},ee={evaluateRules:N,evaluateTreeRule:(e,t)=>{let{conditions:n,rules:r}=e,{result:i,referenceRecord:a}=T(n,t);if(i)return ee.evaluateRules(r,{...t,referenceRecord:{...t.referenceRecord,...a}})}};e.EndpointCache=n,e.EndpointError=u,e.customEndpointFunctions=s,e.isIpAddress=i,e.isValidHostLabel=o,e.resolveEndpoint=(e,t)=>{let{endpointParams:n,logger:r}=t,{parameters:i,rules:a}=e;t.logger?.debug?.(`${c} Initial EndpointParams: ${l(n)}`);let o=Object.entries(i).filter(([,e])=>e.default!=null).map(([e,t])=>[e,t.default]);if(o.length>0)for(let[e,t]of o)n[e]=n[e]??t;let s=Object.entries(i).filter(([,e])=>e.required).map(([e])=>e);for(let e of s)if(n[e]==null)throw new u(`Missing required parameter: '${e}'`);let d=N(a,{endpointParams:n,logger:r,referenceRecord:{}});return t.logger?.debug?.(`${c} Resolved endpoint: ${l(d)}`),d}})),ka=s((e=>{function t(e){let t={};if(e=e.replace(/^\?/,``),e)for(let n of e.split(`&`)){let[e,r=null]=n.split(`=`);e=decodeURIComponent(e),r&&=decodeURIComponent(r),e in t?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:t[e]=r}return t}e.parseQueryString=t})),Aa=s((e=>{var t=ka();let n=e=>{if(typeof e==`string`)return n(new URL(e));let{hostname:r,pathname:i,port:a,protocol:o,search:s}=e,c;return s&&(c=t.parseQueryString(s)),{hostname:r,port:a?parseInt(a):void 0,protocol:o,path:i,query:c}};e.parseUrl=n})),ja=s((e=>{var t=Oa(),n=Aa();let r=(e,n=!1)=>{if(n){for(let t of e.split(`.`))if(!r(t))return!1;return!0}return!(!t.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||t.isIpAddress(e))},i=e=>{let t=e.split(`:`);if(t.length<6)return null;let[n,r,i,a,o,...s]=t;return n!==`arn`||r===``||i===``||s.join(`:`)===``?null:{partition:r,service:i,region:a,accountId:o,resourceId:s.map(e=>e.split(`/`)).flat()}};var a={partitions:[{id:`aws`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-east-1`,name:`aws`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$`,regions:{"af-south-1":{description:`Africa (Cape Town)`},"ap-east-1":{description:`Asia Pacific (Hong Kong)`},"ap-east-2":{description:`Asia Pacific (Taipei)`},"ap-northeast-1":{description:`Asia Pacific (Tokyo)`},"ap-northeast-2":{description:`Asia Pacific (Seoul)`},"ap-northeast-3":{description:`Asia Pacific (Osaka)`},"ap-south-1":{description:`Asia Pacific (Mumbai)`},"ap-south-2":{description:`Asia Pacific (Hyderabad)`},"ap-southeast-1":{description:`Asia Pacific (Singapore)`},"ap-southeast-2":{description:`Asia Pacific (Sydney)`},"ap-southeast-3":{description:`Asia Pacific (Jakarta)`},"ap-southeast-4":{description:`Asia Pacific (Melbourne)`},"ap-southeast-5":{description:`Asia Pacific (Malaysia)`},"ap-southeast-6":{description:`Asia Pacific (New Zealand)`},"ap-southeast-7":{description:`Asia Pacific (Thailand)`},"aws-global":{description:`aws global region`},"ca-central-1":{description:`Canada (Central)`},"ca-west-1":{description:`Canada West (Calgary)`},"eu-central-1":{description:`Europe (Frankfurt)`},"eu-central-2":{description:`Europe (Zurich)`},"eu-north-1":{description:`Europe (Stockholm)`},"eu-south-1":{description:`Europe (Milan)`},"eu-south-2":{description:`Europe (Spain)`},"eu-west-1":{description:`Europe (Ireland)`},"eu-west-2":{description:`Europe (London)`},"eu-west-3":{description:`Europe (Paris)`},"il-central-1":{description:`Israel (Tel Aviv)`},"me-central-1":{description:`Middle East (UAE)`},"me-south-1":{description:`Middle East (Bahrain)`},"mx-central-1":{description:`Mexico (Central)`},"sa-east-1":{description:`South America (Sao Paulo)`},"us-east-1":{description:`US East (N. Virginia)`},"us-east-2":{description:`US East (Ohio)`},"us-west-1":{description:`US West (N. California)`},"us-west-2":{description:`US West (Oregon)`}}},{id:`aws-cn`,outputs:{dnsSuffix:`amazonaws.com.cn`,dualStackDnsSuffix:`api.amazonwebservices.com.cn`,implicitGlobalRegion:`cn-northwest-1`,name:`aws-cn`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^cn\\-\\w+\\-\\d+$`,regions:{"aws-cn-global":{description:`aws-cn global region`},"cn-north-1":{description:`China (Beijing)`},"cn-northwest-1":{description:`China (Ningxia)`}}},{id:`aws-eusc`,outputs:{dnsSuffix:`amazonaws.eu`,dualStackDnsSuffix:`api.amazonwebservices.eu`,implicitGlobalRegion:`eusc-de-east-1`,name:`aws-eusc`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eusc\\-(de)\\-\\w+\\-\\d+$`,regions:{"eusc-de-east-1":{description:`EU (Germany)`}}},{id:`aws-iso`,outputs:{dnsSuffix:`c2s.ic.gov`,dualStackDnsSuffix:`api.aws.ic.gov`,implicitGlobalRegion:`us-iso-east-1`,name:`aws-iso`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-iso\\-\\w+\\-\\d+$`,regions:{"aws-iso-global":{description:`aws-iso global region`},"us-iso-east-1":{description:`US ISO East`},"us-iso-west-1":{description:`US ISO WEST`}}},{id:`aws-iso-b`,outputs:{dnsSuffix:`sc2s.sgov.gov`,dualStackDnsSuffix:`api.aws.scloud`,implicitGlobalRegion:`us-isob-east-1`,name:`aws-iso-b`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isob\\-\\w+\\-\\d+$`,regions:{"aws-iso-b-global":{description:`aws-iso-b global region`},"us-isob-east-1":{description:`US ISOB East (Ohio)`},"us-isob-west-1":{description:`US ISOB West`}}},{id:`aws-iso-e`,outputs:{dnsSuffix:`cloud.adc-e.uk`,dualStackDnsSuffix:`api.cloud-aws.adc-e.uk`,implicitGlobalRegion:`eu-isoe-west-1`,name:`aws-iso-e`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^eu\\-isoe\\-\\w+\\-\\d+$`,regions:{"aws-iso-e-global":{description:`aws-iso-e global region`},"eu-isoe-west-1":{description:`EU ISOE West`}}},{id:`aws-iso-f`,outputs:{dnsSuffix:`csp.hci.ic.gov`,dualStackDnsSuffix:`api.aws.hci.ic.gov`,implicitGlobalRegion:`us-isof-south-1`,name:`aws-iso-f`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-isof\\-\\w+\\-\\d+$`,regions:{"aws-iso-f-global":{description:`aws-iso-f global region`},"us-isof-east-1":{description:`US ISOF EAST`},"us-isof-south-1":{description:`US ISOF SOUTH`}}},{id:`aws-us-gov`,outputs:{dnsSuffix:`amazonaws.com`,dualStackDnsSuffix:`api.aws`,implicitGlobalRegion:`us-gov-west-1`,name:`aws-us-gov`,supportsDualStack:!0,supportsFIPS:!0},regionRegex:`^us\\-gov\\-\\w+\\-\\d+$`,regions:{"aws-us-gov-global":{description:`aws-us-gov global region`},"us-gov-east-1":{description:`AWS GovCloud (US-East)`},"us-gov-west-1":{description:`AWS GovCloud (US-West)`}}}],version:`1.1`};let o=a,s=``,c=e=>{let{partitions:t}=o;for(let n of t){let{regions:t,outputs:r}=n;for(let[n,i]of Object.entries(t))if(n===e)return{...r,...i}}for(let n of t){let{regionRegex:t,outputs:r}=n;if(new RegExp(t).test(e))return{...r}}let n=t.find(e=>e.id===`aws`);if(!n)throw Error(`Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.`);return{...n.outputs}},l=(e,t=``)=>{o=e,s=t},u=()=>{l(a,``)},d=()=>s,f={isVirtualHostableS3Bucket:r,parseArn:i,partition:c};t.customEndpointFunctions.aws=f;let p=e=>{if(typeof e.endpointProvider!=`function`)throw Error(`@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.`);let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>m(e.endpointProvider({Region:typeof e.region==`function`?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint==`function`?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint==`function`?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},m=e=>n.parseUrl(e.url);Object.defineProperty(e,`EndpointError`,{enumerable:!0,get:function(){return t.EndpointError}}),Object.defineProperty(e,`isIpAddress`,{enumerable:!0,get:function(){return t.isIpAddress}}),Object.defineProperty(e,`resolveEndpoint`,{enumerable:!0,get:function(){return t.resolveEndpoint}}),e.awsEndpointFunctions=f,e.getUserAgentPrefix=d,e.partition=c,e.resolveDefaultAwsRegionalEndpointsConfig=p,e.setPartitionInfo=l,e.toEndpointV1=m,e.useDefaultPartitionInfo=u})),Ma,Na,Pa=o((()=>{Ma={warningEmitted:!1},Na=e=>{e&&!Ma.warningEmitted&&parseInt(e.substring(1,e.indexOf(`.`)))<18&&(Ma.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}}));function Fa(e,t,n){return e.$source||={},e.$source[t]=n,e}var Ia=o((()=>{}));function La(e,t,n){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=n}var Ra=o((()=>{}));function za(e,t,n){return e.$source||={},e.$source[t]=n,e}var Ba=o((()=>{})),Va=c({emitWarningIfUnsupportedVersion:()=>Na,setCredentialFeature:()=>Fa,setFeature:()=>La,setTokenFeature:()=>za,state:()=>Ma}),Ha=o((()=>{Pa(),Ia(),Ra(),Ba()})),Ua,Wa,Ga=o((()=>{Ua=p(),Wa=e=>Ua.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0})),Ka,qa=o((()=>{Ka=e=>new Date(Date.now()+e)})),Ja,Ya=o((()=>{qa(),Ja=(e,t)=>Math.abs(Ka(t).getTime()-e)>=3e5})),Xa,Za=o((()=>{Ya(),Xa=(e,t)=>{let n=Date.parse(e);return Ja(n,t)?n-Date.now():t}})),Qa=o((()=>{Ga(),qa(),Za()})),$a,eo,to,no,ro,io=o((()=>{$a=p(),Qa(),eo=(e,t)=>{if(!t)throw Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},to=async e=>{let t=eo(`context`,e.context),n=eo(`config`,e.config),r=t.endpointV2?.properties?.authSchemes?.[0];return{config:n,signer:await eo(`signer`,n.signer)(r),signingRegion:e?.signingRegion,signingRegionSet:e?.signingRegionSet,signingName:e?.signingName}},no=class{async sign(e,t,n){if(!$a.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let r=await to(n),{config:i,signer:a}=r,{signingRegion:o,signingName:s}=r,c=n.context;if(c?.authSchemes?.length??!1){let[e,t]=c.authSchemes;e?.name===`sigv4a`&&t?.name===`sigv4`&&(o=t?.signingRegion??o,s=t?.signingName??s)}return await a.sign(e,{signingDate:Ka(i.systemClockOffset),signingRegion:o,signingService:s})}errorHandler(e){return t=>{let n=t.ServerTime??Wa(t.$response);if(n){let r=eo(`config`,e.config),i=r.systemClockOffset;r.systemClockOffset=Xa(n,r.systemClockOffset),r.systemClockOffset!==i&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){let n=Wa(e);if(n){let e=eo(`config`,t.config);e.systemClockOffset=Xa(n,e.systemClockOffset)}}},ro=no})),ao,oo,so=o((()=>{ao=p(),Qa(),io(),oo=class extends no{async sign(e,t,n){if(!ao.HttpRequest.isInstance(e))throw Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:r,signer:i,signingRegion:a,signingRegionSet:o,signingName:s}=await to(n),c=(await r.sigv4aSigningRegionSet?.()??o??[a]).join(`,`);return await i.sign(e,{signingDate:Ka(r.systemClockOffset),signingRegion:c,signingService:s})}}})),co,lo=o((()=>{co=e=>typeof e==`string`&&e.length>0?e.split(`,`).map(e=>e.trim()):[]})),uo,fo=o((()=>{uo=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,`_`).toUpperCase()}`})),po,mo,ho,go=o((()=>{lo(),fo(),po=`AWS_AUTH_SCHEME_PREFERENCE`,mo=`auth_scheme_preference`,ho={environmentVariableSelector:(e,t)=>{if(t?.signingName&&uo(t.signingName)in e)return[`httpBearerAuth`];if(po in e)return co(e[po])},configFileSelector:e=>{if(mo in e)return co(e[mo])},default:[]}})),_o=s((e=>{var t=class e extends Error{name=`ProviderError`;tryNextLink;constructor(t,n=!0){let r,i=!0;typeof n==`boolean`?(r=void 0,i=n):typeof n==`object`&&n&&(r=n.logger,i=n.tryNextLink??!0),super(t),this.tryNextLink=i,Object.setPrototypeOf(this,e.prototype),r?.debug?.(`@smithy/property-provider ${i?`->`:`(!)`} ${t}`)}static from(e,t=!0){return Object.assign(new this(e.message,t),e)}},n=class e extends t{name=`CredentialsProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}},r=class e extends t{name=`TokenProviderError`;constructor(t,n=!0){super(t,n),Object.setPrototypeOf(this,e.prototype)}};e.CredentialsProviderError=n,e.ProviderError=t,e.TokenProviderError=r,e.chain=(...e)=>async()=>{if(e.length===0)throw new t(`No providers in chain`);let n;for(let t of e)try{return await t()}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},e.fromStatic=e=>()=>Promise.resolve(e),e.memoize=(e,t,n)=>{let r,i,a,o=!1,s=async()=>{i||=e();try{r=await i,a=!0,o=!1}finally{i=void 0}return r};return t===void 0?async e=>((!a||e?.forceRefresh)&&(r=await s()),r):async e=>((!a||e?.forceRefresh)&&(r=await s()),o?r:n&&!n(r)?(o=!0,r):(t(r)&&await s(),r))}})),vo,yo,bo,xo=o((()=>{Da(),vo=_o(),yo=e=>(e.sigv4aSigningRegionSet=_e(e.sigv4aSigningRegionSet),e),bo={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(`,`).map(e=>e.trim());throw new vo.ProviderError(`AWS_SIGV4A_SIGNING_REGION_SET not set in env.`,{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??``).split(`,`).map(e=>e.trim());throw new vo.ProviderError(`sigv4a_signing_region_set not set in profile.`,{tryNextLink:!0})},default:void 0}})),So=s((e=>{var t=Ue(),n=R(),r=Ce(),i=p(),a=k(),o=ze();let s=`authorization`,c=`x-amz-date`,l=[s,c,`date`],u=`x-amz-content-sha256`,d={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},f=/^proxy-/,m=/^sec-/,h=`AWS4-HMAC-SHA256`,g=`aws4_request`,_={},v=[],y=(e,t,n)=>`${e}/${t}/${n}/${g}`,b=async(e,n,r,i,a)=>{let o=await x(e,n.secretAccessKey,n.accessKeyId),s=`${r}:${i}:${a}:${t.toHex(o)}:${n.sessionToken}`;if(s in _)return _[s];for(v.push(s);v.length>50;)delete _[v.shift()];let c=`AWS4${n.secretAccessKey}`;for(let t of[r,i,a,g])c=await x(e,c,t);return _[s]=c},x=(e,t,r)=>{let i=new e(t);return i.update(n.toUint8Array(r)),i.digest()},S=({headers:e},t,n)=>{let r={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let a=i.toLowerCase();(a in d||t?.has(a)||f.test(a)||m.test(a))&&(!n||n&&!n.has(a))||(r[a]=e[i].trim().replace(/\s+/g,` `))}return r},C=async({headers:e,body:i},a)=>{for(let t of Object.keys(e))if(t.toLowerCase()===u)return e[t];if(i==null)return`e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855`;if(typeof i==`string`||ArrayBuffer.isView(i)||r.isArrayBuffer(i)){let e=new a;return e.update(n.toUint8Array(i)),t.toHex(await e.digest())}return`UNSIGNED-PAYLOAD`};var w=class{format(e){let t=[];for(let r of Object.keys(e)){let i=n.fromUtf8(r);t.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(e[r]))}let r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0)),i=0;for(let e of t)r.set(e,i),i+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case`boolean`:return Uint8Array.from([e.value?0:1]);case`byte`:return Uint8Array.from([2,e.value]);case`short`:let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case`integer`:let i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,e.value,!1),new Uint8Array(i.buffer);case`long`:let a=new Uint8Array(9);return a[0]=5,a.set(e.value.bytes,1),a;case`binary`:let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case`string`:let c=n.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+c.byteLength));l.setUint8(0,7),l.setUint16(1,c.byteLength,!1);let u=new Uint8Array(l.buffer);return u.set(c,3),u;case`timestamp`:let d=new Uint8Array(9);return d[0]=8,d.set(E.fromNumber(e.value.valueOf()).bytes,1),d;case`uuid`:if(!T.test(e.value))throw Error(`Invalid UUID received: ${e.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(t.fromHex(e.value.replace(/\-/g,``)),1),f}}};let T=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var E=class e{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw Error(`Int64 buffers must be exactly 8 bytes`)}static fromNumber(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let n=new Uint8Array(8);for(let e=7,r=Math.abs(Math.round(t));e>-1&&r>0;e--,r/=256)n[e]=r;return t<0&&D(n),new e(n)}valueOf(){let e=this.bytes.slice(0),n=e[0]&128;return n&&D(e),parseInt(t.toHex(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function D(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}let O=(e,t)=>{e=e.toLowerCase();for(let n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},A=(e,t={})=>{let{headers:n,query:r={}}=i.HttpRequest.clone(e);for(let e of Object.keys(n)){let i=e.toLowerCase();(i.slice(0,6)===`x-amz-`&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(r[e]=n[e],delete n[e])}return{...e,headers:n,query:r}},j=e=>{e=i.HttpRequest.clone(e);for(let t of Object.keys(e.headers))l.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},M=({query:e={}})=>{let t=[],n={};for(let r of Object.keys(e)){if(r.toLowerCase()===`x-amz-signature`)continue;let i=o.escapeUri(r);t.push(i);let a=e[r];typeof a==`string`?n[i]=`${i}=${o.escapeUri(a)}`:Array.isArray(a)&&(n[i]=a.slice(0).reduce((e,t)=>e.concat([`${i}=${o.escapeUri(t)}`]),[]).sort().join(`&`))}return t.sort().map(e=>n[e]).filter(e=>e).join(`&`)},N=e=>ee(e).toISOString().replace(/\.\d{3}Z$/,`Z`),ee=e=>typeof e==`number`?new Date(e*1e3):typeof e==`string`?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var te=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:o=!0}){this.service=r,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e==`boolean`?e:!0,this.regionProvider=a.normalizeProvider(n),this.credentialProvider=a.normalizeProvider(t)}createCanonicalRequest(e,t,n){let r=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${M(e)}
${r.map(e=>`${e}:${t[e]}`).join(`
`)}

${r.join(`;`)}
${n}`}async createStringToSign(e,r,i,a){let o=new this.sha256;o.update(n.toUint8Array(i));let s=await o.digest();return`${a}
${e}
${r}
${t.toHex(s)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let t=[];for(let n of e.split(`/`))n?.length!==0&&n!==`.`&&(n===`..`?t.pop():t.push(n));let n=`${e?.startsWith(`/`)?`/`:``}${t.join(`/`)}${t.length>0&&e?.endsWith(`/`)?`/`:``}`;return o.escapeUri(n).replace(/%2F/g,`/`)}return e}validateResolvedCredentials(e){if(typeof e!=`object`||typeof e.accessKeyId!=`string`||typeof e.secretAccessKey!=`string`)throw Error(`Resolved credential object is not valid`)}formatDate(e){let t=N(e).replace(/[\-:]/g,``);return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(`;`)}};e.SignatureV4=class extends te{headerFormatter=new w;constructor({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:t,region:n,service:r,sha256:i,uriEscapePath:a})}async presign(e,t={}){let{signingDate:n=new Date,expiresIn:r=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:s,signingRegion:c,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);let d=c??await this.regionProvider(),{longDate:f,shortDate:p}=this.formatDate(n);if(r>604800)return Promise.reject(`Signature version 4 presigned URLs must have an expiration date less than one week in the future`);let m=y(p,d,l??this.service),g=A(j(e),{unhoistableHeaders:a,hoistableHeaders:s});u.sessionToken&&(g.query[`X-Amz-Security-Token`]=u.sessionToken),g.query[`X-Amz-Algorithm`]=h,g.query[`X-Amz-Credential`]=`${u.accessKeyId}/${m}`,g.query[`X-Amz-Date`]=f,g.query[`X-Amz-Expires`]=r.toString(10);let _=S(g,i,o);return g.query[`X-Amz-SignedHeaders`]=this.getCanonicalHeaderList(_),g.query[`X-Amz-Signature`]=await this.getSignature(f,m,this.getSigningKey(u,d,p,l),this.createCanonicalRequest(g,_,await C(e,this.sha256))),g}async sign(e,t){return typeof e==`string`?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:i,signingRegion:a,signingService:o}){let s=a??await this.regionProvider(),{shortDate:c,longDate:l}=this.formatDate(r),u=y(c,s,o??this.service),d=await C({headers:{},body:n},this.sha256),f=new this.sha256;f.update(e);let p=[`AWS4-HMAC-SHA256-PAYLOAD`,l,u,i,t.toHex(await f.digest()),d].join(`
`);return this.signString(p,{signingDate:r,signingRegion:s,signingService:o})}async signMessage(e,{signingDate:t=new Date,signingRegion:n,signingService:r}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:n,signingService:r,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:r=new Date,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=i??await this.regionProvider(),{shortDate:c}=this.formatDate(r),l=new this.sha256(await this.getSigningKey(o,s,c,a));return l.update(n.toUint8Array(e)),t.toHex(await l.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:n,unsignableHeaders:r,signingRegion:i,signingService:a}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let l=i??await this.regionProvider(),d=j(e),{longDate:f,shortDate:p}=this.formatDate(t),m=y(p,l,a??this.service);d.headers[c]=f,o.sessionToken&&(d.headers[`x-amz-security-token`]=o.sessionToken);let g=await C(d,this.sha256);!O(u,d.headers)&&this.applyChecksum&&(d.headers[u]=g);let _=S(d,r,n),v=await this.getSignature(f,m,this.getSigningKey(o,l,p,a),this.createCanonicalRequest(d,_,g));return d.headers[s]=`${h} Credential=${o.accessKeyId}/${m}, SignedHeaders=${this.getCanonicalHeaderList(_)}, Signature=${v}`,d}async getSignature(e,r,i,a){let o=await this.createStringToSign(e,r,a,h),s=new this.sha256(await i);return s.update(n.toUint8Array(o)),t.toHex(await s.digest())}getSigningKey(e,t,n,r){return b(this.sha256,e,n,t,r||this.service)}}}));function Co(e,{credentials:t,credentialDefaultProvider:n}){let r;return r=t?t?.memoized?t:Ca(t,xa,Sa):n?_e(n(Object.assign({},e,{parentClientConfig:e}))):async()=>{throw Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function wo(e,t){if(t.configBound)return t;let n=async n=>t({...n,callerClientConfig:e});return n.memoized=t.memoized,n.configBound=!0,n}var To,Eo,Do,Oo=o((()=>{Ha(),Da(),To=So(),Eo=e=>{let t=e.credentials,n=!!e.credentials,r;Object.defineProperty(e,`credentials`,{set(i){i&&i!==t&&i!==r&&(n=!0),t=i;let a=wo(e,Co(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}));n&&!a.attributed?(r=async e=>a(e).then(e=>Fa(e,`CREDENTIALS_CODE`,`e`)),r.memoized=a.memoized,r.configBound=a.configBound,r.attributed=!0):r=a},get(){return r},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:i=!0,systemClockOffset:a=e.systemClockOffset||0,sha256:o}=e,s;return s=e.signer?_e(e.signer):e.regionInfoProvider?()=>_e(e.region)().then(async t=>[await e.regionInfoProvider(t,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},t]).then(([t,n])=>{let{signingRegion:r,signingService:a}=t;e.signingRegion=e.signingRegion||r||n,e.signingName=e.signingName||a||e.serviceId;let s={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||To.SignatureV4)(s)}):async t=>{t=Object.assign({},{name:`sigv4`,signingName:e.signingName||e.defaultSigningName,signingRegion:await _e(e.region)(),properties:{}},t);let n=t.signingRegion,r=t.signingName;e.signingRegion=e.signingRegion||n,e.signingName=e.signingName||r||e.serviceId;let a={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:i};return new(e.signerConstructor||To.SignatureV4)(a)},Object.assign(e,{systemClockOffset:a,signingEscapePath:i,signer:s})},Do=Eo})),ko=o((()=>{io(),so(),go(),xo(),Oo()})),Ao=c({AWSSDKSigV4Signer:()=>ro,AwsSdkSigV4ASigner:()=>oo,AwsSdkSigV4Signer:()=>no,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ho,NODE_SIGV4A_CONFIG_OPTIONS:()=>bo,getBearerTokenEnvKey:()=>uo,resolveAWSSDKSigV4Config:()=>Do,resolveAwsSdkSigV4AConfig:()=>yo,resolveAwsSdkSigV4Config:()=>Eo,validateSigningProperties:()=>to}),jo=o((()=>{ko(),fo()}));function Mo(e){return typeof Buffer<`u`?Buffer.alloc(e):new Uint8Array(e)}function No(e){return e[Zo]=!0,e}var Po,Fo,Io,Lo,Ro,zo,Bo,Vo,Ho,Uo,Wo,Go,Ko,qo,Jo,Yo,Xo,Zo,Qo=o((()=>{Po=0,Fo=1,Io=2,Lo=3,Ro=4,zo=5,Bo=6,Vo=7,Ho=20,Uo=21,Wo=22,Go=23,Ko=24,qo=25,Jo=26,Yo=27,Xo=31,Zo=Symbol(`@smithy/core/cbor::tagSymbol`)}));function $o(e){H=e,vs=new DataView(H.buffer,H.byteOffset,H.byteLength)}function es(e,t){if(e>=t)throw Error(`unexpected end of (decode) payload.`);let n=(H[e]&224)>>5,r=H[e]&31;switch(n){case Po:case Fo:case Bo:let i,a;if(r<24)i=r,a=1;else switch(r){case Ko:case qo:case Jo:case Yo:let n=bs[r],o=n+1;if(a=o,t-e<o)throw Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;i=n===1?H[s]:n===2?vs.getUint16(s):n===4?vs.getUint32(s):vs.getBigUint64(s);break;default:throw Error(`unexpected minor value ${r}.`)}if(n===Po)return U=a,ms(i);if(n===Fo){let e;return e=typeof i==`bigint`?BigInt(-1)-i:-1-i,U=a,ms(e)}else if(r===2||r===3){let n=is(e+a,t),i=BigInt(0),o=e+a+U;for(let e=o;e<o+n;++e)i=i<<BigInt(8)|BigInt(H[e]);return U=a+U+n,r===3?-i-BigInt(1):i}else if(r===4){let[n,r]=es(e+a,t),i=r<0?-1:1,o=`0`.repeat(Math.abs(n)+1)+String(BigInt(i)*BigInt(r)),s,c=r<0?`-`:``;return s=n===0?o:o.slice(0,o.length+n)+`.`+o.slice(n),s=s.replace(/^0+/g,``),s===``&&(s=`0`),s[0]===`.`&&(s=`0`+s),s=c+s,U=a+U,pi(s)}else{let n=es(e+a,t);return U=a+U,No({tag:ms(i),value:n})}case Lo:case zo:case Ro:case Io:if(r===Xo)switch(n){case Lo:return os(e,t);case zo:return fs(e,t);case Ro:return us(e,t);case Io:return cs(e,t)}else switch(n){case Lo:return as(e,t);case zo:return ds(e,t);case Ro:return ls(e,t);case Io:return ss(e,t)}default:return ps(e,t)}}function ts(e,t,n){return _s&&e.constructor?.name===`Buffer`?e.toString(`utf-8`,t,n):ys?ys.decode(e.subarray(t,n)):(0,hs.toUtf8)(e.subarray(t,n))}function ns(e){let t=Number(e);return(t<-(2**53-1)||2**53-1<t)&&console.warn(Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function rs(e,t){let n=e>>7,r=(e&124)>>2,i=(e&3)<<8|t,a=n===0?1:-1,o,s;if(r===0){if(i===0)return 0;o=2**-14,s=0}else if(r===31)return i===0?a*(1/0):NaN;else o=2**(r-15),s=1;return s+=i/1024,o*s*a}function is(e,t){let n=H[e]&31;if(n<24)return U=1,n;if(n===Ko||n===qo||n===Jo||n===Yo){let r=bs[n];if(U=r+1,t-e<U)throw Error(`countLength ${r} greater than remaining buf len.`);let i=e+1;return r===1?H[i]:r===2?vs.getUint16(i):r===4?vs.getUint32(i):ns(vs.getBigUint64(i))}throw Error(`unexpected minor value ${n}.`)}function as(e,t){let n=is(e,t),r=U;if(e+=r,t-e<n)throw Error(`string len ${n} greater than remaining buf len.`);let i=ts(H,e,e+n);return U=r+n,i}function os(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255){let t=Mo(n.length);return t.set(n,0),U=e-r+2,ts(t,0,t.length)}let i=(H[e]&224)>>5,a=H[e]&31;if(i!==Lo)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===Xo)throw Error(`nested indefinite string.`);let o=ss(e,t);e+=U;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function ss(e,t){let n=is(e,t),r=U;if(e+=r,t-e<n)throw Error(`unstructured byte string len ${n} greater than remaining buf len.`);let i=H.subarray(e,e+n);return U=r+n,i}function cs(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255){let t=Mo(n.length);return t.set(n,0),U=e-r+2,t}let i=(H[e]&224)>>5,a=H[e]&31;if(i!==Io)throw Error(`unexpected major type ${i} in indefinite string.`);if(a===Xo)throw Error(`nested indefinite string.`);let o=ss(e,t);e+=U;for(let e=0;e<o.length;++e)n.push(o[e])}throw Error(`expected break marker.`)}function ls(e,t){let n=is(e,t),r=U;e+=r;let i=e,a=Array(n);for(let r=0;r<n;++r){let n=es(e,t),i=U;a[r]=n,e+=i}return U=r+(e-i),a}function us(e,t){e+=1;let n=[];for(let r=e;e<t;){if(H[e]===255)return U=e-r+2,n;let i=es(e,t);e+=U,n.push(i)}throw Error(`expected break marker.`)}function ds(e,t){let n=is(e,t),r=U;e+=r;let i=e,a={};for(let r=0;r<n;++r){if(e>=t)throw Error(`unexpected end of map payload.`);let n=(H[e]&224)>>5;if(n!==Lo)throw Error(`unexpected major type ${n} for map key at index ${e}.`);let r=es(e,t);e+=U;let i=es(e,t);e+=U,a[r]=i}return U=r+(e-i),a}function fs(e,t){e+=1;let n=e,r={};for(;e<t;){if(e>=t)throw Error(`unexpected end of map payload.`);if(H[e]===255)return U=e-n+2,r;let i=(H[e]&224)>>5;if(i!==Lo)throw Error(`unexpected major type ${i} for map key.`);let a=es(e,t);e+=U;let o=es(e,t);e+=U,r[a]=o}throw Error(`expected break marker.`)}function ps(e,t){let n=H[e]&31;switch(n){case Uo:case Ho:return U=1,n===Uo;case Wo:return U=1,null;case Go:return U=1,null;case qo:if(t-e<3)throw Error(`incomplete float16 at end of buf.`);return U=3,rs(H[e+1],H[e+2]);case Jo:if(t-e<5)throw Error(`incomplete float32 at end of buf.`);return U=5,vs.getFloat32(e+1);case Yo:if(t-e<9)throw Error(`incomplete float64 at end of buf.`);return U=9,vs.getFloat64(e+1);default:throw Error(`unexpected minor value ${n}.`)}}function ms(e){if(typeof e==`number`)return e;let t=Number(e);return-(2**53-1)<=t&&t<=2**53-1?t:e}var hs,gs,_s,H,vs,ys,U,bs,xs=o((()=>{vi(),hs=R(),Qo(),gs=typeof TextDecoder<`u`,_s=typeof Buffer<`u`,H=Mo(0),vs=new DataView(H.buffer,H.byteOffset,H.byteLength),ys=gs?new TextDecoder:null,U=0,bs={[Ko]:1,[qo]:2,[Jo]:4,[Yo]:8}}));function Ss(e){W.byteLength-G<e&&ws(G<16e6?Math.max(W.byteLength*4,W.byteLength+e):W.byteLength+e+16e6)}function Cs(){let e=Mo(G);return e.set(W.subarray(0,G),0),G=0,e}function ws(e){let t=W;W=Mo(e),t&&(t.copy?t.copy(W,0,0,t.byteLength):W.set(t,0)),ks=new DataView(W.buffer,W.byteOffset,W.byteLength)}function Ts(e,t){t<24?W[G++]=e<<5|t:t<256?(W[G++]=e<<5|24,W[G++]=t):t<65536?(W[G++]=e<<5|qo,ks.setUint16(G,t),G+=2):t<2**32?(W[G++]=e<<5|Jo,ks.setUint32(G,t),G+=4):(W[G++]=e<<5|Yo,ks.setBigUint64(G,typeof t==`bigint`?t:BigInt(t)),G+=8)}function Es(e){let t=[e];for(;t.length;){let e=t.pop();if(Ss(typeof e==`string`?e.length*4:64),typeof e==`string`){if(Os)Ts(Lo,Buffer.byteLength(e)),G+=W.write(e,G);else{let t=(0,Ds.fromUtf8)(e);Ts(Lo,t.byteLength),W.set(t,G),G+=t.byteLength}continue}else if(typeof e==`number`){if(Number.isInteger(e)){let t=e>=0,n=t?Po:Fo,r=t?e:-e-1;r<24?W[G++]=n<<5|r:r<256?(W[G++]=n<<5|24,W[G++]=r):r<65536?(W[G++]=n<<5|qo,W[G++]=r>>8,W[G++]=r):r<4294967296?(W[G++]=n<<5|Jo,ks.setUint32(G,r),G+=4):(W[G++]=n<<5|Yo,ks.setBigUint64(G,BigInt(r)),G+=8);continue}W[G++]=Vo<<5|Yo,ks.setFloat64(G,e),G+=8;continue}else if(typeof e==`bigint`){let t=e>=0,n=t?Po:Fo,r=t?e:-e-BigInt(1),i=Number(r);if(i<24)W[G++]=n<<5|i;else if(i<256)W[G++]=n<<5|24,W[G++]=i;else if(i<65536)W[G++]=n<<5|qo,W[G++]=i>>8,W[G++]=i&255;else if(i<4294967296)W[G++]=n<<5|Jo,ks.setUint32(G,i),G+=4;else if(r<BigInt(`18446744073709551616`))W[G++]=n<<5|Yo,ks.setBigUint64(G,r),G+=8;else{let e=r.toString(2),n=new Uint8Array(Math.ceil(e.length/8)),i=r,a=0;for(;n.byteLength-++a>=0;)n[n.byteLength-a]=Number(i&BigInt(255)),i>>=BigInt(8);Ss(n.byteLength*2),W[G++]=t?194:195,Os?Ts(Io,Buffer.byteLength(n)):Ts(Io,n.byteLength),W.set(n,G),G+=n.byteLength}continue}else if(e===null){W[G++]=Vo<<5|Wo;continue}else if(typeof e==`boolean`){W[G++]=Vo<<5|(e?Uo:Ho);continue}else if(e===void 0)throw Error(`@smithy/core/cbor: client may not serialize undefined value.`);else if(Array.isArray(e)){for(let n=e.length-1;n>=0;--n)t.push(e[n]);Ts(Ro,e.length);continue}else if(typeof e.byteLength==`number`){Ss(e.length*2),Ts(Io,e.length),W.set(e,G),G+=e.byteLength;continue}else if(typeof e==`object`){if(e instanceof hi){let n=e.string.indexOf(`.`),r=n===-1?0:n-e.string.length+1,i=BigInt(e.string.replace(`.`,``));W[G++]=196,t.push(i),t.push(r),Ts(Ro,2);continue}if(e[Zo])if(`tag`in e&&`value`in e){t.push(e.value),Ts(Bo,e.tag);continue}else throw Error(`tag encountered with missing fields, need 'tag' and 'value', found: `+JSON.stringify(e));let n=Object.keys(e);for(let r=n.length-1;r>=0;--r){let i=n[r];t.push(e[i]),t.push(i)}Ts(zo,n.length);continue}throw Error(`data type ${e?.constructor?.name??typeof e} not compatible for encoding.`)}}var Ds,Os,W,ks,G,As=o((()=>{vi(),Ds=R(),Qo(),Os=typeof Buffer<`u`,W=Mo(2048),ks=new DataView(W.buffer,W.byteOffset,W.byteLength),G=0})),js,Ms=o((()=>{xs(),As(),js={deserialize(e){return $o(e),es(0,e.length)},serialize(e){try{return Es(e),Cs()}catch(e){throw Cs(),e}},resizeEncodingBuffer(e){ws(e)}}})),Ns,Ps,Fs=o((()=>{ra(),Qo(),Ns=e=>No({tag:1,value:e.getTime()/1e3}),Ps=(e,t)=>{let n=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t};if(t.__type!==void 0)return n(t.__type);let r=Object.keys(t).find(e=>e.toLowerCase()===`code`);if(r&&t[r]!==void 0)return n(t[r])}})),Is,Ls,Rs,zs,Bs=o((()=>{ra(),V(),vi(),Is=De(),Ms(),Fs(),Ls=class extends yi{createSerializer(){let e=new Rs;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new zs;return e.setSerdeContext(this.serdeContext),e}},Rs=class extends yi{value;write(e,t){this.value=this.serialize(e,t)}serialize(e,t){let n=z.of(e);if(t==null)return n.isIdempotencyToken()?(0,Hr.v4)():t;if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Is.fromBase64)(t):t;if(n.isTimestampSchema())return Ns(typeof t==`number`||typeof t==`bigint`?new Date(Number(t)/1e3|0):t);if(typeof t==`function`||typeof t==`object`){let e=t;if(n.isListSchema()&&Array.isArray(e)){let t=!!n.getMergedTraits().sparse,r=[],i=0;for(let a of e){let e=this.serialize(n.getValueSchema(),a);(e!=null||t)&&(r[i++]=e)}return r}if(e instanceof Date)return Ns(e);let r={};if(n.isMapSchema()){let t=!!n.getMergedTraits().sparse;for(let i of Object.keys(e)){let a=this.serialize(n.getValueSchema(),e[i]);(a!=null||t)&&(r[i]=a)}}else if(n.isStructSchema())for(let[t,i]of n.structIterator()){let n=this.serialize(i,e[t]);n!=null&&(r[t]=n)}else if(n.isDocumentSchema())for(let t of Object.keys(e))r[t]=this.serialize(n.getValueSchema(),e[t]);return r}return t}flush(){let e=js.serialize(this.value);return this.value=void 0,e}},zs=class extends yi{read(e,t){let n=js.deserialize(t);return this.readValue(e,n)}readValue(e,t){let n=z.of(e);if(n.isTimestampSchema()){if(typeof t==`number`)return ai(t);if(typeof t==`object`&&t.tag===1&&`value`in t)return ai(t.value)}if(n.isBlobSchema())return typeof t==`string`?(this.serdeContext?.base64Decoder??Is.fromBase64)(t):t;if(t===void 0||typeof t==`boolean`||typeof t==`number`||typeof t==`string`||typeof t==`bigint`||typeof t==`symbol`)return t;if(typeof t==`object`){if(t===null)return null;if(`byteLength`in t||t instanceof Date||n.isDocumentSchema())return t;if(n.isListSchema()){let e=[],r=n.getValueSchema(),i=!!n.getMergedTraits().sparse;for(let n of t){let t=this.readValue(r,n);(t!=null||i)&&e.push(t)}return e}let e={};if(n.isMapSchema()){let r=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let n of Object.keys(t)){let a=this.readValue(i,t[n]);(a!=null||r)&&(e[n]=a)}}else if(n.isStructSchema())for(let[r,i]of n.structIterator()){let n=this.readValue(i,t[r]);n!=null&&(e[r]=n)}return e}else return t}}})),Vs,Hs,Us=o((()=>{ra(),V(),Vs=k(),Bs(),Fs(),Hs=class extends Pi{codec=new Ls;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:e}){super({defaultNamespace:e})}getShapeId(){return`smithy.protocols#rpcv2Cbor`}getPayloadCodec(){return this.codec}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);if(Object.assign(r.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":`rpc-v2-cbor`,accept:this.getDefaultContentType()}),et(e.input)===`unit`)delete r.body,delete r.headers[`content-type`];else{r.body||=(this.serializer.write(15,{}),this.serializer.flush());try{r.headers[`content-length`]=String(r.body.byteLength)}catch{}}let{service:i,operation:a}=(0,Vs.getSmithyContext)(n),o=`/service/${i}/operation/${a}`;return r.path.endsWith(`/`)?r.path+=o.slice(1):r.path+=o,r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=Ps(n,r)??`Unknown`,o=this.options.defaultNamespace;a.includes(`#`)&&([o]=a.split(`#`));let s={$metadata:i,$fault:n.statusCode<=500?`client`:`server`},c=B.for(o),l;try{l=c.getSchema(a)}catch{r.Message&&(r.message=r.Message);let e=B.for(`smithy.ts.sdk.synthetic.`+o),t=e.getBaseException();if(t){let n=e.getErrorCtor(t);throw Object.assign(new n({name:a}),s,r)}throw Object.assign(Error(a),s,r)}let u=z.of(l),d=c.getErrorCtor(l),f=r.message??r.Message??`Unknown`,p=new d(f),m={};for(let[e,t]of u.structIterator())m[e]=this.deserializer.readValue(t,r[e]);throw Object.assign(p,s,{$fault:u.getMergedTraits().error,message:f},m)}getDefaultContentType(){return`application/cbor`}}})),Ws=o((()=>{Fs(),Us(),Bs()})),Gs=s((e=>{let t=(e,t)=>{let n=[];if(e&&n.push(e),t)for(let e of t)n.push(e);return n},n=(e,t)=>`${e||`anonymous`}${t&&t.length>0?` (a.k.a. ${t.join(`,`)})`:``}`,r=()=>{let e=[],o=[],s=!1,c=new Set,l=e=>e.sort((e,t)=>i[t.step]-i[e.step]||a[t.priority||`normal`]-a[e.priority||`normal`]),u=n=>{let r=!1,i=e=>{let i=t(e.name,e.aliases);if(i.includes(n)){r=!0;for(let e of i)c.delete(e);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},d=n=>{let r=!1,i=e=>{if(e.middleware===n){r=!0;for(let n of t(e.name,e.aliases))c.delete(n);return!1}return!0};return e=e.filter(i),o=o.filter(i),r},f=t=>(e.forEach(e=>{t.add(e.middleware,{...e})}),o.forEach(e=>{t.addRelativeTo(e.middleware,{...e})}),t.identifyOnResolve?.(h.identifyOnResolve()),t),p=e=>{let t=[];return e.before.forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t.push(e),e.after.reverse().forEach(e=>{e.before.length===0&&e.after.length===0?t.push(e):t.push(...p(e))}),t},m=(r=!1)=>{let i=[],a=[],s={};return e.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;i.push(n)}),o.forEach(e=>{let n={...e,before:[],after:[]};for(let e of t(n.name,n.aliases))s[e]=n;a.push(n)}),a.forEach(e=>{if(e.toMiddleware){let t=s[e.toMiddleware];if(t===void 0){if(r)return;throw Error(`${e.toMiddleware} is not found when adding ${n(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}e.relation===`after`&&t.after.push(e),e.relation===`before`&&t.before.push(e)}}),l(i).map(p).reduce((e,t)=>(e.push(...t),e),[])},h={add:(r,i={})=>{let{name:a,override:o,aliases:s}=i,l={step:`initialize`,priority:`normal`,middleware:r,...i},u=t(a,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!o)throw Error(`Duplicate middleware name '${n(a,s)}'`);for(let t of u){let r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(r===-1)continue;let i=e[r];if(i.step!==l.step||l.priority!==i.priority)throw Error(`"${n(i.name,i.aliases)}" middleware with ${i.priority} priority in ${i.step} step cannot be overridden by "${n(a,s)}" middleware with ${l.priority} priority in ${l.step} step.`);e.splice(r,1)}}for(let e of u)c.add(e)}e.push(l)},addRelativeTo:(e,r)=>{let{name:i,override:a,aliases:s}=r,l={middleware:e,...r},u=t(i,s);if(u.length>0){if(u.some(e=>c.has(e))){if(!a)throw Error(`Duplicate middleware name '${n(i,s)}'`);for(let e of u){let t=o.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(t===-1)continue;let r=o[t];if(r.toMiddleware!==l.toMiddleware||r.relation!==l.relation)throw Error(`"${n(r.name,r.aliases)}" middleware ${r.relation} "${r.toMiddleware}" middleware cannot be overridden by "${n(i,s)}" middleware ${l.relation} "${l.toMiddleware}" middleware.`);o.splice(t,1)}}for(let e of u)c.add(e)}o.push(l)},clone:()=>f(r()),use:e=>{e.applyToStack(h)},remove:e=>typeof e==`string`?u(e):d(e),removeByTag:n=>{let r=!1,i=e=>{let{tags:i,name:a,aliases:o}=e;if(i&&i.includes(n)){let e=t(a,o);for(let t of e)c.delete(t);return r=!0,!1}return!0};return e=e.filter(i),o=o.filter(i),r},concat:e=>{let t=f(r());return t.use(e),t.identifyOnResolve(s||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:f,identify:()=>m(!0).map(e=>{let t=e.step??e.relation+` `+e.toMiddleware;return n(e.name,e.aliases)+` - `+t}),identifyOnResolve(e){return typeof e==`boolean`&&(s=e),s},resolve:(e,t)=>{for(let n of m().map(e=>e.middleware).reverse())e=n(e,t);return s&&console.log(h.identify()),e}};return h},i={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},a={high:3,normal:2,low:1};e.constructStack=r})),K=s((e=>{var t=Gs(),n=(ra(),d(na)),r=f(),i=(V(),d(Kt)),a=(vi(),d(_i)),o=class{config;middlewareStack=t.constructStack();initConfig;handlers;constructor(e){this.config=e}send(e,t,n){let r=typeof t==`function`?void 0:t,i=typeof t==`function`?t:n,a=r===void 0&&this.config.cacheMiddleware===!0,o;if(a){this.handlers||=new WeakMap;let t=this.handlers;t.has(e.constructor)?o=t.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,r),t.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(i)o(e).then(e=>i(null,e.output),e=>i(e)).catch(()=>{});else return o(e).then(e=>e.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};let s=`***SensitiveInformation***`;function c(e,t){if(t==null)return t;let n=i.NormalizedSchema.of(e);if(n.getMergedTraits().sensitive)return s;if(n.isListSchema()){if(n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isMapSchema()){if(n.getKeySchema().getMergedTraits().sensitive||n.getValueSchema().getMergedTraits().sensitive)return s}else if(n.isStructSchema()&&typeof t==`object`){let e=t,r={};for(let[t,i]of n.structIterator())e[t]!=null&&(r[t]=c(i,e[t]));return r}return t}var l=class{middlewareStack=t.constructStack();schema;static classBuilder(){return new u}resolveMiddlewareWithContext(e,t,n,{middlewareFn:i,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:u,CommandCtor:d}){for(let r of i.bind(this)(d,e,t,n))this.middlewareStack.use(r);let f=e.concat(this.middlewareStack),{logger:p}=t,m={logger:p,clientName:a,commandName:o,inputFilterSensitiveLog:s,outputFilterSensitiveLog:c,[r.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...u},{requestHandler:h}=t;return f.resolve(e=>h.handle(e.request,n||{}),m)}},u=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName=``;_clientName=``;_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,n={}){return this._smithyContext={service:e,operation:t,...n},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,t;return t=class extends l{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.input=t??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,r,i){let a=e._operationSchema,o=a?.[4]??a?.input,s=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(n,r,i,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?c.bind(null,o):e=>e),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?c.bind(null,s):e=>e),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}};let p=(e,t)=>{for(let n of Object.keys(e)){let r=e[n],i=async function(e,t,n){let i=new r(e);if(typeof t==`function`)this.send(i,t);else if(typeof n==`function`){if(typeof t!=`object`)throw Error(`Expected http options but got ${typeof t}`);this.send(i,t||{},n)}else return this.send(i,t)},a=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,``);t.prototype[a]=i}};var m=class e extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(t){if(!t)return!1;let n=t;return e.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault===`client`||n.$fault===`server`)}static[Symbol.hasInstance](t){if(!t)return!1;let n=t;return this===e?e.isInstance(t):e.isInstance(t)?n.name&&this.name?this.prototype.isPrototypeOf(t)||n.name===this.name:this.prototype.isPrototypeOf(t):!1}};let h=(e,t={})=>(Object.entries(t).filter(([,e])=>e!==void 0).forEach(([t,n])=>{(e[t]==null||e[t]===``)&&(e[t]=n)}),e.message=e.message||e.Message||`UnknownError`,delete e.Message,e),g=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{let i=v(e),a=i.httpStatusCode?i.httpStatusCode+``:void 0;throw h(new n({name:t?.code||t?.Code||r||a||`UnknownError`,$fault:`client`,$metadata:i}),t)},_=e=>({output:t,parsedBody:n,errorCode:r})=>{g({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},v=e=>({httpStatusCode:e.statusCode,requestId:e.headers[`x-amzn-requestid`]??e.headers[`x-amzn-request-id`]??e.headers[`x-amz-request-id`],extendedRequestId:e.headers[`x-amz-id-2`],cfId:e.headers[`x-amz-cf-id`]}),y=e=>{switch(e){case`standard`:return{retryMode:`standard`,connectionTimeout:3100};case`in-region`:return{retryMode:`standard`,connectionTimeout:1100};case`cross-region`:return{retryMode:`standard`,connectionTimeout:3100};case`mobile`:return{retryMode:`standard`,connectionTimeout:3e4};default:return{}}},b=!1,x=e=>{e&&!b&&parseInt(e.substring(1,e.indexOf(`.`)))<16&&(b=!0)},S=e=>{let t=[];for(let n in r.AlgorithmId){let i=r.AlgorithmId[n];e[i]!==void 0&&t.push({algorithmId:()=>i,checksumConstructor:()=>e[i]})}return{addChecksumAlgorithm(e){t.push(e)},checksumAlgorithms(){return t}}},C=e=>{let t={};return e.checksumAlgorithms().forEach(e=>{t[e.algorithmId()]=e.checksumConstructor()}),t},w=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),T=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},E=e=>Object.assign(S(e),w(e)),D=E,O=e=>Object.assign(C(e),T(e)),k=e=>Array.isArray(e)?e:[e],A=e=>{let t=`#text`;for(let n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]==`object`&&e[n]!==null&&(e[n]=A(e[n]));return e},j=e=>e!=null;var M=class{trace(){}debug(){}info(){}warn(){}error(){}};function N(e,t,n){let r,i,a;if(t===void 0&&n===void 0)r={},a=e;else{if(r=e,typeof t==`function`)return i=t,a=n,ne(r,i,a);a=t}for(let e of Object.keys(a)){if(!Array.isArray(a[e])){r[e]=a[e];continue}re(r,null,a,e)}return r}let ee=e=>{let t={};for(let[n,r]of Object.entries(e||{}))t[n]=[,r];return t},te=(e,t)=>{let n={};for(let r in t)re(n,e,t,r);return n},ne=(e,t,n)=>N(e,Object.entries(n).reduce((e,[n,r])=>(Array.isArray(r)?e[n]=r:typeof r==`function`?e[n]=[t,r()]:e[n]=[t,r],e),{})),re=(e,t,n,r)=>{if(t!==null){let i=n[r];typeof i==`function`&&(i=[,i]);let[a=ie,o=ae,s=r]=i;(typeof a==`function`&&a(t[s])||typeof a!=`function`&&a)&&(e[r]=o(t[s]));return}let[i,a]=n[r];if(typeof a==`function`){let t,n=i===void 0&&(t=a())!=null,o=typeof i==`function`&&!!i(void 0)||typeof i!=`function`&&!!i;n?e[r]=t:o&&(e[r]=a())}else{let t=i===void 0&&a!=null,n=typeof i==`function`&&!!i(a)||typeof i!=`function`&&!!i;(t||n)&&(e[r]=a)}},ie=e=>e!=null,ae=e=>e,P=e=>{if(e!==e)return`NaN`;switch(e){case 1/0:return`Infinity`;case-1/0:return`-Infinity`;default:return e}},F=e=>e.toISOString().replace(`.000Z`,`Z`),oe=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(e=>e!=null).map(oe);if(typeof e==`object`){let t={};for(let n of Object.keys(e))e[n]!=null&&(t[n]=oe(e[n]));return t}return e};Object.defineProperty(e,`collectBody`,{enumerable:!0,get:function(){return n.collectBody}}),Object.defineProperty(e,`extendedEncodeURIComponent`,{enumerable:!0,get:function(){return n.extendedEncodeURIComponent}}),Object.defineProperty(e,`resolvedPath`,{enumerable:!0,get:function(){return n.resolvedPath}}),e.Client=o,e.Command=l,e.NoOpLogger=M,e.SENSITIVE_STRING=`***SensitiveInformation***`,e.ServiceException=m,e._json=oe,e.convertMap=ee,e.createAggregatedClient=p,e.decorateServiceException=h,e.emitWarningIfUnsupportedVersion=x,e.getArrayIfSingleItem=k,e.getDefaultClientConfiguration=D,e.getDefaultExtensionConfiguration=E,e.getValueFromTextNode=A,e.isSerializableHeaderValue=j,e.loadConfigsForDefaultMode=y,e.map=N,e.resolveDefaultRuntimeConfig=O,e.serializeDateTime=F,e.serializeFloat=P,e.take=te,e.throwDefaultError=g,e.withBaseException=_,Object.keys(a).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})})),Ks,qs,Js=o((()=>{V(),Ks=K(),qs=class{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,t){let n=t.getMemberSchemas(),r=Object.values(n).find(e=>!!e.getMergedTraits().httpPayload);if(r)return r.getMergedTraits().mediaType||(r.isStringSchema()?`text/plain`:r.isBlobSchema()?`application/octet-stream`:e);if(!t.isUnitSchema()&&Object.values(n).find(e=>{let{httpQuery:t,httpQueryParams:n,httpHeader:r,httpLabel:i,httpPrefixHeaders:a}=e.getMergedTraits();return!t&&!n&&!r&&!i&&a===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,t,n,r,i,a){let o=t,s=e;e.includes(`#`)&&([o,s]=e.split(`#`));let c={$metadata:i,$fault:n.statusCode<500?`client`:`server`},l=B.for(o);try{return{errorSchema:a?.(l,s)??l.getSchema(e),errorMetadata:c}}catch{r.message=r.message??r.Message??`UnknownError`;let e=B.for(`smithy.ts.sdk.synthetic.`+o),t=e.getBaseException();if(t){let n=e.getErrorCtor(t)??Error;throw this.decorateServiceException(Object.assign(new n({name:s}),c),r)}throw this.decorateServiceException(Object.assign(Error(s),c),r)}}decorateServiceException(e,t={}){if(this.queryCompat){let n=e.Message??t.Message,r=(0,Ks.decorateServiceException)(e,t);n&&(r.message=n),r.Error={...r.Error,Type:r.Error.Type,Code:r.Error.Code,Message:r.Error.message??r.Error.Message??n};let i=r.$metadata.requestId;return i&&(r.RequestId=i),r}return(0,Ks.decorateServiceException)(e,t)}setQueryCompatError(e,t){let n=t.headers?.[`x-amzn-query-error`];if(e!==void 0&&n!=null){let[t,r]=n.split(`;`),i=Object.entries(e),a={Code:t,Type:r};Object.assign(e,a);for(let[e,t]of i)a[e===`message`?`Message`:e]=t;delete a.__type,e.Error=a}}queryCompatOutput(e,t){e.Error&&(t.Error=e.Error),e.Type&&(t.Type=e.Type),e.Code&&(t.Code=e.Code)}findQueryCompatibleError(e,t){try{return e.getSchema(t)}catch{return e.find(e=>z.of(e).getMergedTraits().awsQueryError?.[0]===t)}}}})),Ys,Xs=o((()=>{Ws(),V(),Js(),Ys=class extends Hs{awsQueryCompatible;mixin;constructor({defaultNamespace:e,awsQueryCompatible:t}){super({defaultNamespace:e}),this.awsQueryCompatible=!!t,this.mixin=new qs(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),r}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=(()=>{let e=n.headers[`x-amzn-query-error`];return e&&this.awsQueryCompatible?e.split(`;`)[0]:Ps(n,r)??`Unknown`})(),{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.deserializer.readValue(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),Zs,Qs,$s,ec=o((()=>{Zs=e=>{if(e==null)return e;if(typeof e==`number`||typeof e==`bigint`){let t=Error(`Received number ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}if(typeof e==`boolean`){let t=Error(`Received boolean ${e} where a string was expected.`);return t.name=`Warning`,console.warn(t),String(e)}return e},Qs=e=>{if(e==null)return e;if(typeof e==`string`){let t=e.toLowerCase();if(e!==``&&t!==`false`&&t!==`true`){let t=Error(`Received string "${e}" where a boolean was expected.`);t.name=`Warning`,console.warn(t)}return e!==``&&t!==`false`}return e},$s=e=>{if(e==null)return e;if(typeof e==`string`){let t=Number(e);if(t.toString()!==e){let t=Error(`Received string "${e}" where a number was expected.`);return t.name=`Warning`,console.warn(t),e}return t}return e}})),tc,nc=o((()=>{tc=class{serdeContext;setSerdeContext(e){this.serdeContext=e}}}));function*rc(e,t){if(e.isUnitSchema())return;let n=e.getSchema();for(let e=0;e<n[4].length;++e){let r=n[4][e],i=n[5][e],a=new z([i,0],r);!(r in t)&&!a.isIdempotencyToken()||(yield[r,a])}}function*ic(e,t,n){if(e.isUnitSchema())return;let r=e.getSchema(),i=Object.keys(t).filter(e=>e!==`__type`).length;for(let e=0;e<r[4].length&&i!==0;++e){let a=r[4][e],o=r[5][e],s=new z([o,0],a),c=a;n&&(c=s.getMergedTraits()[n]??a),c in t&&(yield[a,s],--i)}}var ac=o((()=>{V()}));function oc(e,t,n){if(n?.source){let e=n.source;if(typeof t==`number`&&(t>2**53-1||t<-(2**53-1)||e!==String(t)))return e.includes(`.`)?new hi(e,`bigDecimal`):BigInt(e)}return t}var sc=o((()=>{vi()})),cc,lc,uc,dc=o((()=>{cc=K(),lc=R(),uc=(e,t)=>(0,cc.collectBody)(e,t).then(e=>(t?.utf8Encoder??lc.toUtf8)(e))})),fc,pc,mc,hc=o((()=>{dc(),fc=(e,t)=>uc(e,t).then(e=>{if(e.length)try{return JSON.parse(e)}catch(t){throw t?.name===`SyntaxError`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}return{}}),pc=async(e,t)=>{let n=await fc(e,t);return n.message=n.message??n.Message,n},mc=(e,t)=>{let n=(e,t)=>Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase()),r=e=>{let t=e;return typeof t==`number`&&(t=t.toString()),t.indexOf(`,`)>=0&&(t=t.split(`,`)[0]),t.indexOf(`:`)>=0&&(t=t.split(`:`)[0]),t.indexOf(`#`)>=0&&(t=t.split(`#`)[1]),t},i=n(e.headers,`x-amzn-errortype`);if(i!==void 0)return r(e.headers[i]);if(t&&typeof t==`object`){let e=n(t,`code`);if(e&&t[e]!==void 0)return r(t[e]);if(t.__type!==void 0)return r(t.__type)}}})),gc,_c,vc=o((()=>{ra(),V(),vi(),gc=De(),nc(),ac(),sc(),hc(),_c=class extends tc{settings;constructor(e){super(),this.settings=e}async read(e,t){return this._read(e,typeof t==`string`?JSON.parse(t,oc):await fc(t,this.serdeContext))}readObject(e,t){return this._read(e,t)}_read(e,t){let n=typeof t==`object`&&!!t,r=z.of(e);if(n){if(r.isStructSchema()){let e={};for(let[n,i]of ic(r,t,this.settings.jsonName?`jsonName`:!1)){let r=this.settings.jsonName?i.getMergedTraits().jsonName??n:n,a=this._read(i,t[r]);a!=null&&(e[n]=a)}return e}if(Array.isArray(t)&&r.isListSchema()){let e=r.getValueSchema(),n=[],i=!!r.getMergedTraits().sparse;for(let r of t)(i||r!=null)&&n.push(this._read(e,r));return n}if(r.isMapSchema()){let e=r.getValueSchema(),n={},i=!!r.getMergedTraits().sparse;for(let[r,a]of Object.entries(t))(i||a!=null)&&(n[r]=this._read(e,a));return n}}if(r.isBlobSchema()&&typeof t==`string`)return(0,gc.fromBase64)(t);let i=r.getMergedTraits().mediaType;if(r.isStringSchema()&&typeof t==`string`&&i)return i===`application/json`||i.endsWith(`+json`)?Wr.from(t):t;if(r.isTimestampSchema()&&t!=null)switch(Hi(r,this.settings)){case 5:return In(t);case 6:return Bn(t);case 7:return Vn(t);default:return console.warn(`Missing timestamp format, parsing value with Date constructor:`,t),new Date(t)}if(r.isBigIntegerSchema()&&(typeof t==`number`||typeof t==`string`))return BigInt(t);if(r.isBigDecimalSchema()&&t!=null){if(t instanceof hi)return t;let e=t;return e.type===`bigDecimal`&&`string`in e?new hi(e.string,e.type):new hi(String(t),`bigDecimal`)}if(r.isNumericSchema()&&typeof t==`string`){switch(t){case`Infinity`:return 1/0;case`-Infinity`:return-1/0;case`NaN`:return NaN}return t}if(r.isDocumentSchema())if(n){let e=Array.isArray(t)?[]:{};for(let[n,i]of Object.entries(t))i instanceof hi?e[n]=i:e[n]=this._read(r,i);return e}else return structuredClone(t);return t}}})),yc,bc,xc=o((()=>{vi(),yc=``,bc=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw Error(`@aws-sdk/core/protocols - JsonReplacer already created.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);return this.stage=1,(e,t)=>{if(t instanceof hi){let e=`${yc+`nv`+ this.counter++}_`+t.string;return this.values.set(`"${e}"`,t.string),e}if(typeof t==`bigint`){let e=t.toString(),n=`${yc+`b`+ this.counter++}_`+e;return this.values.set(`"${n}"`,e),n}return t}}replaceInJson(e){if(this.stage===0)throw Error(`@aws-sdk/core/protocols - JsonReplacer not created yet.`);if(this.stage===2)throw Error(`@aws-sdk/core/protocols - JsonReplacer exhausted.`);if(this.stage=2,this.counter===0)return e;for(let[t,n]of this.values)e=e.replace(t,n);return e}}})),Sc,Cc,wc=o((()=>{ra(),V(),vi(),Sc=De(),nc(),ac(),xc(),Cc=class extends tc{settings;buffer;useReplacer=!1;rootSchema;constructor(e){super(),this.settings=e}write(e,t){this.rootSchema=z.of(e),this.buffer=this._write(this.rootSchema,t)}writeDiscriminatedDocument(e,t){this.write(e,t),typeof this.buffer==`object`&&(this.buffer.__type=z.of(e).getName(!0))}flush(){let{rootSchema:e,useReplacer:t}=this;if(this.rootSchema=void 0,this.useReplacer=!1,e?.isStructSchema()||e?.isDocumentSchema()){if(!t)return JSON.stringify(this.buffer);let e=new bc;return e.replaceInJson(JSON.stringify(this.buffer,e.createReplacer(),0))}return this.buffer}_write(e,t,n){let r=typeof t==`object`&&!!t,i=z.of(e);if(r){if(i.isStructSchema()){let e={};for(let[n,r]of rc(i,t)){let a=this._write(r,t[n],i);if(a!==void 0){let t=r.getMergedTraits().jsonName,i=this.settings.jsonName?t??n:n;e[i]=a}}return e}if(Array.isArray(t)&&i.isListSchema()){let e=i.getValueSchema(),n=[],r=!!i.getMergedTraits().sparse;for(let i of t)(r||i!=null)&&n.push(this._write(e,i));return n}if(i.isMapSchema()){let e=i.getValueSchema(),n={},r=!!i.getMergedTraits().sparse;for(let[i,a]of Object.entries(t))(r||a!=null)&&(n[i]=this._write(e,a));return n}if(t instanceof Uint8Array&&(i.isBlobSchema()||i.isDocumentSchema()))return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Sc.toBase64)(t);if(t instanceof Date&&(i.isTimestampSchema()||i.isDocumentSchema()))switch(Hi(i,this.settings)){case 5:return t.toISOString().replace(`.000Z`,`Z`);case 6:return An(t);case 7:return t.getTime()/1e3;default:return console.warn(`Missing timestamp format, using epoch seconds`,t),t.getTime()/1e3}t instanceof hi&&(this.useReplacer=!0)}if(!(t===null&&n?.isStructSchema())){if(i.isStringSchema()){if(t===void 0&&i.isIdempotencyToken())return(0,Hr.v4)();let e=i.getMergedTraits().mediaType;return t!=null&&e&&(e===`application/json`||e.endsWith(`+json`))?Wr.from(t):t}if(typeof t==`number`&&i.isNumericSchema())return Math.abs(t)===1/0||isNaN(t)?String(t):t;if(typeof t==`string`&&i.isBlobSchema())return i===this.rootSchema?t:(this.serdeContext?.base64Encoder??Sc.toBase64)(t);if(typeof t==`bigint`&&(this.useReplacer=!0),i.isDocumentSchema())if(r){let e=Array.isArray(t)?[]:{};for(let[n,r]of Object.entries(t))r instanceof hi?(this.useReplacer=!0,e[n]=r):e[n]=this._write(i,r);return e}else return structuredClone(t);return t}}}})),Tc,Ec=o((()=>{nc(),vc(),wc(),Tc=class extends tc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new Cc(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new _c(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),Dc,Oc=o((()=>{ra(),V(),Js(),Ec(),hc(),Dc=class extends Pi{serializer;deserializer;serviceTarget;codec;mixin;awsQueryCompatible;constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e}),this.serviceTarget=t,this.codec=r??new Tc({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n,this.mixin=new qs(this.awsQueryCompatible)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${e.name}`}),this.awsQueryCompatible&&(r.headers[`x-amzn-query-mode`]=`true`),(et(e.input)===`unit`||!r.body)&&(r.body=`{}`),r}getPayloadCodec(){return this.codec}async handleError(e,t,n,r,i){this.awsQueryCompatible&&this.mixin.setQueryCompatError(r,n);let a=mc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i,this.awsQueryCompatible?this.mixin.findQueryCompatibleError:void 0),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l),d={};for(let[e,t]of c.structIterator())r[e]!=null&&(d[e]=this.codec.createDeserializer().readObject(t,r[e]));throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(r,d),this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}}})),kc,Ac=o((()=>{Oc(),kc=class extends Dc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_0`}getJsonRpcVersion(){return`1.0`}getDefaultContentType(){return`application/x-amz-json-1.0`}}})),jc,Mc=o((()=>{Oc(),jc=class extends Dc{constructor({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r}){super({defaultNamespace:e,serviceTarget:t,awsQueryCompatible:n,jsonCodec:r})}getShapeId(){return`aws.protocols#awsJson1_1`}getJsonRpcVersion(){return`1.1`}getDefaultContentType(){return`application/x-amz-json-1.1`}}})),Nc,Pc=o((()=>{ra(),V(),Js(),Ec(),hc(),Nc=class extends ji{serializer;deserializer;codec;mixin=new qs;constructor({defaultNamespace:e}){super({defaultNamespace:e});let t={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Tc(t),this.serializer=new ea(this.codec.createSerializer(),t),this.deserializer=new Yi(this.codec.createDeserializer(),t)}getShapeId(){return`aws.protocols#restJson1`}getPayloadCodec(){return this.codec}setSerdeContext(e){this.codec.setSerdeContext(e),super.setSerdeContext(e)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=z.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return r.body==null&&r.headers[`content-type`]===this.getDefaultContentType()&&(r.body=`{}`),r}async deserializeResponse(e,t,n){let r=await super.deserializeResponse(e,t,n),i=z.of(e.output);for(let[e,t]of i.structIterator())t.getMemberTraits().httpPayload&&!(e in r)&&(r[e]=null);return r}async handleError(e,t,n,r,i){let a=mc(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=z.of(o),l=r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().jsonName??e;d[e]=this.codec.createDeserializer().readObject(t,r[n])}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/json`}}})),Fc,Ic,Lc=o((()=>{Fc=K(),Ic=e=>{if(e!=null)return typeof e==`object`&&`__type`in e&&delete e.__type,(0,Fc.expectUnion)(e)}})),Rc=s(((e,t)=>{(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})}},n={};e.r(n),e.d(n,{XMLBuilder:()=>R,XMLParser:()=>ve,XMLValidator:()=>ke});let r=RegExp(`^[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`);function i(e,t){let n=[],r=t.exec(e);for(;r;){let i=[];i.startIndex=t.lastIndex-r[0].length;let a=r.length;for(let e=0;e<a;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n}let a=function(e){return r.exec(e)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function s(e,t){t=Object.assign({},o,t);let n=[],r=!1,i=!1;e[0]===``&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]===`<`&&e[o+1]===`?`){if(o+=2,o=l(e,o),o.err)return o}else{if(e[o]!==`<`){if(c(e[o]))continue;return h(`InvalidChar`,`char '`+e[o]+`' is not expected.`,_(e,o))}{let s=o;if(o++,e[o]===`!`){o=u(e,o);continue}{let f=!1;e[o]===`/`&&(f=!0,o++);let g=``;for(;o<e.length&&e[o]!==`>`&&e[o]!==` `&&e[o]!==`	`&&e[o]!==`
`&&e[o]!==`\r`;o++)g+=e[o];if(g=g.trim(),g[g.length-1]===`/`&&(g=g.substring(0,g.length-1),o--),!a(g)){let t;return t=g.trim().length===0?`Invalid space after '<'.`:`Tag '`+g+`' is an invalid name.`,h(`InvalidTag`,t,_(e,o))}let v=d(e,o);if(!1===v)return h(`InvalidAttr`,`Attributes for '`+g+`' have open quote.`,_(e,o));let y=v.value;if(o=v.index,y[y.length-1]===`/`){let n=o-y.length;y=y.substring(0,y.length-1);let i=p(y,t);if(!0!==i)return h(i.err.code,i.err.msg,_(e,n+i.err.line));r=!0}else if(f){if(!v.tagClosed)return h(`InvalidTag`,`Closing tag '`+g+`' doesn't have proper closing.`,_(e,o));if(y.trim().length>0)return h(`InvalidTag`,`Closing tag '`+g+`' can't have attributes or invalid starting.`,_(e,s));if(n.length===0)return h(`InvalidTag`,`Closing tag '`+g+`' has not been opened.`,_(e,s));{let t=n.pop();if(g!==t.tagName){let n=_(e,t.tagStartPos);return h(`InvalidTag`,`Expected closing tag '`+t.tagName+`' (opened in line `+n.line+`, col `+n.col+`) instead of closing tag '`+g+`'.`,_(e,s))}n.length==0&&(i=!0)}}else{let a=p(y,t);if(!0!==a)return h(a.err.code,a.err.msg,_(e,o-y.length+a.err.line));if(!0===i)return h(`InvalidXml`,`Multiple possible root nodes found.`,_(e,o));t.unpairedTags.indexOf(g)!==-1||n.push({tagName:g,tagStartPos:s}),r=!0}for(o++;o<e.length;o++)if(e[o]===`<`){if(e[o+1]===`!`){o++,o=u(e,o);continue}if(e[o+1]!==`?`)break;if(o=l(e,++o),o.err)return o}else if(e[o]===`&`){let t=m(e,o);if(t==-1)return h(`InvalidChar`,`char '&' is not expected.`,_(e,o));o=t}else if(!0===i&&!c(e[o]))return h(`InvalidXml`,`Extra text at the end`,_(e,o));e[o]===`<`&&o--}}}return r?n.length==1?h(`InvalidTag`,`Unclosed tag '`+n[0].tagName+`'.`,_(e,n[0].tagStartPos)):!(n.length>0)||h(`InvalidXml`,`Invalid '`+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,``)+`' found.`,{line:1,col:1}):h(`InvalidXml`,`Start tag expected.`,1)}function c(e){return e===` `||e===`	`||e===`
`||e===`\r`}function l(e,t){let n=t;for(;t<e.length;t++)if(!(e[t]!=`?`&&e[t]!=` `)){let r=e.substr(n,t-n);if(t>5&&r===`xml`)return h(`InvalidXml`,`XML declaration allowed only at the start of the document.`,_(e,t));if(e[t]==`?`&&e[t+1]==`>`){t++;break}}return t}function u(e,t){if(e.length>t+5&&e[t+1]===`-`&&e[t+2]===`-`){for(t+=3;t<e.length;t++)if(e[t]===`-`&&e[t+1]===`-`&&e[t+2]===`>`){t+=2;break}}else if(e.length>t+8&&e[t+1]===`D`&&e[t+2]===`O`&&e[t+3]===`C`&&e[t+4]===`T`&&e[t+5]===`Y`&&e[t+6]===`P`&&e[t+7]===`E`){let n=1;for(t+=8;t<e.length;t++)if(e[t]===`<`)n++;else if(e[t]===`>`&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]===`[`&&e[t+2]===`C`&&e[t+3]===`D`&&e[t+4]===`A`&&e[t+5]===`T`&&e[t+6]===`A`&&e[t+7]===`[`){for(t+=8;t<e.length;t++)if(e[t]===`]`&&e[t+1]===`]`&&e[t+2]===`>`){t+=2;break}}return t}function d(e,t){let n=``,r=``,i=!1;for(;t<e.length;t++){if(e[t]===`"`||e[t]===`'`)r===``?r=e[t]:r!==e[t]||(r=``);else if(e[t]===`>`&&r===``){i=!0;break}n+=e[t]}return r===``&&{value:n,index:t,tagClosed:i}}let f=RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,`g`);function p(e,t){let n=i(e,f),r={};for(let e=0;e<n.length;e++){if(n[e][1].length===0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' has no space in starting.`,v(n[e]));if(n[e][3]!==void 0&&n[e][4]===void 0)return h(`InvalidAttr`,`Attribute '`+n[e][2]+`' is without value.`,v(n[e]));if(n[e][3]===void 0&&!t.allowBooleanAttributes)return h(`InvalidAttr`,`boolean attribute '`+n[e][2]+`' is not allowed.`,v(n[e]));let i=n[e][2];if(!g(i))return h(`InvalidAttr`,`Attribute '`+i+`' is an invalid name.`,v(n[e]));if(r.hasOwnProperty(i))return h(`InvalidAttr`,`Attribute '`+i+`' is repeated.`,v(n[e]));r[i]=1}return!0}function m(e,t){if(e[++t]===`;`)return-1;if(e[t]===`#`)return function(e,t){let n=/\d/;for(e[t]===`x`&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===`;`)return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===`;`)break;return-1}return t}function h(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function g(e){return a(e)}function _(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function v(e){return e.startIndex+e[1].length}let y={preserveOrder:!1,attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},b;b=typeof Symbol==`function`?Symbol(`XML Node Metadata`):`@@xmlMetadata`;class x{constructor(e){this.tagname=e,this.child=[],this[`:@`]={}}add(e,t){e===`__proto__`&&(e=`#__proto__`),this.child.push({[e]:t})}addChild(e,t){e.tagname===`__proto__`&&(e.tagname=`#__proto__`),e[`:@`]&&Object.keys(e[`:@`]).length>0?this.child.push({[e.tagname]:e.child,":@":e[`:@`]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][b]={startIndex:t})}static getMetaDataSymbol(){return b}}function S(e,t){let n={};if(e[t+3]!==`O`||e[t+4]!==`C`||e[t+5]!==`T`||e[t+6]!==`Y`||e[t+7]!==`P`||e[t+8]!==`E`)throw Error(`Invalid Tag instead of DOCTYPE`);{t+=9;let r=1,i=!1,a=!1,o=``;for(;t<e.length;t++)if(e[t]!==`<`||a)if(e[t]===`>`){if(a?e[t-1]===`-`&&e[t-2]===`-`&&(a=!1,r--):r--,r===0)break}else e[t]===`[`?i=!0:o+=e[t];else{if(i&&O(e,`!ENTITY`,t)){let r,i;t+=7,[r,i,t]=w(e,t+1),i.indexOf(`&`)===-1&&(n[r]={regx:RegExp(`&${r};`,`g`),val:i})}else if(i&&O(e,`!ELEMENT`,t)){t+=8;let{index:n}=D(e,t+1);t=n}else if(i&&O(e,`!ATTLIST`,t))t+=8;else if(i&&O(e,`!NOTATION`,t)){t+=9;let{index:n}=T(e,t+1);t=n}else{if(!O(e,`!--`,t))throw Error(`Invalid DOCTYPE`);a=!0}r++,o=``}if(r!==0)throw Error(`Unclosed DOCTYPE`)}return{entities:n,i:t}}let C=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function w(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t])&&e[t]!==`"`&&e[t]!==`'`;)n+=e[t],t++;if(k(n),t=C(e,t),e.substring(t,t+6).toUpperCase()===`SYSTEM`)throw Error(`External entities are not supported`);if(e[t]===`%`)throw Error(`Parameter entities are not supported`);let r=``;return[t,r]=E(e,t,`entity`),[n,r,--t]}function T(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;k(n),t=C(e,t);let r=e.substring(t,t+6).toUpperCase();if(r!==`SYSTEM`&&r!==`PUBLIC`)throw Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=C(e,t);let i=null,a=null;if(r===`PUBLIC`)[t,i]=E(e,t,`publicIdentifier`),e[t=C(e,t)]!==`"`&&e[t]!==`'`||([t,a]=E(e,t,`systemIdentifier`));else if(r===`SYSTEM`&&([t,a]=E(e,t,`systemIdentifier`),!a))throw Error(`Missing mandatory system identifier for SYSTEM notation`);return{notationName:n,publicIdentifier:i,systemIdentifier:a,index:--t}}function E(e,t,n){let r=``,i=e[t];if(i!==`"`&&i!==`'`)throw Error(`Expected quoted string, found "${i}"`);for(t++;t<e.length&&e[t]!==i;)r+=e[t],t++;if(e[t]!==i)throw Error(`Unterminated ${n} value`);return[++t,r]}function D(e,t){t=C(e,t);let n=``;for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!k(n))throw Error(`Invalid element name: "${n}"`);let r=``;if(e[t=C(e,t)]===`E`&&O(e,`MPTY`,t))t+=4;else if(e[t]===`A`&&O(e,`NY`,t))t+=2;else{if(e[t]!==`(`)throw Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&e[t]!==`)`;)r+=e[t],t++;if(e[t]!==`)`)throw Error(`Unterminated content model`)}return{elementName:n,contentModel:r.trim(),index:t}}function O(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function k(e){if(a(e))return e;throw Error(`Invalid entity name ${e}`)}let A=/^[-+]?0x[a-fA-F0-9]+$/,j=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,M={hex:!0,leadingZeros:!0,decimalPoint:`.`,eNotation:!0},N=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function ee(e){return typeof e==`function`?e:Array.isArray(e)?t=>{for(let n of e)if(typeof n==`string`&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}class te{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:`'`},gt:{regex:/&(gt|#62|#x3E);/g,val:`>`},lt:{regex:/&(lt|#60|#x3C);/g,val:`<`},quot:{regex:/&(quot|#34|#x22);/g,val:`"`}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:`&`},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:` `},cent:{regex:/&(cent|#162);/g,val:``},pound:{regex:/&(pound|#163);/g,val:``},yen:{regex:/&(yen|#165);/g,val:``},euro:{regex:/&(euro|#8364);/g,val:``},copyright:{regex:/&(copy|#169);/g,val:``},reg:{regex:/&(reg|#174);/g,val:``},inr:{regex:/&(inr|#8377);/g,val:``},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=ne,this.parseXml=F,this.parseTextData=re,this.resolveNameSpace=ie,this.buildAttributesMap=P,this.isItStopNode=le,this.replaceEntitiesValue=se,this.readStopNodeData=de,this.saveTextToParentTag=ce,this.addChild=oe,this.ignoreAttributesFn=ee(this.options.ignoreAttributes)}}function ne(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];this.lastEntities[r]={regex:RegExp(`&`+r+`;`,`g`),val:e[r]}}}function re(e,t,n,r,i,a,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let r=this.options.tagValueProcessor(t,e,n,i,a);return r==null?e:typeof r!=typeof e||r!==e?r:this.options.trimValues||e.trim()===e?L(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function ie(e){if(this.options.removeNSPrefix){let t=e.split(`:`),n=e.charAt(0)===`/`?`/`:``;if(t[0]===`xmlns`)return``;t.length===2&&(e=n+t[1])}return e}let ae=RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,`gm`);function P(e,t,n){if(!0!==this.options.ignoreAttributes&&typeof e==`string`){let n=i(e,ae),r=n.length,a={};for(let e=0;e<r;e++){let r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let i=n[e][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o===`__proto__`&&(o=`#__proto__`),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let e=this.options.attributeValueProcessor(r,i,t);a[o]=e==null?i:typeof e!=typeof i||e!==i?e:L(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[o]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=a,e}return a}}let F=function(e){e=e.replace(/\r\n?/g,`
`);let t=new x(`!xml`),n=t,r=``,i=``;for(let a=0;a<e.length;a++)if(e[a]===`<`)if(e[a+1]===`/`){let t=I(e,`>`,a,`Closing Tag is not closed.`),o=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){let e=o.indexOf(`:`);e!==-1&&(o=o.substr(e+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(r=this.saveTextToParentTag(r,n,i));let s=i.substring(i.lastIndexOf(`.`)+1);if(o&&this.options.unpairedTags.indexOf(o)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${o}>`);let c=0;s&&this.options.unpairedTags.indexOf(s)!==-1?(c=i.lastIndexOf(`.`,i.lastIndexOf(`.`)-1),this.tagsNodeStack.pop()):c=i.lastIndexOf(`.`),i=i.substring(0,c),n=this.tagsNodeStack.pop(),r=``,a=t}else if(e[a+1]===`?`){let t=ue(e,a,!1,`?>`);if(!t)throw Error(`Pi Tag is not closed.`);if(r=this.saveTextToParentTag(r,n,i),!(this.options.ignoreDeclaration&&t.tagName===`?xml`||this.options.ignorePiTags)){let e=new x(t.tagName);e.add(this.options.textNodeName,``),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[`:@`]=this.buildAttributesMap(t.tagExp,i,t.tagName)),this.addChild(n,e,i,a)}a=t.closeIndex+1}else if(e.substr(a+1,3)===`!--`){let t=I(e,`-->`,a+4,`Comment is not closed.`);if(this.options.commentPropName){let o=e.substring(a+4,t-2);r=this.saveTextToParentTag(r,n,i),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}a=t}else if(e.substr(a+1,2)===`!D`){let t=S(e,a);this.docTypeEntities=t.entities,a=t.i}else if(e.substr(a+1,2)===`![`){let t=I(e,`]]>`,a,`CDATA is not closed.`)-2,o=e.substring(a+9,t);r=this.saveTextToParentTag(r,n,i);let s=this.parseTextData(o,n.tagname,i,!0,!1,!0,!0);s??=``,this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,s),a=t+2}else{let o=ue(e,a,this.options.removeNSPrefix),s=o.tagName,c=o.rawTagName,l=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(s=this.options.transformTagName(s)),n&&r&&n.tagname!==`!xml`&&(r=this.saveTextToParentTag(r,n,i,!1));let f=n;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(n=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf(`.`))),s!==t.tagname&&(i+=i?`.`+s:s);let p=a;if(this.isItStopNode(this.options.stopNodes,i,s)){let t=``;if(l.length>0&&l.lastIndexOf(`/`)===l.length-1)s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),a=o.closeIndex;else if(this.options.unpairedTags.indexOf(s)!==-1)a=o.closeIndex;else{let n=this.readStopNodeData(e,c,d+1);if(!n)throw Error(`Unexpected end of ${c}`);a=n.i,t=n.tagContent}let r=new x(s);s!==l&&u&&(r[`:@`]=this.buildAttributesMap(l,i,s)),t&&=this.parseTextData(t,s,i,!0,u,!0,!0),i=i.substr(0,i.lastIndexOf(`.`)),r.add(this.options.textNodeName,t),this.addChild(n,r,i,p)}else{if(l.length>0&&l.lastIndexOf(`/`)===l.length-1){s[s.length-1]===`/`?(s=s.substr(0,s.length-1),i=i.substr(0,i.length-1),l=s):l=l.substr(0,l.length-1),this.options.transformTagName&&(s=this.options.transformTagName(s));let e=new x(s);s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i,s)),this.addChild(n,e,i,p),i=i.substr(0,i.lastIndexOf(`.`))}else{let e=new x(s);this.tagsNodeStack.push(n),s!==l&&u&&(e[`:@`]=this.buildAttributesMap(l,i,s)),this.addChild(n,e,i,p),n=e}r=``,a=d}}else r+=e[a];return t.child};function oe(e,t,n,r){this.options.captureMetaData||(r=void 0);let i=this.options.updateTag(t.tagname,n,t[`:@`]);!1===i||(typeof i==`string`&&(t.tagname=i),e.addChild(t,r))}let se=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ce(e,t,n,r){return e&&=(r===void 0&&(r=t.child.length===0),(e=this.parseTextData(e,t.tagname,n,!1,!!t[`:@`]&&Object.keys(t[`:@`]).length!==0,r))!==void 0&&e!==``&&t.add(this.options.textNodeName,e),``),e}function le(e,t,n){let r=`*.`+n;for(let n in e){let i=e[n];if(r===i||t===i)return!0}return!1}function I(e,t,n,r){let i=e.indexOf(t,n);if(i===-1)throw Error(r);return i+t.length-1}function ue(e,t,n,r=`>`){let i=function(e,t,n=`>`){let r,i=``;for(let a=t;a<e.length;a++){let t=e[a];if(r)t===r&&(r=``);else if(t===`"`||t===`'`)r=t;else if(t===n[0]){if(!n[1]||e[a+1]===n[1])return{data:i,index:a}}else t===`	`&&(t=` `);i+=t}}(e,t+1,r);if(!i)return;let a=i.data,o=i.index,s=a.search(/\s/),c=a,l=!0;s!==-1&&(c=a.substring(0,s),a=a.substring(s+1).trimStart());let u=c;if(n){let e=c.indexOf(`:`);e!==-1&&(c=c.substr(e+1),l=c!==i.data.substr(e+1))}return{tagName:c,tagExp:a,closeIndex:o,attrExpPresent:l,rawTagName:u}}function de(e,t,n){let r=n,i=1;for(;n<e.length;n++)if(e[n]===`<`)if(e[n+1]===`/`){let a=I(e,`>`,n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(i--,i===0))return{tagContent:e.substring(r,n),i:a};n=a}else if(e[n+1]===`?`)n=I(e,`?>`,n+1,`StopNode is not closed.`);else if(e.substr(n+1,3)===`!--`)n=I(e,`-->`,n+3,`StopNode is not closed.`);else if(e.substr(n+1,2)===`![`)n=I(e,`]]>`,n,`StopNode is not closed.`)-2;else{let r=ue(e,n,`>`);r&&((r&&r.tagName)===t&&r.tagExp[r.tagExp.length-1]!==`/`&&i++,n=r.closeIndex)}}function L(e,t,n){if(t&&typeof e==`string`){let t=e.trim();return t===`true`||t!==`false`&&function(e,t={}){if(t=Object.assign({},M,t),!e||typeof e!=`string`)return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e===`0`)return 0;if(t.hex&&A.test(n))return function(e){if(parseInt)return parseInt(e,16);if(Number.parseInt)return Number.parseInt(e,16);if(window&&window.parseInt)return window.parseInt(e,16);throw Error(`parseInt, Number.parseInt, window.parseInt are not supported`)}(n);if(n.search(/.+[eE].+/)!==-1)return function(e,t,n){if(!n.eNotation)return e;let r=t.match(N);if(r){let i=r[1]||``,a=r[3].indexOf(`e`)===-1?`E`:`e`,o=r[2],s=i?e[o.length+1]===a:e[o.length]===a;return o.length>1&&s?e:o.length!==1||!r[3].startsWith(`.${a}`)&&r[3][0]!==a?n.leadingZeros&&!s?(t=(r[1]||``)+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{let i=j.exec(n);if(i){let a=i[1]||``,o=i[2],s=((r=i[3])&&r.indexOf(`.`)!==-1&&((r=r.replace(/0+$/,``))===`.`?r=`0`:r[0]===`.`?r=`0`+r:r[r.length-1]===`.`&&(r=r.substring(0,r.length-1))),r),c=a?e[o.length+1]===`.`:e[o.length]===`.`;if(!t.leadingZeros&&(o.length>1||o.length===1&&!c))return e;{let r=Number(n),i=String(r);if(r===0||r===-0)return r;if(i.search(/[eE]/)!==-1)return t.eNotation?r:e;if(n.indexOf(`.`)!==-1)return i===`0`||i===s||i===`${a}${s}`?r:e;let c=o?s:n;return o?c===i||a+c===i?r:e:c===i||c===a+i?r:e}}return e}var r}(e,n)}return e===void 0?``:e}let fe=x.getMetaDataSymbol();function pe(e,t){return me(e,t)}function me(e,t,n){let r,i={};for(let a=0;a<e.length;a++){let o=e[a],s=he(o),c=``;if(c=n===void 0?s:n+`.`+s,s===t.textNodeName)r===void 0?r=o[s]:r+=``+o[s];else{if(s===void 0)continue;if(o[s]){let e=me(o[s],t,c),n=_e(e,t);o[fe]!==void 0&&(e[fe]=o[fe]),o[`:@`]?ge(e,o[`:@`],c,t):Object.keys(e).length!==1||e[t.textNodeName]===void 0||t.alwaysCreateTextNode?Object.keys(e).length===0&&(t.alwaysCreateTextNode?e[t.textNodeName]=``:e=``):e=e[t.textNodeName],i[s]!==void 0&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(e)):t.isArray(s,c,n)?i[s]=[e]:i[s]=e}}}return typeof r==`string`?r.length>0&&(i[t.textNodeName]=r):r!==void 0&&(i[t.textNodeName]=r),i}function he(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let n=t[e];if(n!==`:@`)return n}}function ge(e,t,n,r){if(t){let i=Object.keys(t),a=i.length;for(let o=0;o<a;o++){let a=i[o];r.isArray(a,n+`.`+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function _e(e,t){let{textNodeName:n}=t,r=Object.keys(e).length;return r===0||!(r!==1||!e[n]&&typeof e[n]!=`boolean`&&e[n]!==0)}class ve{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},y,e)}(e)}parse(e,t){if(typeof e!=`string`){if(!e.toString)throw Error(`XML data is accepted in String or Bytes[] form.`);e=e.toString()}if(t){!0===t&&(t={});let n=s(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}let n=new te(this.options);n.addExternalEntities(this.externalEntities);let r=n.parseXml(e);return this.options.preserveOrder||r===void 0?r:pe(r,this.options)}addEntity(e,t){if(t.indexOf(`&`)!==-1)throw Error(`Entity value can't have '&'`);if(e.indexOf(`&`)!==-1||e.indexOf(`;`)!==-1)throw Error(`An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'`);if(t===`&`)throw Error(`An entity with value '&' is not permitted`);this.externalEntities[e]=t}static getMetaDataSymbol(){return x.getMetaDataSymbol()}}function ye(e,t){let n=``;return t.format&&t.indentBy.length>0&&(n=`
`),be(e,t,``,n)}function be(e,t,n,r){let i=``,a=!1;for(let o=0;o<e.length;o++){let s=e[o],c=xe(s);if(c===void 0)continue;let l=``;if(l=n.length===0?c:`${n}.${c}`,c===t.textNodeName){let e=s[c];Ce(l,t)||(e=t.tagValueProcessor(c,e),e=we(e,t)),a&&(i+=r),i+=e,a=!1;continue}if(c===t.cdataPropName){a&&(i+=r),i+=`<![CDATA[${s[c][0][t.textNodeName]}]]>`,a=!1;continue}if(c===t.commentPropName){i+=r+`\x3c!--${s[c][0][t.textNodeName]}--\x3e`,a=!0;continue}if(c[0]===`?`){let e=Se(s[`:@`],t),n=c===`?xml`?``:r,o=s[c][0][t.textNodeName];o=o.length===0?``:` `+o,i+=n+`<${c}${o}${e}?>`,a=!0;continue}let u=r;u!==``&&(u+=t.indentBy);let d=r+`<${c}${Se(s[`:@`],t)}`,f=be(s[c],t,l,u);t.unpairedTags.indexOf(c)===-1?f&&f.length!==0||!t.suppressEmptyNode?f&&f.endsWith(`>`)?i+=d+`>${f}${r}</${c}>`:(i+=d+`>`,f&&r!==``&&(f.includes(`/>`)||f.includes(`</`))?i+=r+t.indentBy+f+r:i+=f,i+=`</${c}>`):i+=d+`/>`:t.suppressUnpairedNode?i+=d+`>`:i+=d+`/>`,a=!0}return i}function xe(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(e.hasOwnProperty(r)&&r!==`:@`)return r}}function Se(e,t){let n=``;if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let i=t.attributeValueProcessor(r,e[r]);i=we(i,t),!0===i&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function Ce(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(`.`)+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]===`*.`+n)return!0;return!1}function we(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let r=t.entities[n];e=e.replace(r.regex,r.val)}return e}let Te={attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:`  `,suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:RegExp(`&`,`g`),val:`&amp;`},{regex:RegExp(`>`,`g`),val:`&gt;`},{regex:RegExp(`<`,`g`),val:`&lt;`},{regex:RegExp(`'`,`g`),val:`&apos;`},{regex:RegExp(`"`,`g`),val:`&quot;`}],processEntities:!0,stopNodes:[],oneListGroup:!1};function R(e){this.options=Object.assign({},Te,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=ee(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Oe),this.processTextOrObjNode=Ee,this.options.format?(this.indentate=De,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return``},this.tagEndChar=`>`,this.newLine=``)}function Ee(e,t,n,r){let i=this.j2x(e,n+1,r.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjectNode(i.val,t,i.attrStr,n)}function De(e){return this.options.indentBy.repeat(e)}function Oe(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}R.prototype.build=function(e){return this.options.preserveOrder?ye(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},R.prototype.j2x=function(e,t,n){let r=``,i=``,a=n.join(`.`);for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(e[o]===void 0)this.isAttribute(o)&&(i+=``);else if(e[o]===null)this.isAttribute(o)||o===this.options.cdataPropName?i+=``:o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(e[o]instanceof Date)i+=this.buildTextValNode(e[o],o,``,t);else if(typeof e[o]!=`object`){let n=this.isAttribute(o);if(n&&!this.ignoreAttributesFn(n,a))r+=this.buildAttrPairStr(n,``+e[o]);else if(!n)if(o===this.options.textNodeName){let t=this.options.tagValueProcessor(o,``+e[o]);i+=this.replaceEntitiesValue(t)}else i+=this.buildTextValNode(e[o],o,``,t)}else if(Array.isArray(e[o])){let r=e[o].length,a=``,s=``;for(let c=0;c<r;c++){let r=e[o][c];if(r!==void 0)if(r===null)o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(typeof r==`object`)if(this.options.oneListGroup){let e=this.j2x(r,t+1,n.concat(o));a+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(s+=e.attrStr)}else a+=this.processTextOrObjNode(r,o,t,n);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(o,r);e=this.replaceEntitiesValue(e),a+=e}else a+=this.buildTextValNode(r,o,``,t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,s,t)),i+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],``+e[o][t[i]])}else i+=this.processTextOrObjNode(e[o],o,t,n);return{attrStr:r,val:i}},R.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,``+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t===`true`?` `+e:` `+e+`="`+t+`"`},R.prototype.buildObjectNode=function(e,t,n,r){if(e===``)return t[0]===`?`?this.indentate(r)+`<`+t+n+`?`+this.tagEndChar:this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar;{let i=`</`+t+this.tagEndChar,a=``;return t[0]===`?`&&(a=`?`,i=``),!n&&n!==``||e.indexOf(`<`)!==-1?!1!==this.options.commentPropName&&t===this.options.commentPropName&&a.length===0?this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(r)+`<`+t+n+a+this.tagEndChar+e+this.indentate(r)+i:this.indentate(r)+`<`+t+n+a+`>`+e+i}},R.prototype.closeTag=function(e){let t=``;return this.options.unpairedTags.indexOf(e)===-1?t=this.options.suppressEmptyNode?`/`:`></${e}`:this.options.suppressUnpairedNode||(t=`/`),t},R.prototype.buildTextValNode=function(e,t,n,r){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine;if(t[0]===`?`)return this.indentate(r)+`<`+t+n+`?`+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===``?this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+`<`+t+n+`>`+i+`</`+t+this.tagEndChar}},R.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};let ke={validate:s};t.exports=n})()})),zc=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.parseXML=n;let t=new(Rc()).XMLParser({attributeNamePrefix:``,htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===``&&t.includes(`
`)?``:void 0});t.addEntity(`#xD`,`\r`),t.addEntity(`#10`,`
`);function n(e){return t.parse(e,!0)}})),Bc=s((e=>{var t=zc();function n(e){return e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`)}function r(e){return e.replace(/&/g,`&amp;`).replace(/"/g,`&quot;`).replace(/'/g,`&apos;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/\r/g,`&#x0D;`).replace(/\n/g,`&#x0A;`).replace(/\u0085/g,`&#x85;`).replace(/\u2028/,`&#x2028;`)}var i=class{value;constructor(e){this.value=e}toString(){return r(``+this.value)}},a=class e{name;children;attributes={};static of(t,n,r){let a=new e(t);return n!==void 0&&a.addChildNode(new i(n)),r!==void 0&&a.withName(r),a}constructor(e,t=[]){this.name=e,this.children=t}withName(e){return this.name=e,this}addAttribute(e,t){return this.attributes[e]=t,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,t){return t!=null&&(this.attributes[e]=t),this}cc(t,n,r=n){if(t[n]!=null){let i=e.of(n,t[n]).withName(r);this.c(i)}}l(e,t,n,r){e[t]!=null&&r().map(e=>{e.withName(n),this.c(e)})}lc(t,n,r,i){if(t[n]!=null){let t=i(),n=new e(r);t.map(e=>{n.c(e)}),this.c(n)}}toString(){let e=!!this.children.length,t=`<${this.name}`,r=this.attributes;for(let e of Object.keys(r)){let i=r[e];i!=null&&(t+=` ${e}="${n(``+i)}"`)}return t+=e?`>${this.children.map(e=>e.toString()).join(``)}</${this.name}>`:`/>`}};Object.defineProperty(e,`parseXML`,{enumerable:!0,get:function(){return t.parseXML}}),e.XmlNode=a,e.XmlText=i})),Vc,Hc,Uc,Wc,Gc=o((()=>{Vc=Bc(),ra(),V(),Hc=K(),Uc=R(),nc(),Wc=class extends tc{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new Ki(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,t,n){let r=z.of(e),i=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&Object.values(i).find(e=>!!e.getMemberTraits().eventPayload)){let e={},n=Object.keys(i)[0];return i[n].isBlobSchema()?e[n]=t:e[n]=this.read(i[n],t),e}let a=(this.serdeContext?.utf8Encoder??Uc.toUtf8)(t),o=this.parseXml(a);return this.readSchema(e,n?o[n]:o)}readSchema(e,t){let n=z.of(e);if(n.isUnitSchema())return;let r=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(t))return this.readSchema(n,[t]);if(t==null)return t;if(typeof t==`object`){let e=!!r.sparse,i=!!r.xmlFlattened;if(n.isListSchema()){let r=n.getValueSchema(),a=[],o=r.getMergedTraits().xmlName??`member`,s=i?t:(t[0]??t)[o],c=Array.isArray(s)?s:[s];for(let t of c)(t!=null||e)&&a.push(this.readSchema(r,t));return a}let a={};if(n.isMapSchema()){let r=n.getKeySchema(),o=n.getValueSchema(),s;s=i?Array.isArray(t)?t:[t]:Array.isArray(t.entry)?t.entry:[t.entry];let c=r.getMergedTraits().xmlName??`key`,l=o.getMergedTraits().xmlName??`value`;for(let t of s){let n=t[c],r=t[l];(r!=null||e)&&(a[n]=this.readSchema(o,r))}return a}if(n.isStructSchema()){for(let[e,r]of n.structIterator()){let n=r.getMergedTraits(),i=n.httpPayload?n.xmlName??r.getName():r.getMemberTraits().xmlName??e;t[i]!=null&&(a[e]=this.readSchema(r,t[i]))}return a}if(n.isDocumentSchema())return t;throw Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,t)}parseXml(e){if(e.length){let t;try{t=(0,Vc.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,Hc.getValueFromTextNode)(i)}return{}}}})),Kc,qc,Jc,Yc=o((()=>{ra(),V(),vi(),Kc=K(),qc=De(),nc(),ac(),Jc=class extends tc{settings;buffer;constructor(e){super(),this.settings=e}write(e,t,n=``){this.buffer===void 0&&(this.buffer=``);let r=z.of(e);if(n&&!n.endsWith(`.`)&&(n+=`.`),r.isBlobSchema())(typeof t==`string`||t instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??qc.toBase64)(t)));else if(r.isBooleanSchema()||r.isNumericSchema()||r.isStringSchema())t==null?r.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Hr.v4)())):(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigIntegerSchema())t!=null&&(this.writeKey(n),this.writeValue(String(t)));else if(r.isBigDecimalSchema())t!=null&&(this.writeKey(n),this.writeValue(t instanceof hi?t.string:String(t)));else if(r.isTimestampSchema()){if(t instanceof Date)switch(this.writeKey(n),Hi(r,this.settings)){case 5:this.writeValue(t.toISOString().replace(`.000Z`,`Z`));break;case 6:this.writeValue((0,Kc.dateToUtcString)(t));break;case 7:this.writeValue(String(t.getTime()/1e3));break}}else if(r.isDocumentSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${r.getName(!0)}`);else if(r.isListSchema()){if(Array.isArray(t))if(t.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(``));else{let e=r.getValueSchema(),i=this.settings.flattenLists||r.getMergedTraits().xmlFlattened,a=1;for(let r of t){if(r==null)continue;let t=this.getKey(`member`,e.getMergedTraits().xmlName),o=i?`${n}${a}`:`${n}${t}.${a}`;this.write(e,r,o),++a}}}else if(r.isMapSchema()){if(t&&typeof t==`object`){let e=r.getKeySchema(),i=r.getValueSchema(),a=r.getMergedTraits().xmlFlattened,o=1;for(let[r,s]of Object.entries(t)){if(s==null)continue;let t=this.getKey(`key`,e.getMergedTraits().xmlName),c=a?`${n}${o}.${t}`:`${n}entry.${o}.${t}`,l=this.getKey(`value`,i.getMergedTraits().xmlName),u=a?`${n}${o}.${l}`:`${n}entry.${o}.${l}`;this.write(e,r,c),this.write(i,s,u),++o}}}else if(r.isStructSchema()){if(t&&typeof t==`object`)for(let[e,i]of rc(r,t)){if(t[e]==null&&!i.isIdempotencyToken())continue;let r=this.getKey(e,i.getMergedTraits().xmlName),a=`${n}${r}`;this.write(i,t[e],a)}}else if(!r.isUnitSchema())throw Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${r.getName(!0)}`)}flush(){if(this.buffer===void 0)throw Error(`@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.`);let e=this.buffer;return delete this.buffer,e}getKey(e,t){let n=t??e;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(e){e.endsWith(`.`)&&(e=e.slice(0,e.length-1)),this.buffer+=`&${Qe(e)}=`}writeValue(e){this.buffer+=Qe(e)}}})),Xc,Zc=o((()=>{ra(),V(),Js(),Gc(),Yc(),Xc=class extends Pi{options;serializer;deserializer;mixin=new qs;constructor(e){super({defaultNamespace:e.defaultNamespace}),this.options=e;let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Jc(t),this.deserializer=new Wc(t)}getShapeId(){return`aws.protocols#awsQuery`}setSerdeContext(e){this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e)}getPayloadCodec(){throw Error(`AWSQuery protocol has no payload codec.`)}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n);return r.path.endsWith(`/`)||(r.path+=`/`),Object.assign(r.headers,{"content-type":`application/x-www-form-urlencoded`}),(et(e.input)===`unit`||!r.body)&&(r.body=``),r.body=`Action=${e.name.split(`#`)[1]??e.name}&Version=${this.options.version}`+r.body,r.body.endsWith(`&`)&&(r.body=r.body.slice(-1)),r}async deserializeResponse(e,t,n){let r=this.deserializer,i=z.of(e.output),a={};if(n.statusCode>=300){let i=await Xe(n.body,t);i.byteLength>0&&Object.assign(a,await r.read(15,i)),await this.handleError(e,t,n,a,this.deserializeMetadata(n))}for(let e in n.headers){let t=n.headers[e];delete n.headers[e],n.headers[e.toLowerCase()]=t}let o=e.name.split(`#`)[1]??e.name,s=i.isStructSchema()&&this.useNestedResult()?o+`Result`:void 0,c=await Xe(n.body,t);return c.byteLength>0&&Object.assign(a,await r.read(i,c,s)),{$metadata:this.deserializeMetadata(n),...a}}useNestedResult(){return!0}async handleError(e,t,n,r,i){let a=this.loadQueryErrorCode(n,r)??`Unknown`,o=this.loadQueryError(r),s=this.loadQueryErrorMessage(r);o.message=s,o.Error={Type:o.Type,Code:o.Code,Message:s};let{errorSchema:c,errorMetadata:l}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,o,i,this.mixin.findQueryCompatibleError),u=z.of(c),d=new((B.for(c[1]).getErrorCtor(c))??Error)(s),f={Type:o.Error.Type,Code:o.Error.Code,Error:o.Error};for(let[e,t]of u.structIterator()){let n=t.getMergedTraits().xmlName??e,i=o[n]??r[n];f[e]=this.deserializer.readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(d,l,{$fault:u.getMergedTraits().error,message:s},f),r)}loadQueryErrorCode(e,t){let n=(t.Errors?.[0]?.Error??t.Errors?.Error??t.Error)?.Code;if(n!==void 0)return n;if(e.statusCode==404)return`NotFound`}loadQueryError(e){return e.Errors?.[0]?.Error??e.Errors?.Error??e.Error}loadQueryErrorMessage(e){let t=this.loadQueryError(e);return t?.message??t?.Message??e.message??e.Message??`Unknown`}getDefaultContentType(){return`application/x-www-form-urlencoded`}}})),Qc,$c=o((()=>{Zc(),Qc=class extends Xc{options;constructor(e){super(e),this.options=e,Object.assign(this.serializer.settings,{capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1})}useNestedResult(){return!1}}})),el,tl,nl,rl,il,al=o((()=>{el=Bc(),tl=K(),dc(),nl=(e,t)=>uc(e,t).then(e=>{if(e.length){let t;try{t=(0,el.parseXML)(e)}catch(t){throw t&&typeof t==`object`&&Object.defineProperty(t,`$responseBodyText`,{value:e}),t}let n=`#text`,r=Object.keys(t)[0],i=t[r];return i[n]&&(i[r]=i[n],delete i[n]),(0,tl.getValueFromTextNode)(i)}return{}}),rl=async(e,t)=>{let n=await nl(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},il=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return`NotFound`}})),ol,sl,cl,ll,ul=o((()=>{ol=Bc(),ra(),V(),vi(),sl=K(),cl=De(),nc(),ac(),ll=class extends tc{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,t){let n=z.of(e);if(n.isStringSchema()&&typeof t==`string`)this.stringBuffer=t;else if(n.isBlobSchema())this.byteBuffer=`byteLength`in t?t:(this.serdeContext?.base64Decoder??cl.fromBase64)(t);else{this.buffer=this.writeStruct(n,t,void 0);let e=n.getMergedTraits();e.httpPayload&&!e.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let e=this.byteBuffer;return delete this.byteBuffer,e}if(this.stringBuffer!==void 0){let e=this.stringBuffer;return delete this.stringBuffer,e}let e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute(`xmlns`,this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,t,n){let r=e.getMergedTraits(),i=e.isMemberSchema()&&!r.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():r.xmlName??e.getName();if(!i||!e.isStructSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);let a=ol.XmlNode.of(i),[o,s]=this.getXmlnsAttribute(e,n);for(let[n,r]of rc(e,t)){let e=t[n];if(e!=null||r.isIdempotencyToken()){if(r.getMergedTraits().xmlAttribute){a.addAttribute(r.getMergedTraits().xmlName??n,this.writeSimple(r,e));continue}if(r.isListSchema())this.writeList(r,e,a,s);else if(r.isMapSchema())this.writeMap(r,e,a,s);else if(r.isStructSchema())a.addChildNode(this.writeStruct(r,e,s));else{let t=ol.XmlNode.of(r.getMergedTraits().xmlName??r.getMemberName());this.writeSimpleInto(r,e,t,s),a.addChildNode(t)}}}return s&&a.addAttribute(o,s),a}writeList(e,t,n,r){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);let i=e.getMergedTraits(),a=e.getValueSchema(),o=a.getMergedTraits(),s=!!o.sparse,c=!!i.xmlFlattened,[l,u]=this.getXmlnsAttribute(e,r),d=(t,n)=>{if(a.isListSchema())this.writeList(a,Array.isArray(n)?n:[n],t,u);else if(a.isMapSchema())this.writeMap(a,n,t,u);else if(a.isStructSchema()){let r=this.writeStruct(a,n,u);t.addChildNode(r.withName(c?i.xmlName??e.getMemberName():o.xmlName??`member`))}else{let r=ol.XmlNode.of(c?i.xmlName??e.getMemberName():o.xmlName??`member`);this.writeSimpleInto(a,n,r,u),t.addChildNode(r)}};if(c)for(let e of t)(s||e!=null)&&d(n,e);else{let r=ol.XmlNode.of(i.xmlName??e.getMemberName());u&&r.addAttribute(l,u);for(let e of t)(s||e!=null)&&d(r,e);n.addChildNode(r)}}writeMap(e,t,n,r,i=!1){if(!e.isMemberSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);let a=e.getMergedTraits(),o=e.getKeySchema(),s=o.getMergedTraits().xmlName??`key`,c=e.getValueSchema(),l=c.getMergedTraits(),u=l.xmlName??`value`,d=!!l.sparse,f=!!a.xmlFlattened,[p,m]=this.getXmlnsAttribute(e,r),h=(e,t,n)=>{let r=ol.XmlNode.of(s,t),[i,a]=this.getXmlnsAttribute(o,m);a&&r.addAttribute(i,a),e.addChildNode(r);let l=ol.XmlNode.of(u);c.isListSchema()?this.writeList(c,n,l,m):c.isMapSchema()?this.writeMap(c,n,l,m,!0):c.isStructSchema()?l=this.writeStruct(c,n,m):this.writeSimpleInto(c,n,l,m),e.addChildNode(l)};if(f){for(let[r,i]of Object.entries(t))if(d||i!=null){let t=ol.XmlNode.of(a.xmlName??e.getMemberName());h(t,r,i),n.addChildNode(t)}}else{let r;i||(r=ol.XmlNode.of(a.xmlName??e.getMemberName()),m&&r.addAttribute(p,m),n.addChildNode(r));for(let[e,a]of Object.entries(t))if(d||a!=null){let t=ol.XmlNode.of(`entry`);h(t,e,a),(i?n:r).addChildNode(t)}}}writeSimple(e,t){if(t===null)throw Error(`@aws-sdk/core/protocols - (XML serializer) cannot write null value.`);let n=z.of(e),r=null;if(t&&typeof t==`object`)if(n.isBlobSchema())r=(this.serdeContext?.base64Encoder??cl.toBase64)(t);else if(n.isTimestampSchema()&&t instanceof Date)switch(Hi(n,this.settings)){case 5:r=t.toISOString().replace(`.000Z`,`Z`);break;case 6:r=(0,sl.dateToUtcString)(t);break;case 7:r=String(t.getTime()/1e3);break;default:console.warn(`Missing timestamp format, using http date`,t),r=(0,sl.dateToUtcString)(t);break}else if(n.isBigDecimalSchema()&&t)return t instanceof hi?t.string:String(t);else if(n.isMapSchema()||n.isListSchema())throw Error(`@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead.`);else throw Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`);if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(r=String(t)),n.isStringSchema()&&(r=t===void 0&&n.isIdempotencyToken()?(0,Hr.v4)():String(t)),r===null)throw Error(`Unhandled schema-value pair ${n.getName(!0)}=${t}`);return r}writeSimpleInto(e,t,n,r){let i=this.writeSimple(e,t),a=z.of(e),o=new ol.XmlText(i),[s,c]=this.getXmlnsAttribute(a,r);c&&n.addAttribute(s,c),n.addChildNode(o)}getXmlnsAttribute(e,t){let[n,r]=e.getMergedTraits().xmlNamespace??[];return r&&r!==t?[n?`xmlns:${n}`:`xmlns`,r]:[void 0,void 0]}}})),dl,fl=o((()=>{nc(),Gc(),ul(),dl=class extends tc{settings;constructor(e){super(),this.settings=e}createSerializer(){let e=new ll(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new Wc(this.settings);return e.setSerdeContext(this.serdeContext),e}}})),pl,ml=o((()=>{ra(),V(),Js(),al(),fl(),pl=class extends ji{codec;serializer;deserializer;mixin=new qs;constructor(e){super(e);let t={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new dl(t),this.serializer=new ea(this.codec.createSerializer(),t),this.deserializer=new Yi(this.codec.createDeserializer(),t)}getPayloadCodec(){return this.codec}getShapeId(){return`aws.protocols#restXml`}async serializeRequest(e,t,n){let r=await super.serializeRequest(e,t,n),i=z.of(e.input);if(!r.headers[`content-type`]){let e=this.mixin.resolveRestContentType(this.getDefaultContentType(),i);e&&(r.headers[`content-type`]=e)}return r.headers[`content-type`]===this.getDefaultContentType()&&typeof r.body==`string`&&(r.body.startsWith(`<?xml `)||(r.body=`<?xml version="1.0" encoding="UTF-8"?>`+r.body)),r}async deserializeResponse(e,t,n){return super.deserializeResponse(e,t,n)}async handleError(e,t,n,r,i){let a=il(n,r)??`Unknown`,{errorSchema:o,errorMetadata:s}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,n,r,i),c=z.of(o),l=r.Error?.message??r.Error?.Message??r.message??r.Message??`Unknown`,u=new((B.for(o[1]).getErrorCtor(o))??Error)(l);await this.deserializeHttpMessage(o,t,n,r);let d={};for(let[e,t]of c.structIterator()){let n=t.getMergedTraits().xmlName??e,i=r.Error?.[n]??r[n];d[e]=this.codec.createDeserializer().readSchema(t,i)}throw this.mixin.decorateServiceException(Object.assign(u,s,{$fault:c.getMergedTraits().error,message:l},d),r)}getDefaultContentType(){return`application/xml`}}})),hl=c({AwsEc2QueryProtocol:()=>Qc,AwsJson1_0Protocol:()=>kc,AwsJson1_1Protocol:()=>jc,AwsJsonRpcProtocol:()=>Dc,AwsQueryProtocol:()=>Xc,AwsRestJsonProtocol:()=>Nc,AwsRestXmlProtocol:()=>pl,AwsSmithyRpcV2CborProtocol:()=>Ys,JsonCodec:()=>Tc,JsonShapeDeserializer:()=>_c,JsonShapeSerializer:()=>Cc,XmlCodec:()=>dl,XmlShapeDeserializer:()=>Wc,XmlShapeSerializer:()=>ll,_toBool:()=>Qs,_toNum:()=>$s,_toStr:()=>Zs,awsExpectUnion:()=>Ic,loadRestJsonErrorCode:()=>mc,loadRestXmlErrorCode:()=>il,parseJsonBody:()=>fc,parseJsonErrorBody:()=>pc,parseXmlBody:()=>nl,parseXmlErrorBody:()=>rl}),gl=o((()=>{Xs(),ec(),Ac(),Mc(),Oc(),Pc(),Ec(),vc(),wc(),Lc(),hc(),$c(),Zc(),ml(),fl(),Gc(),ul(),al()})),_l=c({AWSSDKSigV4Signer:()=>ro,AwsEc2QueryProtocol:()=>Qc,AwsJson1_0Protocol:()=>kc,AwsJson1_1Protocol:()=>jc,AwsJsonRpcProtocol:()=>Dc,AwsQueryProtocol:()=>Xc,AwsRestJsonProtocol:()=>Nc,AwsRestXmlProtocol:()=>pl,AwsSdkSigV4ASigner:()=>oo,AwsSdkSigV4Signer:()=>no,AwsSmithyRpcV2CborProtocol:()=>Ys,JsonCodec:()=>Tc,JsonShapeDeserializer:()=>_c,JsonShapeSerializer:()=>Cc,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>ho,NODE_SIGV4A_CONFIG_OPTIONS:()=>bo,XmlCodec:()=>dl,XmlShapeDeserializer:()=>Wc,XmlShapeSerializer:()=>ll,_toBool:()=>Qs,_toNum:()=>$s,_toStr:()=>Zs,awsExpectUnion:()=>Ic,emitWarningIfUnsupportedVersion:()=>Na,getBearerTokenEnvKey:()=>uo,loadRestJsonErrorCode:()=>mc,loadRestXmlErrorCode:()=>il,parseJsonBody:()=>fc,parseJsonErrorBody:()=>pc,parseXmlBody:()=>nl,parseXmlErrorBody:()=>rl,resolveAWSSDKSigV4Config:()=>Do,resolveAwsSdkSigV4AConfig:()=>yo,resolveAwsSdkSigV4Config:()=>Eo,setCredentialFeature:()=>Fa,setFeature:()=>La,setTokenFeature:()=>za,state:()=>Ma,validateSigningProperties:()=>to}),vl=o((()=>{Ha(),jo(),gl()})),yl=s((e=>{var t=(Da(),d(Ea)),n=ja(),r=p(),i=(vl(),d(_l));function a(e){return e===void 0?!0:typeof e==`string`&&e.length<=50}function o(e){let n=t.normalizeProvider(e.userAgentAppId??void 0),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r==`string`?[[r]]:r,userAgentAppId:async()=>{let t=await n();if(!a(t)){let n=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?console:e.logger;typeof t==`string`?t.length>50&&n?.warn(`The provided userAgentAppId exceeds the maximum length of 50 characters.`):n?.warn(`userAgentAppId must be a string or undefined.`)}return t}})}let s=/\d{12}\.ddb/;async function c(e,t,n){if(n.request?.headers?.[`smithy-protocol`]===`rpc-v2-cbor`&&i.setFeature(e,`PROTOCOL_RPC_V2_CBOR`,`M`),typeof t.retryStrategy==`function`){let n=await t.retryStrategy();typeof n.acquireInitialRetryToken==`function`?n.constructor?.name?.includes(`Adaptive`)?i.setFeature(e,`RETRY_MODE_ADAPTIVE`,`F`):i.setFeature(e,`RETRY_MODE_STANDARD`,`E`):i.setFeature(e,`RETRY_MODE_LEGACY`,`D`)}if(typeof t.accountIdEndpointMode==`function`){let n=e.endpointV2;switch(String(n?.url?.hostname).match(s)&&i.setFeature(e,`ACCOUNT_ID_ENDPOINT`,`O`),await t.accountIdEndpointMode?.()){case`disabled`:i.setFeature(e,`ACCOUNT_ID_MODE_DISABLED`,`Q`);break;case`preferred`:i.setFeature(e,`ACCOUNT_ID_MODE_PREFERRED`,`P`);break;case`required`:i.setFeature(e,`ACCOUNT_ID_MODE_REQUIRED`,`R`);break}}let r=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){let t=r;t.accountId&&i.setFeature(e,`RESOLVED_ACCOUNT_ID`,`T`);for(let[n,r]of Object.entries(t.$source??{}))i.setFeature(e,n,r)}}let l=`user-agent`,u=`x-amz-user-agent`,f=/[^!$%&'*+\-.^_`|~\w]/g,m=/[^!$%&'*+\-.^_`|~\w#]/g;function h(e){let t=``;for(let n in e){let r=e[n];if(t.length+r.length+1<=1024){t.length?t+=`,`+r:t+=r;continue}break}return t}let g=e=>(t,i)=>async a=>{let{request:o}=a;if(!r.HttpRequest.isInstance(o))return t(a);let{headers:s}=o,d=i?.userAgent?.map(_)||[],f=(await e.defaultUserAgentProvider()).map(_);await c(i,e,a);let p=i;f.push(`m/${h(Object.assign({},i.__smithy_context?.features,p.__aws_sdk_context?.features))}`);let m=e?.customUserAgent?.map(_)||[],g=await e.userAgentAppId();g&&f.push(_([`app`,`${g}`]));let v=n.getUserAgentPrefix(),y=(v?[v]:[]).concat([...f,...d,...m]).join(` `),b=[...f.filter(e=>e.startsWith(`aws-sdk-`)),...m].join(` `);return e.runtime===`browser`?s[u]=y:(b&&(s[u]=s[u]?`${s[l]} ${b}`:b),s[l]=y),t({...a,request:o})},_=e=>{let t=e[0].split(`/`).map(e=>e.replace(f,`-`)).join(`/`),n=e[1]?.replace(m,`-`),r=t.indexOf(`/`),i=t.substring(0,r),a=t.substring(r+1);return i===`api`&&(a=a.toLowerCase()),[i,a,n].filter(e=>e&&e.length>0).reduce((e,t,n)=>{switch(n){case 0:return t;case 1:return`${e}/${t}`;default:return`${e}#${t}`}},``)},v={name:`getUserAgentMiddleware`,step:`build`,priority:`low`,tags:[`SET_USER_AGENT`,`USER_AGENT`],override:!0};e.DEFAULT_UA_APP_ID=void 0,e.getUserAgentMiddlewareOptions=v,e.getUserAgentPlugin=e=>({applyToStack:t=>{t.add(g(e),v)}}),e.resolveUserAgentConfig=o,e.userAgentMiddleware=g})),bl=s((e=>{e.SelectorType=void 0,(function(e){e.ENV=`env`,e.CONFIG=`shared config entry`})(e.SelectorType||={}),e.booleanSelector=(e,t,n)=>{if(t in e){if(e[t]===`true`)return!0;if(e[t]===`false`)return!1;throw Error(`Cannot load ${n} "${t}". Expected "true" or "false", got ${e[t]}.`)}},e.numberSelector=(e,t,n)=>{if(!(t in e))return;let r=parseInt(e[t],10);if(Number.isNaN(r))throw TypeError(`Cannot load ${n} '${t}'. Expected number, got '${e[t]}'.`);return r}})),xl=s((e=>{var t=bl(),n=k(),r=Oa();let i=`AWS_USE_DUALSTACK_ENDPOINT`,a=`use_dualstack_endpoint`,o={environmentVariableSelector:e=>t.booleanSelector(e,i,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,a,t.SelectorType.CONFIG),default:!1},s=`AWS_USE_FIPS_ENDPOINT`,c=`use_fips_endpoint`,l={environmentVariableSelector:e=>t.booleanSelector(e,s,t.SelectorType.ENV),configFileSelector:e=>t.booleanSelector(e,c,t.SelectorType.CONFIG),default:!1},u=e=>{let{tls:t,endpoint:r,urlParser:i,useDualstackEndpoint:a}=e;return Object.assign(e,{tls:t??!0,endpoint:n.normalizeProvider(typeof r==`string`?i(r):r),isCustomEndpoint:!0,useDualstackEndpoint:n.normalizeProvider(a??!1)})},d=async e=>{let{tls:t=!0}=e,n=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw Error(`Invalid region in client config`);let r=await e.useDualstackEndpoint(),i=await e.useFipsEndpoint(),{hostname:a}=await e.regionInfoProvider(n,{useDualstackEndpoint:r,useFipsEndpoint:i})??{};if(!a)throw Error(`Cannot resolve hostname from client config`);return e.urlParser(`${t?`https:`:`http:`}//${a}`)},f=e=>{let t=n.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:i,urlParser:a,tls:o}=e;return Object.assign(e,{tls:o??!0,endpoint:r?n.normalizeProvider(typeof r==`string`?a(r):r):()=>d({...e,useDualstackEndpoint:t,useFipsEndpoint:i}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},p=`AWS_REGION`,m=`region`,h={environmentVariableSelector:e=>e[p],configFileSelector:e=>e[m],default:()=>{throw Error(`Region is missing`)}},g={preferredFile:`credentials`},_=new Set,v=(e,t=r.isValidHostLabel)=>{if(!_.has(e)&&!t(e))if(e===`*`)console.warn(`@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.`);else throw Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else _.add(e)},y=e=>typeof e==`string`&&(e.startsWith(`fips-`)||e.endsWith(`-fips`)),b=e=>y(e)?[`fips-aws-global`,`aws-fips`].includes(e)?`us-east-1`:e.replace(/fips-(dkr-|prod-)?|-fips/,``):e,x=e=>{let{region:t,useFipsEndpoint:n}=e;if(!t)throw Error(`Region is missing`);return Object.assign(e,{region:async()=>{let e=b(typeof t==`function`?await t():t);return v(e),e},useFipsEndpoint:async()=>y(typeof t==`string`?t:await t())?!0:typeof n==`function`?n():Promise.resolve(!!n)})},S=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:n})=>e.find(({tags:e})=>t===e.includes(`fips`)&&n===e.includes(`dualstack`))?.hostname,C=(e,{regionHostname:t,partitionHostname:n})=>t||(n?n.replace(`{region}`,e):void 0),w=(e,{partitionHash:t})=>Object.keys(t||{}).find(n=>t[n].regions.includes(e))??`aws`,T=(e,{signingRegion:t,regionRegex:n,useFipsEndpoint:r})=>{if(t)return t;if(r){let t=n.replace(`\\\\`,`\\`).replace(/^\^/g,`\\.`).replace(/\$$/g,`\\.`),r=e.match(t);if(r)return r[0].slice(1,-1)}};e.CONFIG_USE_DUALSTACK_ENDPOINT=a,e.CONFIG_USE_FIPS_ENDPOINT=c,e.DEFAULT_USE_DUALSTACK_ENDPOINT=!1,e.DEFAULT_USE_FIPS_ENDPOINT=!1,e.ENV_USE_DUALSTACK_ENDPOINT=i,e.ENV_USE_FIPS_ENDPOINT=s,e.NODE_REGION_CONFIG_FILE_OPTIONS=g,e.NODE_REGION_CONFIG_OPTIONS=h,e.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=o,e.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=l,e.REGION_ENV_NAME=p,e.REGION_INI_NAME=m,e.getRegionInfo=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:n=!1,signingService:r,regionHash:i,partitionHash:a})=>{let o=w(e,{partitionHash:a}),s=e in i?e:a[o]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:n},l=C(s,{regionHostname:S(i[s]?.variants,c),partitionHostname:S(a[o]?.variants,c)});if(l===void 0)throw Error(`Endpoint resolution failed for: [object Object]`);let u=T(l,{signingRegion:i[s]?.signingRegion,regionRegex:a[o].regionRegex,useFipsEndpoint:t});return{partition:o,signingService:r,hostname:l,...u&&{signingRegion:u},...i[s]?.signingService&&{signingService:i[s].signingService}}},e.resolveCustomEndpointsConfig=u,e.resolveEndpointsConfig=f,e.resolveRegionConfig=x})),Sl=s((e=>{var t=p();let n=`content-length`;function r(e){return r=>async i=>{let a=i.request;if(t.HttpRequest.isInstance(a)){let{body:t,headers:r}=a;if(t&&Object.keys(r).map(e=>e.toLowerCase()).indexOf(n)===-1)try{let r=e(t);a.headers={...a.headers,[n]:String(r)}}catch{}}return r({...i,request:a})}}let i={step:`build`,tags:[`SET_CONTENT_LENGTH`,`CONTENT_LENGTH`],name:`contentLengthMiddleware`,override:!0};e.contentLengthMiddleware=r,e.contentLengthMiddlewareOptions=i,e.getContentLengthPlugin=e=>({applyToStack:t=>{t.add(r(e.bodyLengthChecker),i)}})})),Cl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getHomeDir=void 0;let t=require(`os`),n=require(`path`),r={},i=()=>process&&process.geteuid?`${process.geteuid()}`:`DEFAULT`;e.getHomeDir=()=>{let{HOME:e,USERPROFILE:a,HOMEPATH:o,HOMEDRIVE:s=`C:${n.sep}`}=process.env;if(e)return e;if(a)return a;if(o)return`${s}${o}`;let c=i();return r[c]||(r[c]=(0,t.homedir)()),r[c]}})),wl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFilepath=void 0;let t=require(`crypto`),n=require(`path`),r=Cl();e.getSSOTokenFilepath=e=>{let i=(0,t.createHash)(`sha1`).update(e).digest(`hex`);return(0,n.join)((0,r.getHomeDir)(),`.aws`,`sso`,`cache`,`${i}.json`)}})),Tl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getSSOTokenFromFile=e.tokenIntercept=void 0;let t=require(`fs/promises`),n=wl();e.tokenIntercept={},e.getSSOTokenFromFile=async r=>{if(e.tokenIntercept[r])return e.tokenIntercept[r];let i=(0,n.getSSOTokenFilepath)(r),a=await(0,t.readFile)(i,`utf8`);return JSON.parse(a)}})),El=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.readFile=e.fileIntercept=e.filePromises=void 0;let t=require(`node:fs/promises`);e.filePromises={},e.fileIntercept={},e.readFile=(n,r)=>e.fileIntercept[n]===void 0?((!e.filePromises[n]||r?.ignoreCache)&&(e.filePromises[n]=(0,t.readFile)(n,`utf8`)),e.filePromises[n]):e.fileIntercept[n]})),Dl=s((e=>{var t=Cl(),n=wl(),r=Tl(),i=require(`path`),a=f(),o=El();let s=`AWS_PROFILE`,c=`default`,l=e=>e.profile||process.env[s]||c,u=e=>Object.entries(e).filter(([e])=>{let t=e.indexOf(`.`);return t===-1?!1:Object.values(a.IniSectionType).includes(e.substring(0,t))}).reduce((e,[t,n])=>{let r=t.indexOf(`.`),i=t.substring(0,r)===a.IniSectionType.PROFILE?t.substring(r+1):t;return e[i]=n,e},{...e.default&&{default:e.default}}),d=()=>process.env.AWS_CONFIG_FILE||i.join(t.getHomeDir(),`.aws`,`config`),p=()=>process.env.AWS_SHARED_CREDENTIALS_FILE||i.join(t.getHomeDir(),`.aws`,`credentials`),m=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,h=[`__proto__`,`profile __proto__`],g=e=>{let t={},n,r;for(let i of e.split(/\r?\n/)){let e=i.split(/(^|\s)[;#]/)[0].trim();if(e[0]===`[`&&e[e.length-1]===`]`){n=void 0,r=void 0;let t=e.substring(1,e.length-1),i=m.exec(t);if(i){let[,e,,t]=i;Object.values(a.IniSectionType).includes(e)&&(n=[e,t].join(`.`))}else n=t;if(h.includes(t))throw Error(`Found invalid profile name "${t}"`)}else if(n){let a=e.indexOf(`=`);if(![0,-1].includes(a)){let[o,s]=[e.substring(0,a).trim(),e.substring(a+1).trim()];if(s===``)r=o;else{r&&i.trimStart()===i&&(r=void 0),t[n]=t[n]||{};let e=r?[r,o].join(`.`):o;t[n][e]=s}}}}return t},_=()=>({}),v=async(e={})=>{let{filepath:n=p(),configFilepath:r=d()}=e,a=t.getHomeDir(),s=n;n.startsWith(`~/`)&&(s=i.join(a,n.slice(2)));let c=r;r.startsWith(`~/`)&&(c=i.join(a,r.slice(2)));let l=await Promise.all([o.readFile(c,{ignoreCache:e.ignoreCache}).then(g).then(u).catch(_),o.readFile(s,{ignoreCache:e.ignoreCache}).then(g).catch(_)]);return{configFile:l[0],credentialsFile:l[1]}},y=e=>Object.entries(e).filter(([e])=>e.startsWith(a.IniSectionType.SSO_SESSION+`.`)).reduce((e,[t,n])=>({...e,[t.substring(t.indexOf(`.`)+1)]:n}),{}),b=()=>({}),x=async(e={})=>o.readFile(e.configFilepath??d()).then(g).then(y).catch(b),S=(...e)=>{let t={};for(let n of e)for(let[e,r]of Object.entries(n))t[e]===void 0?t[e]=r:Object.assign(t[e],r);return t};Object.defineProperty(e,`getSSOTokenFromFile`,{enumerable:!0,get:function(){return r.getSSOTokenFromFile}}),Object.defineProperty(e,`readFile`,{enumerable:!0,get:function(){return o.readFile}}),e.CONFIG_PREFIX_SEPARATOR=`.`,e.DEFAULT_PROFILE=c,e.ENV_PROFILE=s,e.externalDataInterceptor={getFileRecord(){return o.fileIntercept},interceptFile(e,t){o.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return r.tokenIntercept},interceptToken(e,t){r.tokenIntercept[e]=t}},e.getProfileName=l,e.loadSharedConfigFiles=v,e.loadSsoSessionData=x,e.parseKnownFiles=async e=>{let t=await v(e);return S(t.configFile,t.credentialsFile)},Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),Ol=s((e=>{var t=_o(),n=Dl();function r(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete(`CONFIG`),t.delete(`CONFIG_PREFIX_SEPARATOR`),t.delete(`ENV`),[...t].join(`, `)}catch{return e}}let i=(e,n)=>async()=>{try{let t=e(process.env,n);if(t===void 0)throw Error();return t}catch(i){throw new t.CredentialsProviderError(i.message||`Not found in ENV: ${r(e.toString())}`,{logger:n?.logger})}},a=(e,{preferredFile:i=`config`,...a}={})=>async()=>{let o=n.getProfileName(a),{configFile:s,credentialsFile:c}=await n.loadSharedConfigFiles(a),l=c[o]||{},u=s[o]||{},d=i===`config`?{...l,...u}:{...u,...l};try{let t=e(d,i===`config`?s:c);if(t===void 0)throw Error();return t}catch(n){throw new t.CredentialsProviderError(n.message||`Not found in config files w/ profile [${o}]: ${r(e.toString())}`,{logger:a.logger})}},o=e=>typeof e==`function`,s=e=>o(e)?async()=>await e():t.fromStatic(e);e.loadConfig=({environmentVariableSelector:e,configFileSelector:n,default:r},o={})=>{let{signingName:c,logger:l}=o,u={signingName:c,logger:l};return t.memoize(t.chain(i(e,u),a(n,o),s(r)))}})),kl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointUrlConfig=void 0;let t=Dl(),n=`AWS_ENDPOINT_URL`,r=`endpoint_url`;e.getEndpointUrlConfig=e=>({environmentVariableSelector:t=>{let r=t[[n,...e.split(` `).map(e=>e.toUpperCase())].join(`_`)];if(r)return r;let i=t[n];if(i)return i},configFileSelector:(n,i)=>{if(i&&n.services){let a=i[[`services`,n.services].join(t.CONFIG_PREFIX_SEPARATOR)];if(a){let n=a[[e.split(` `).map(e=>e.toLowerCase()).join(`_`),r].join(t.CONFIG_PREFIX_SEPARATOR)];if(n)return n}}let a=n[r];if(a)return a},default:void 0})})),Al=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getEndpointFromConfig=void 0;let t=Ol(),n=kl();e.getEndpointFromConfig=async e=>(0,t.loadConfig)((0,n.getEndpointUrlConfig)(e??``))()})),jl=s((e=>{var t=Al(),n=Aa(),r=(Da(),d(Ea)),i=k(),a=ae();let o=async e=>{let t=e?.Bucket||``;if(typeof e.Bucket==`string`&&(e.Bucket=t.replace(/#/g,`%23`).replace(/\?/g,`%3F`)),f(t)){if(e.ForcePathStyle===!0)throw Error(`Path-style addressing cannot be used with ARN buckets`)}else (!u(t)||t.indexOf(`.`)!==-1&&!String(e.Endpoint).startsWith(`http:`)||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},s=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,c=/(\d+\.){3}\d+/,l=/\.\./,u=e=>s.test(e)&&!c.test(e)&&!l.test(e),f=e=>{let[t,n,r,,,i]=e.split(`:`),a=t===`arn`&&e.split(`:`).length>=6,o=!!(a&&n&&r&&i);if(a&&!o)throw Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},p=(e,t,n)=>{let r=async()=>{let r=n[e]??n[t];return typeof r==`function`?r():r};return e===`credentialScope`||t===`CredentialScope`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.credentialScope??e?.CredentialScope}:e===`accountId`||t===`AccountId`?async()=>{let e=typeof n.credentials==`function`?await n.credentials():n.credentials;return e?.accountId??e?.AccountId}:e===`endpoint`||t===`endpoint`?async()=>{if(n.isCustomEndpoint===!1)return;let e=await r();if(e&&typeof e==`object`){if(`url`in e)return e.url.href;if(`hostname`in e){let{protocol:t,hostname:n,port:r,path:i}=e;return`${t}//${n}${r?`:`+r:``}${i}`}}return e}:r},m=e=>typeof e==`object`?`url`in e?n.parseUrl(e.url):e:n.parseUrl(e),h=async(e,n,r,i)=>{if(!r.isCustomEndpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await t.getEndpointFromConfig(r.serviceId),e&&(r.endpoint=()=>Promise.resolve(m(e)),r.isCustomEndpoint=!0)}let a=await g(e,n,r);if(typeof r.endpointProvider!=`function`)throw Error(`config.endpointProvider is not set.`);return r.endpointProvider(a,i)},g=async(e,t,n)=>{let r={},i=t?.getEndpointParameterInstructions?.()||{};for(let[t,a]of Object.entries(i))switch(a.type){case`staticContextParams`:r[t]=a.value;break;case`contextParams`:r[t]=e[a.name];break;case`clientContextParams`:case`builtInParams`:r[t]=await p(a.name,t,n)();break;case`operationContextParams`:r[t]=a.get(e);break;default:throw Error(`Unrecognized endpoint parameter instruction: `+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()===`s3`&&await o(r),r},_=({config:e,instructions:t})=>(n,a)=>async o=>{e.isCustomEndpoint&&r.setFeature(a,`ENDPOINT_OVERRIDE`,`N`);let s=await h(o.input,{getEndpointParameterInstructions(){return t}},{...e},a);a.endpointV2=s,a.authSchemes=s.properties?.authSchemes;let c=a.authSchemes?.[0];if(c){a.signing_region=c.signingRegion,a.signing_service=c.signingName;let e=i.getSmithyContext(a)?.selectedHttpAuthScheme?.httpAuthOption;e&&(e.signingProperties=Object.assign(e.signingProperties||{},{signing_region:c.signingRegion,signingRegion:c.signingRegion,signing_service:c.signingName,signingName:c.signingName,signingRegionSet:c.signingRegionSet},c.properties))}return n({...o})},v={step:`serialize`,tags:[`ENDPOINT_PARAMETERS`,`ENDPOINT_V2`,`ENDPOINT`],name:`endpointV2Middleware`,override:!0,relation:`before`,toMiddleware:a.serializerMiddlewareOption.name};e.endpointMiddleware=_,e.endpointMiddlewareOptions=v,e.getEndpointFromInstructions=h,e.getEndpointPlugin=(e,t)=>({applyToStack:n=>{n.addRelativeTo(_({config:e,instructions:t}),v)}}),e.resolveEndpointConfig=e=>{let n=e.tls??!0,{endpoint:r,useDualstackEndpoint:a,useFipsEndpoint:o}=e,s=r==null?void 0:async()=>m(await i.normalizeProvider(r)()),c=!!r,l=Object.assign(e,{endpoint:s,tls:n,isCustomEndpoint:c,useDualstackEndpoint:i.normalizeProvider(a??!1),useFipsEndpoint:i.normalizeProvider(o??!1)}),u;return l.serviceConfiguredEndpoint=async()=>(e.serviceId&&!u&&(u=t.getEndpointFromConfig(e.serviceId)),u),l},e.resolveEndpointRequiredConfig=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw Error(`@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.`)}),e},e.resolveParams=g,e.toEndpointV1=m})),Ml=s((e=>{let t=[`AuthFailure`,`InvalidSignatureException`,`RequestExpired`,`RequestInTheFuture`,`RequestTimeTooSkewed`,`SignatureDoesNotMatch`],n=[`BandwidthLimitExceeded`,`EC2ThrottledException`,`LimitExceededException`,`PriorRequestNotComplete`,`ProvisionedThroughputExceededException`,`RequestLimitExceeded`,`RequestThrottled`,`RequestThrottledException`,`SlowDown`,`ThrottledException`,`Throttling`,`ThrottlingException`,`TooManyRequestsException`,`TransactionInProgressException`],r=[`TimeoutError`,`RequestTimeout`,`RequestTimeoutException`],i=[500,502,503,504],a=[`ECONNRESET`,`ECONNREFUSED`,`EPIPE`,`ETIMEDOUT`],o=[`EHOSTUNREACH`,`ENETUNREACH`,`ENOTFOUND`],s=e=>e?.$retryable!==void 0,c=e=>t.includes(e.name),l=e=>e.$metadata?.clockSkewCorrected,u=e=>{let t=new Set([`Failed to fetch`,`NetworkError when attempting to fetch resource`,`The Internet connection appears to be offline`,`Load failed`,`Network request failed`]);return e&&e instanceof TypeError?t.has(e.message):!1},d=e=>e.$metadata?.httpStatusCode===429||n.includes(e.name)||e.$retryable?.throttling==1,f=(e,t=0)=>s(e)||l(e)||r.includes(e.name)||a.includes(e?.code||``)||o.includes(e?.code||``)||i.includes(e.$metadata?.httpStatusCode||0)||u(e)||e.cause!==void 0&&t<=10&&f(e.cause,t+1);e.isBrowserNetworkError=u,e.isClockSkewCorrectedError=l,e.isClockSkewError=c,e.isRetryableByTrait=s,e.isServerError=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!f(e)}return!1},e.isThrottlingError=d,e.isTransientError=f})),Nl=s((e=>{var t=Ml();e.RETRY_MODES=void 0,(function(e){e.STANDARD=`standard`,e.ADAPTIVE=`adaptive`})(e.RETRY_MODES||={});let n=e.RETRY_MODES.STANDARD;var r=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8,this.lastThrottleTime=this.getCurrentTimeInSeconds(),this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(t=>e.setTimeoutFn(t,n))}this.currentCapacity-=t}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),t.isThrottlingError(e)){let e=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=e,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(e),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());let r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise((this.lastMaxRate*(1-this.beta)/this.scaleConstant)**(1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*(e-this.lastThrottleTime-this.timeWindow)**3+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){let e=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(e*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}};let i=20*1e3,a=()=>{let e=100;return{computeNextBackoffDelay:t=>Math.floor(Math.min(i,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},o=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(i,e),getRetryCost:()=>n});var s=class{maxAttempts;mode=e.RETRY_MODES.STANDARD;capacity=500;retryBackoffStrategy=a();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e==`function`?e:async()=>e}async acquireInitialRetryToken(e){return o({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(e,t){let n=await this.getMaxAttempts();if(this.shouldRetry(e,t,n)){let n=t.errorType;this.retryBackoffStrategy.setDelayBase(n===`THROTTLING`?500:100);let r=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),i=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,r):r,a=this.getCapacityCost(n);return this.capacity-=a,o({retryDelay:i,retryCount:e.getRetryCount()+1,retryCost:a})}throw Error(`No retry token available`)}recordSuccess(e){this.capacity=Math.max(500,this.capacity+(e.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of 3`),3}}shouldRetry(e,t,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e===`TRANSIENT`?10:5}isRetryableError(e){return e===`THROTTLING`||e===`TRANSIENT`}},c=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=e.RETRY_MODES.ADAPTIVE;constructor(e,t){this.maxAttemptsProvider=e;let{rateLimiter:n}=t??{};this.rateLimiter=n??new r,this.standardRetryStrategy=new s(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},l=class extends s{computeNextBackoffDelay;constructor(e,t=100){super(typeof e==`function`?e:async()=>e),typeof t==`number`?this.computeNextBackoffDelay=()=>t:this.computeNextBackoffDelay=t}async refreshRetryTokenForRetry(e,t){let n=await super.refreshRetryTokenForRetry(e,t);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};e.AdaptiveRetryStrategy=c,e.ConfiguredRetryStrategy=l,e.DEFAULT_MAX_ATTEMPTS=3,e.DEFAULT_RETRY_DELAY_BASE=100,e.DEFAULT_RETRY_MODE=n,e.DefaultRateLimiter=r,e.INITIAL_RETRY_TOKENS=500,e.INVOCATION_ID_HEADER=`amz-sdk-invocation-id`,e.MAXIMUM_RETRY_DELAY=i,e.NO_RETRY_INCREMENT=1,e.REQUEST_HEADER=`amz-sdk-request`,e.RETRY_COST=5,e.StandardRetryStrategy=s,e.THROTTLING_RETRY_DELAY_BASE=500,e.TIMEOUT_RETRY_COST=10})),Pl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isStreamingPayload=void 0;let t=require(`stream`);e.isStreamingPayload=e=>e?.body instanceof t.Readable||typeof ReadableStream<`u`&&e?.body instanceof ReadableStream})),Fl=s((e=>{var t=Nl(),n=p(),r=Ml(),i=Vr(),a=k(),o=K(),s=Pl();let c=(e,n)=>{let r=e,i=t.NO_RETRY_INCREMENT,a=t.RETRY_COST,o=t.TIMEOUT_RETRY_COST,s=e,c=e=>e.name===`TimeoutError`?o:a,l=e=>c(e)<=s;return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:e=>{if(!l(e))throw Error(`No retry token available`);let t=c(e);return s-=t,t},releaseRetryTokens:e=>{s+=e??i,s=Math.min(s,r)}})},l=(e,n)=>Math.floor(Math.min(t.MAXIMUM_RETRY_DELAY,Math.random()*2**n*e)),u=e=>e?r.isRetryableByTrait(e)||r.isClockSkewError(e)||r.isThrottlingError(e)||r.isTransientError(e):!1,d=e=>e instanceof Error?e:e instanceof Object?Object.assign(Error(),e):typeof e==`string`?Error(e):Error(`AWS SDK error wrapper for ${e}`);var f=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=t.RETRY_MODES.STANDARD;constructor(e,n){this.maxAttemptsProvider=e,this.retryDecider=n?.retryDecider??u,this.delayDecider=n?.delayDecider??l,this.retryQuota=n?.retryQuota??c(t.INITIAL_RETRY_TOKENS)}shouldRetry(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=t.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,a,o){let s,c=0,l=0,u=await this.getMaxAttempts(),{request:f}=a;for(n.HttpRequest.isInstance(f)&&(f.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{n.HttpRequest.isInstance(f)&&(f.headers[t.REQUEST_HEADER]=`attempt=${c+1}; max=${u}`),o?.beforeRequest&&await o.beforeRequest();let{response:r,output:i}=await e(a);return o?.afterRequest&&o.afterRequest(r),this.retryQuota.releaseRetryTokens(s),i.$metadata.attempts=c+1,i.$metadata.totalRetryDelay=l,{response:r,output:i}}catch(e){let n=d(e);if(c++,this.shouldRetry(n,c,u)){s=this.retryQuota.retrieveRetryTokens(n);let e=this.delayDecider(r.isThrottlingError(n)?t.THROTTLING_RETRY_DELAY_BASE:t.DEFAULT_RETRY_DELAY_BASE,c),i=m(n.$response),a=Math.max(i||0,e);l+=a,await new Promise(e=>setTimeout(e,a));continue}throw n.$metadata||={},n.$metadata.attempts=c,n.$metadata.totalRetryDelay=l,n}}};let m=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r).getTime()-Date.now():i*1e3};var h=class extends f{rateLimiter;constructor(e,n){let{rateLimiter:r,...i}=n??{};super(e,i),this.rateLimiter=r??new t.DefaultRateLimiter,this.mode=t.RETRY_MODES.ADAPTIVE}async retry(e,t){return super.retry(e,t,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:e=>{this.rateLimiter.updateClientSendingRate(e)}})}};let g=`AWS_MAX_ATTEMPTS`,_=`max_attempts`,v={environmentVariableSelector:e=>{let t=e[g];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Environment variable ${g} mast be a number, got "${t}"`);return n},configFileSelector:e=>{let t=e[_];if(!t)return;let n=parseInt(t);if(Number.isNaN(n))throw Error(`Shared config file entry ${_} mast be a number, got "${t}"`);return n},default:t.DEFAULT_MAX_ATTEMPTS},y=e=>{let{retryStrategy:n,retryMode:r,maxAttempts:i}=e,o=a.normalizeProvider(i??t.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>n||(await a.normalizeProvider(r)()===t.RETRY_MODES.ADAPTIVE?new t.AdaptiveRetryStrategy(o):new t.StandardRetryStrategy(o))})},b=`AWS_RETRY_MODE`,x=`retry_mode`,S={environmentVariableSelector:e=>e[b],configFileSelector:e=>e[x],default:t.DEFAULT_RETRY_MODE},C=()=>e=>async r=>{let{request:i}=r;return n.HttpRequest.isInstance(i)&&(delete i.headers[t.INVOCATION_ID_HEADER],delete i.headers[t.REQUEST_HEADER]),e(r)},w={name:`omitRetryHeadersMiddleware`,tags:[`RETRY`,`HEADERS`,`OMIT_RETRY_HEADERS`],relation:`before`,toMiddleware:`awsAuthMiddleware`,override:!0},T=e=>({applyToStack:e=>{e.addRelativeTo(C(),w)}}),E=e=>(r,a)=>async c=>{let l=await e.retryStrategy(),u=await e.maxAttempts();if(D(l)){l=l;let e=await l.acquireInitialRetryToken(a.partition_id),f=Error(),p=0,m=0,{request:h}=c,g=n.HttpRequest.isInstance(h);for(g&&(h.headers[t.INVOCATION_ID_HEADER]=i.v4());;)try{g&&(h.headers[t.REQUEST_HEADER]=`attempt=${p+1}; max=${u}`);let{response:n,output:i}=await r(c);return l.recordSuccess(e),i.$metadata.attempts=p+1,i.$metadata.totalRetryDelay=m,{response:n,output:i}}catch(t){let n=O(t);if(f=d(t),g&&s.isStreamingPayload(h))throw(a.logger instanceof o.NoOpLogger?console:a.logger)?.warn(`An error was encountered in a non-retryable streaming request.`),f;try{e=await l.refreshRetryTokenForRetry(e,n)}catch{throw f.$metadata||={},f.$metadata.attempts=p+1,f.$metadata.totalRetryDelay=m,f}p=e.getRetryCount();let r=e.getRetryDelay();m+=r,await new Promise(e=>setTimeout(e,r))}}else return l=l,l?.mode&&(a.userAgent=[...a.userAgent||[],[`cfg/retry-mode`,l.mode]]),l.retry(r,c)},D=e=>e.acquireInitialRetryToken!==void 0&&e.refreshRetryTokenForRetry!==void 0&&e.recordSuccess!==void 0,O=e=>{let t={error:e,errorType:A(e)},n=N(e.$response);return n&&(t.retryAfterHint=n),t},A=e=>r.isThrottlingError(e)?`THROTTLING`:r.isTransientError(e)?`TRANSIENT`:r.isServerError(e)?`SERVER_ERROR`:`CLIENT_ERROR`,j={name:`retryMiddleware`,tags:[`RETRY`],step:`finalizeRequest`,priority:`high`,override:!0},M=e=>({applyToStack:t=>{t.add(E(e),j)}}),N=e=>{if(!n.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(e=>e.toLowerCase()===`retry-after`);if(!t)return;let r=e.headers[t],i=Number(r);return Number.isNaN(i)?new Date(r):new Date(i*1e3)};e.AdaptiveRetryStrategy=h,e.CONFIG_MAX_ATTEMPTS=_,e.CONFIG_RETRY_MODE=x,e.ENV_MAX_ATTEMPTS=g,e.ENV_RETRY_MODE=b,e.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=v,e.NODE_RETRY_MODE_CONFIG_OPTIONS=S,e.StandardRetryStrategy=f,e.defaultDelayDecider=l,e.defaultRetryDecider=u,e.getOmitRetryHeadersPlugin=T,e.getRetryAfterHint=N,e.getRetryPlugin=M,e.omitRetryHeadersMiddleware=C,e.omitRetryHeadersMiddlewareOptions=w,e.resolveRetryConfig=y,e.retryMiddleware=E,e.retryMiddlewareOptions=j})),Il=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.resolveStsAuthConfig=e.defaultSTSHttpAuthSchemeProvider=e.defaultSTSHttpAuthSchemeParametersProvider=void 0;let t=(vl(),d(_l)),n=k(),r=cb();e.defaultSTSHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function i(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function a(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSTSHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`AssumeRoleWithSAML`:t.push(a(e));break;case`AssumeRoleWithWebIdentity`:t.push(a(e));break;default:t.push(i(e))}return t},e.resolveStsAuthConfig=e=>Object.assign(e,{stsClientCtor:r.STSClient}),e.resolveHttpAuthSchemeConfig=r=>{let i=(0,e.resolveStsAuthConfig)(r),a=(0,t.resolveAwsSdkSigV4Config)(i);return Object.assign(a,{authSchemePreference:(0,n.normalizeProvider)(r.authSchemePreference??[])})}})),Ll=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.commonParams=e.resolveClientEndpointParameters=void 0,e.resolveClientEndpointParameters=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),e.commonParams={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),Rl=s(((e,t)=>{t.exports={name:`@aws-sdk/client-sts`,description:`AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native`,version:`3.946.0`,scripts:{build:`concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'`,"build:cjs":`node ../../scripts/compilation/inline client-sts`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`lerna run --scope $npm_package_name --include-dependencies build`,"build:types":`rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`rimraf ./dist-* && rimraf *.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sts`,test:`yarn g:vitest run`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`,"test:watch":`yarn g:vitest watch`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`3.946.0`,"@aws-sdk/credential-provider-node":`3.946.0`,"@aws-sdk/middleware-host-header":`3.936.0`,"@aws-sdk/middleware-logger":`3.936.0`,"@aws-sdk/middleware-recursion-detection":`3.936.0`,"@aws-sdk/middleware-user-agent":`3.946.0`,"@aws-sdk/region-config-resolver":`3.936.0`,"@aws-sdk/types":`3.936.0`,"@aws-sdk/util-endpoints":`3.936.0`,"@aws-sdk/util-user-agent-browser":`3.936.0`,"@aws-sdk/util-user-agent-node":`3.946.0`,"@smithy/config-resolver":`^4.4.3`,"@smithy/core":`^3.18.7`,"@smithy/fetch-http-handler":`^5.3.6`,"@smithy/hash-node":`^4.2.5`,"@smithy/invalid-dependency":`^4.2.5`,"@smithy/middleware-content-length":`^4.2.5`,"@smithy/middleware-endpoint":`^4.3.14`,"@smithy/middleware-retry":`^4.4.14`,"@smithy/middleware-serde":`^4.2.6`,"@smithy/middleware-stack":`^4.2.5`,"@smithy/node-config-provider":`^4.3.5`,"@smithy/node-http-handler":`^4.4.5`,"@smithy/protocol-http":`^5.3.5`,"@smithy/smithy-client":`^4.9.10`,"@smithy/types":`^4.9.0`,"@smithy/url-parser":`^4.2.5`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.13`,"@smithy/util-defaults-mode-node":`^4.2.16`,"@smithy/util-endpoints":`^3.2.5`,"@smithy/util-middleware":`^4.2.5`,"@smithy/util-retry":`^4.2.5`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node18":`18.2.4`,"@types/node":`^18.19.69`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,rimraf:`3.0.2`,typescript:`~5.8.3`},engines:{node:`>=18.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sts`}}})),zl=s((e=>{var t=(Ha(),d(Va)),n=_o();let r=`AWS_ACCESS_KEY_ID`,i=`AWS_SECRET_ACCESS_KEY`,a=`AWS_SESSION_TOKEN`,o=`AWS_CREDENTIAL_EXPIRATION`,s=`AWS_CREDENTIAL_SCOPE`,c=`AWS_ACCOUNT_ID`;e.ENV_ACCOUNT_ID=c,e.ENV_CREDENTIAL_SCOPE=s,e.ENV_EXPIRATION=o,e.ENV_KEY=r,e.ENV_SECRET=i,e.ENV_SESSION=a,e.fromEnv=e=>async()=>{e?.logger?.debug(`@aws-sdk/credential-provider-env - fromEnv`);let l=process.env[r],u=process.env[i],d=process.env[a],f=process.env[o],p=process.env[s],m=process.env[c];if(l&&u){let e={accessKeyId:l,secretAccessKey:u,...d&&{sessionToken:d},...f&&{expiration:new Date(f)},...p&&{credentialScope:p},...m&&{accountId:m}};return t.setCredentialFeature(e,`CREDENTIALS_ENV_VARS`,`g`),e}throw new n.CredentialsProviderError(`Unable to find environment variable credentials.`,{logger:e?.logger})}})),Bl=s((e=>{var t=_o(),n=require(`url`),r=require(`buffer`),i=require(`http`),a=Ol(),o=Aa();function s(e){return new Promise((n,a)=>{let o=i.request({method:`GET`,...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,`$1`)});o.on(`error`,e=>{a(Object.assign(new t.ProviderError(`Unable to connect to instance metadata service`),e)),o.destroy()}),o.on(`timeout`,()=>{a(new t.ProviderError(`TimeoutError from instance metadata service`)),o.destroy()}),o.on(`response`,e=>{let{statusCode:i=400}=e;(i<200||300<=i)&&(a(Object.assign(new t.ProviderError(`Error response received from instance metadata service`),{statusCode:i})),o.destroy());let s=[];e.on(`data`,e=>{s.push(e)}),e.on(`end`,()=>{n(r.Buffer.concat(s)),o.destroy()})}),o.end()})}let c=e=>!!e&&typeof e==`object`&&typeof e.AccessKeyId==`string`&&typeof e.SecretAccessKey==`string`&&typeof e.Token==`string`&&typeof e.Expiration==`string`,l=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),u=1e3,d=({maxRetries:e=0,timeout:t=u})=>({maxRetries:e,timeout:t}),f=(e,t)=>{let n=e();for(let r=0;r<t;r++)n=n.catch(e);return n},p=`AWS_CONTAINER_CREDENTIALS_FULL_URI`,m=`AWS_CONTAINER_CREDENTIALS_RELATIVE_URI`,h=`AWS_CONTAINER_AUTHORIZATION_TOKEN`,g=(e={})=>{let{timeout:n,maxRetries:r}=d(e);return()=>f(async()=>{let r=await b({logger:e.logger}),i=JSON.parse(await _(n,r));if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:e.logger});return l(i)},r)},_=async(e,t)=>(process.env[h]&&(t.headers={...t.headers,Authorization:process.env[h]}),(await s({...t,timeout:e})).toString()),v={localhost:!0,"127.0.0.1":!0},y={"http:":!0,"https:":!0},b=async({logger:e})=>{if(process.env[m])return{hostname:`169.254.170.2`,path:process.env[m]};if(process.env[p]){let r=n.parse(process.env[p]);if(!r.hostname||!(r.hostname in v))throw new t.CredentialsProviderError(`${r.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!r.protocol||!(r.protocol in y))throw new t.CredentialsProviderError(`${r.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...r,port:r.port?parseInt(r.port,10):void 0}}throw new t.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${m} or ${p} environment variable is set`,{tryNextLink:!1,logger:e})};var x=class e extends t.CredentialsProviderError{tryNextLink;name=`InstanceMetadataV1FallbackError`;constructor(t,n=!0){super(t,n),this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype)}};e.Endpoint=void 0,(function(e){e.IPv4=`http://169.254.169.254`,e.IPv6=`http://[fd00:ec2::254]`})(e.Endpoint||={});let S={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT,configFileSelector:e=>e.ec2_metadata_service_endpoint,default:void 0};var C;(function(e){e.IPv4=`IPv4`,e.IPv6=`IPv6`})(C||={});let w={environmentVariableSelector:e=>e.AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE,configFileSelector:e=>e.ec2_metadata_service_endpoint_mode,default:C.IPv4},T=async()=>o.parseUrl(await E()||await D()),E=async()=>a.loadConfig(S)(),D=async()=>{let t=await a.loadConfig(w)();switch(t){case C.IPv4:return e.Endpoint.IPv4;case C.IPv6:return e.Endpoint.IPv6;default:throw Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(C)}`)}},O=(e,t)=>{let n=300+Math.floor(Math.random()*300),r=new Date(Date.now()+n*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(r)}.\nFor more information, please visit: https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html`);let i=e.originalExpiration??e.expiration;return{...e,...i?{originalExpiration:i}:{},expiration:r}},k=(e,t={})=>{let n=t?.logger||console,r;return async()=>{let t;try{t=await e(),t.expiration&&t.expiration.getTime()<Date.now()&&(t=O(t,n))}catch(e){if(r)n.warn(`Credential renew failed: `,e),t=O(r,n);else throw e}return r=t,t}},A=`/latest/meta-data/iam/security-credentials/`,j=`AWS_EC2_METADATA_V1_DISABLED`,M=`ec2_metadata_v1_disabled`,N=`x-aws-ec2-metadata-token`,ee=(e={})=>k(te(e),{logger:e.logger}),te=(e={})=>{let n=!1,{logger:r,profile:i}=e,{timeout:o,maxRetries:s}=d(e),c=async(r,o)=>{if(n||o.headers?.[N]==null){let n=!1,r=!1,o=await a.loadConfig({environmentVariableSelector:n=>{let i=n[j];if(r=!!i&&i!==`false`,i===void 0)throw new t.CredentialsProviderError(`${j} not set in env, checking config file next.`,{logger:e.logger});return r},configFileSelector:e=>{let t=e[M];return n=!!t&&t!==`false`,n},default:!1},{profile:i})();if(e.ec2MetadataV1Disabled||o){let t=[];throw e.ec2MetadataV1Disabled&&t.push(`credential provider initialization (runtime option ec2MetadataV1Disabled)`),n&&t.push(`config file profile (${M})`),r&&t.push(`process environment variable (${j})`),new x(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${t.join(`, `)}].`)}}let s=(await f(async()=>{let e;try{e=await re(o)}catch(e){throw e.statusCode===401&&(n=!1),e}return e},r)).trim();return f(async()=>{let t;try{t=await ie(s,o,e)}catch(e){throw e.statusCode===401&&(n=!1),e}return t},r)};return async()=>{let e=await T();if(n)return r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (no token fetch)`),c(s,{...e,timeout:o});{let t;try{t=(await ne({...e,timeout:o})).toString()}catch(t){if(t?.statusCode===400)throw Object.assign(t,{message:`EC2 Metadata token request returned error`});return(t.message===`TimeoutError`||[403,404,405].includes(t.statusCode))&&(n=!0),r?.debug(`AWS SDK Instance Metadata`,`using v1 fallback (initial)`),c(s,{...e,timeout:o})}return c(s,{...e,headers:{[N]:t},timeout:o})}}},ne=async e=>s({...e,path:`/latest/api/token`,method:`PUT`,headers:{"x-aws-ec2-metadata-token-ttl-seconds":`21600`}}),re=async e=>(await s({...e,path:A})).toString(),ie=async(e,n,r)=>{let i=JSON.parse((await s({...n,path:A+e})).toString());if(!c(i))throw new t.CredentialsProviderError(`Invalid response received from instance metadata service.`,{logger:r.logger});return l(i)};e.DEFAULT_MAX_RETRIES=0,e.DEFAULT_TIMEOUT=u,e.ENV_CMDS_AUTH_TOKEN=h,e.ENV_CMDS_FULL_URI=p,e.ENV_CMDS_RELATIVE_URI=m,e.fromContainerMetadata=g,e.fromInstanceMetadata=ee,e.getInstanceMetadataEndpoint=T,e.httpRequest=s,e.providerConfigFromInit=d})),Vl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.checkUrl=void 0;let t=_o();e.checkUrl=(e,n)=>{if(e.protocol!==`https:`&&!(e.hostname===`169.254.170.2`||e.hostname===`169.254.170.23`||e.hostname===`[fd00:ec2::23]`)){if(e.hostname.includes(`[`)){if(e.hostname===`[::1]`||e.hostname===`[0000:0000:0000:0000:0000:0000:0000:0001]`)return}else{if(e.hostname===`localhost`)return;let t=e.hostname.split(`.`),n=e=>{let t=parseInt(e,10);return 0<=t&&t<=255};if(t[0]===`127`&&n(t[1])&&n(t[2])&&n(t[3])&&t.length===4)return}throw new t.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:n})}}})),Hl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.createGetRequest=a,e.getCredentials=o;let t=_o(),n=p(),r=K(),i=Je();function a(e){return new n.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((e,[t,n])=>(e[t]=n,e),{}),fragment:e.hash})}async function o(e,n){let a=await(0,i.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let e=JSON.parse(a);if(typeof e.AccessKeyId!=`string`||typeof e.SecretAccessKey!=`string`||typeof e.Token!=`string`||typeof e.Expiration!=`string`)throw new t.CredentialsProviderError(`HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }`,{logger:n});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,r.parseRfc3339DateTime)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let r={};try{r=JSON.parse(a)}catch{}throw Object.assign(new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n}),{Code:r.Code,Message:r.Message})}throw new t.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:n})}})),Ul=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.retryWrapper=void 0,e.retryWrapper=(e,t,n)=>async()=>{for(let r=0;r<t;++r)try{return await e()}catch{await new Promise(e=>setTimeout(e,n))}return await e()}})),Wl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;let t=(zr(),d(tr)),n=(Ha(),d(Va)),r=Ve(),i=_o(),a=t.__importDefault(require(`fs/promises`)),o=Vl(),s=Hl(),c=Ul();e.fromHttp=(e={})=>{e.logger?.debug(`@aws-sdk/credential-provider-http - fromHttp`);let t,l=e.awsContainerCredentialsRelativeUri??process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI,u=e.awsContainerCredentialsFullUri??process.env.AWS_CONTAINER_CREDENTIALS_FULL_URI,d=e.awsContainerAuthorizationToken??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN,f=e.awsContainerAuthorizationTokenFile??process.env.AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE,p=e.logger?.constructor?.name===`NoOpLogger`||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(l&&u&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri.`),p(`awsContainerCredentialsFullUri will take precedence.`)),d&&f&&(p(`@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile.`),p(`awsContainerAuthorizationToken will take precedence.`)),u)t=u;else if(l)t=`http://169.254.170.2${l}`;else throw new i.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let m=new URL(t);(0,o.checkUrl)(m,e.logger);let h=r.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,c.retryWrapper)(async()=>{let t=(0,s.createGetRequest)(m);d?t.headers.Authorization=d:f&&(t.headers.Authorization=(await a.default.readFile(f)).toString());try{let e=await h.handle(t);return(0,s.getCredentials)(e.response).then(e=>(0,n.setCredentialFeature)(e,`CREDENTIALS_HTTP`,`z`))}catch(t){throw new i.CredentialsProviderError(String(t),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)}})),Gl=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromHttp=void 0;var t=Wl();Object.defineProperty(e,`fromHttp`,{enumerable:!0,get:function(){return t.fromHttp}})}));function Kl(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sso-oauth`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function ql(e){return{schemeId:`smithy.api#noAuth`}}var Jl,Yl,Xl,Zl,Ql=o((()=>{vl(),Jl=k(),Yl=async(e,t,n)=>({operation:(0,Jl.getSmithyContext)(t).operation,region:await(0,Jl.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Xl=e=>{let t=[];switch(e.operation){case`CreateToken`:t.push(ql(e));break;default:t.push(Kl(e))}return t},Zl=e=>{let t=Eo(e);return Object.assign(t,{authSchemePreference:(0,Jl.normalizeProvider)(e.authSchemePreference??[])})}})),$l,eu,tu=o((()=>{$l=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`sso-oauth`}),eu={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),nu=`3.946.0`,ru=s((e=>{var t=require(`os`),n=require(`process`),r=yl();let i={isCrtAvailable:!1},a=()=>i.isCrtAvailable?[`md/crt-avail`]:null,o=({serviceId:e,clientVersion:r})=>async i=>{let o=[[`aws-sdk-js`,r],[`ua`,`2.1`],[`os/${t.platform()}`,t.release()],[`lang/js`],[`md/nodejs`,`${n.versions.node}`]],s=a();s&&o.push(s),e&&o.push([`api/${e}`,r]),n.env.AWS_EXECUTION_ENV&&o.push([`exec-env/${n.env.AWS_EXECUTION_ENV}`]);let c=await i?.userAgentAppId?.();return c?[...o,[`app/${c}`]]:[...o]},s=o,c=`AWS_SDK_UA_APP_ID`,l=`sdk_ua_app_id`;e.NODE_APP_ID_CONFIG_OPTIONS={environmentVariableSelector:e=>e[c],configFileSelector:e=>e[l]??e[`sdk-ua-app-id`],default:r.DEFAULT_UA_APP_ID},e.UA_APP_ID_ENV_NAME=c,e.UA_APP_ID_INI_NAME=l,e.createDefaultUserAgentProvider=o,e.crtAvailability=i,e.defaultUserAgent=s})),iu=s((e=>{var t=we(),n=R(),r=require(`buffer`),i=require(`crypto`),a=class{algorithmIdentifier;secret;hash;constructor(e,t){this.algorithmIdentifier=e,this.secret=t,this.reset()}update(e,t){this.hash.update(n.toUint8Array(o(e,t)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?i.createHmac(this.algorithmIdentifier,o(this.secret)):i.createHash(this.algorithmIdentifier)}};function o(e,n){return r.Buffer.isBuffer(e)?e:typeof e==`string`?t.fromString(e,n):ArrayBuffer.isView(e)?t.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):t.fromArrayBuffer(e)}e.Hash=a})),au=s((e=>{var t=require(`node:fs`);e.calculateBodyLength=e=>{if(!e)return 0;if(typeof e==`string`)return Buffer.byteLength(e);if(typeof e.byteLength==`number`)return e.byteLength;if(typeof e.size==`number`)return e.size;if(typeof e.start==`number`&&typeof e.end==`number`)return e.end+1-e.start;if(e instanceof t.ReadStream){if(e.path!=null)return t.lstatSync(e.path).size;if(typeof e.fd==`number`)return t.fstatSync(e.fd).size}throw Error(`Body Length computation failed for ${e}`)}})),ou=s((e=>{var t=xl(),n=Ol(),r=_o();let i=`AWS_REGION`,a=`AWS_DEFAULT_REGION`,o=[`in-region`,`cross-region`,`mobile`,`standard`,`legacy`],s={environmentVariableSelector:e=>e.AWS_DEFAULTS_MODE,configFileSelector:e=>e.defaults_mode,default:`legacy`},c=({region:e=n.loadConfig(t.NODE_REGION_CONFIG_OPTIONS),defaultsMode:i=n.loadConfig(s)}={})=>r.memoize(async()=>{let t=typeof i==`function`?await i():i;switch(t?.toLowerCase()){case`auto`:return l(e);case`in-region`:case`cross-region`:case`mobile`:case`standard`:case`legacy`:return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve(`legacy`);default:throw Error(`Invalid parameter for "defaultsMode", expect ${o.join(`, `)}, got ${t}`)}}),l=async e=>{if(e){let t=typeof e==`function`?await e():e,n=await d();return n?t===n?`in-region`:`cross-region`:`standard`}return`standard`},d=async()=>{if(process.env.AWS_EXECUTION_ENV&&(process.env[i]||process.env[a]))return process.env[i]??process.env[a];if(!process.env.AWS_EC2_METADATA_DISABLED)try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>u(Bl()));return(await t({...await e(),path:`/latest/meta-data/placement/region`})).toString()}catch{}};e.resolveDefaultsModeConfig=c})),su,cu,lu,uu,du,fu,pu,mu,hu,gu,_u,vu,yu,bu,xu,Su,Cu,wu,Tu,Eu,Du,Ou,ku,Au,ju,Mu,Nu=o((()=>{su=`required`,cu=`fn`,lu=`argv`,uu=`ref`,du=!0,fu=`isSet`,pu=`booleanEquals`,mu=`error`,hu=`endpoint`,gu=`tree`,_u=`PartitionResult`,vu=`getAttr`,yu={[su]:!1,type:`string`},bu={[su]:!0,default:!1,type:`boolean`},xu={[uu]:`Endpoint`},Su={[cu]:pu,[lu]:[{[uu]:`UseFIPS`},!0]},Cu={[cu]:pu,[lu]:[{[uu]:`UseDualStack`},!0]},wu={},Tu={[cu]:vu,[lu]:[{[uu]:_u},`supportsFIPS`]},Eu={[uu]:_u},Du={[cu]:pu,[lu]:[!0,{[cu]:vu,[lu]:[Eu,`supportsDualStack`]}]},Ou=[Su],ku=[Cu],Au=[{[uu]:`Region`}],ju={version:`1.0`,parameters:{Region:yu,UseDualStack:bu,UseFIPS:bu,Endpoint:yu},rules:[{conditions:[{[cu]:fu,[lu]:[xu]}],rules:[{conditions:Ou,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:mu},{conditions:ku,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:mu},{endpoint:{url:xu,properties:wu,headers:wu},type:hu}],type:gu},{conditions:[{[cu]:fu,[lu]:Au}],rules:[{conditions:[{[cu]:`aws.partition`,[lu]:Au,assign:_u}],rules:[{conditions:[Su,Cu],rules:[{conditions:[{[cu]:pu,[lu]:[du,Tu]},Du],rules:[{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:wu,headers:wu},type:hu}],type:gu},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:mu}],type:gu},{conditions:Ou,rules:[{conditions:[{[cu]:pu,[lu]:[Tu,du]}],rules:[{conditions:[{[cu]:`stringEquals`,[lu]:[{[cu]:vu,[lu]:[Eu,`name`]},`aws-us-gov`]}],endpoint:{url:`https://oidc.{Region}.amazonaws.com`,properties:wu,headers:wu},type:hu},{endpoint:{url:`https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:wu,headers:wu},type:hu}],type:gu},{error:`FIPS is enabled but this partition does not support FIPS`,type:mu}],type:gu},{conditions:ku,rules:[{conditions:[Du],rules:[{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:wu,headers:wu},type:hu}],type:gu},{error:`DualStack is enabled but this partition does not support DualStack`,type:mu}],type:gu},{endpoint:{url:`https://oidc.{Region}.{PartitionResult#dnsSuffix}`,properties:wu,headers:wu},type:hu}],type:gu}],type:gu},{error:`Invalid Configuration: Missing Region`,type:mu}]},Mu=ju})),Pu,Fu,Iu,Lu,Ru=o((()=>{Pu=ja(),Fu=Oa(),Nu(),Iu=new Fu.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),Lu=(e,t={})=>Iu.get(e,()=>(0,Fu.resolveEndpoint)(Mu,{endpointParams:e,logger:t.logger})),Fu.customEndpointFunctions.aws=Pu.awsEndpointFunctions})),zu,Bu,Vu,Hu,Uu,Wu=o((()=>{vl(),gl(),Da(),zu=K(),Bu=Aa(),Vu=De(),Hu=R(),Ql(),Ru(),Uu=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??Vu.fromBase64,base64Encoder:e?.base64Encoder??Vu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Lu,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Xl,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new no},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new ga}],logger:e?.logger??new zu.NoOpLogger,protocol:e?.protocol??new Nc({defaultNamespace:`com.amazonaws.ssooidc`}),serviceId:e?.serviceId??`SSO OIDC`,urlParser:e?.urlParser??Bu.parseUrl,utf8Decoder:e?.utf8Decoder??Hu.fromUtf8,utf8Encoder:e?.utf8Encoder??Hu.toUtf8})})),Gu,Ku,qu,Ju,Yu,Xu,Zu,Qu,$u,ed,td,nd=o((()=>{vl(),Gu=ru(),Ku=xl(),qu=iu(),Ju=Fl(),Yu=Ol(),Xu=Ve(),Zu=K(),Qu=au(),$u=ou(),ed=Nl(),Wu(),td=e=>{(0,Zu.emitWarningIfUnsupportedVersion)(process.version);let t=(0,$u.resolveDefaultsModeConfig)(e),n=()=>t().then(Zu.loadConfigsForDefaultMode),r=Uu(e);Na(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Yu.loadConfig)(ho,i),bodyLengthChecker:e?.bodyLengthChecker??Qu.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Gu.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:nu}),maxAttempts:e?.maxAttempts??(0,Yu.loadConfig)(Ju.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Yu.loadConfig)(Ku.NODE_REGION_CONFIG_OPTIONS,{...Ku.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:Xu.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,Yu.loadConfig)({...Ju.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||ed.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??qu.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??Xu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Yu.loadConfig)(Ku.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,Yu.loadConfig)(Ku.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,Yu.loadConfig)(Gu.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),rd=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.warning=void 0,e.stsRegionDefaultResolver=r;let t=xl(),n=Ol();function r(r={}){return(0,n.loadConfig)({...t.NODE_REGION_CONFIG_OPTIONS,async default(){return e.warning.silence||console.warn(`@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly.`),`us-east-1`}},{...t.NODE_REGION_CONFIG_FILE_OPTIONS,...r})}e.warning={silence:!1}})),id=s((e=>{var t=xl(),n=rd();Object.defineProperty(e,`NODE_REGION_CONFIG_FILE_OPTIONS`,{enumerable:!0,get:function(){return t.NODE_REGION_CONFIG_FILE_OPTIONS}}),Object.defineProperty(e,`NODE_REGION_CONFIG_OPTIONS`,{enumerable:!0,get:function(){return t.NODE_REGION_CONFIG_OPTIONS}}),Object.defineProperty(e,`REGION_ENV_NAME`,{enumerable:!0,get:function(){return t.REGION_ENV_NAME}}),Object.defineProperty(e,`REGION_INI_NAME`,{enumerable:!0,get:function(){return t.REGION_INI_NAME}}),Object.defineProperty(e,`resolveRegionConfig`,{enumerable:!0,get:function(){return t.resolveRegionConfig}}),e.getAwsRegionExtensionConfiguration=e=>({setRegion(t){e.region=t},region(){return e.region}}),e.resolveAwsRegionExtensionConfiguration=e=>({region:e.region()}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),ad,od,sd=o((()=>{ad=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},od=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),cd,ld,ud,dd,fd=o((()=>{cd=id(),ld=p(),ud=K(),sd(),dd=(e,t)=>{let n=Object.assign((0,cd.getAwsRegionExtensionConfiguration)(e),(0,ud.getDefaultExtensionConfiguration)(e),(0,ld.getHttpHandlerExtensionConfiguration)(e),ad(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,cd.resolveAwsRegionExtensionConfiguration)(n),(0,ud.resolveDefaultRuntimeConfig)(n),(0,ld.resolveHttpHandlerRuntimeConfig)(n),od(n))}})),pd,md,hd,gd,_d,vd,yd,bd,xd,Sd,Cd=o((()=>{pd=m(),md=h(),hd=T(),gd=yl(),_d=xl(),Da(),V(),vd=Sl(),yd=jl(),bd=Fl(),xd=K(),Ql(),tu(),nd(),fd(),Sd=class extends xd.Client{config;constructor(...[e]){let t=td(e||{});super(t),this.initConfig=t,this.config=dd(Zl((0,yd.resolveEndpointConfig)((0,pd.resolveHostHeaderConfig)((0,_d.resolveRegionConfig)((0,bd.resolveRetryConfig)((0,gd.resolveUserAgentConfig)($l(t))))))),e?.extensions||[]),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use((0,gd.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,bd.getRetryPlugin)(this.config)),this.middlewareStack.use((0,vd.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,pd.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,md.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,hd.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(re(this.config,{httpAuthSchemeParametersProvider:Yl,identityProviderConfigProvider:async e=>new sa({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(me(this.config))}destroy(){super.destroy()}}})),wd,Td,Ed=o((()=>{wd=K(),Td=class e extends wd.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Dd,Od,kd,Ad,jd,Md,Nd,Pd,Fd,Id,Ld,Rd=o((()=>{Ed(),Dd=class e extends Td{name=`AccessDeniedException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Od=class e extends Td{name=`AuthorizationPendingException`;$fault=`client`;error;error_description;constructor(t){super({name:`AuthorizationPendingException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},kd=class e extends Td{name=`ExpiredTokenException`;$fault=`client`;error;error_description;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ad=class e extends Td{name=`InternalServerException`;$fault=`server`;error;error_description;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},jd=class e extends Td{name=`InvalidClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Md=class e extends Td{name=`InvalidGrantException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidGrantException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Nd=class e extends Td{name=`InvalidRequestException`;$fault=`client`;error;reason;error_description;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Pd=class e extends Td{name=`InvalidScopeException`;$fault=`client`;error;error_description;constructor(t){super({name:`InvalidScopeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Fd=class e extends Td{name=`SlowDownException`;$fault=`client`;error;error_description;constructor(t){super({name:`SlowDownException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Id=class e extends Td{name=`UnauthorizedClientException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnauthorizedClientException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ld=class e extends Td{name=`UnsupportedGrantTypeException`;$fault=`client`;error;error_description;constructor(t){super({name:`UnsupportedGrantTypeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}})),zd,Bd,Vd,Hd,Ud,Wd,Gd,Kd,qd,Jd,Yd,Xd,Zd,Qd,$d,ef,tf,nf,rf,af,of,sf,cf,lf,uf,df,q,ff,pf,mf,hf,gf,_f,vf,yf,bf,xf,Sf,Cf,wf,J,Tf,Ef,Df,Of,kf,Af,jf,Mf,Nf,Pf,Ff,If,Lf,Rf,zf,Bf,Vf,Hf,Uf,Wf,Gf=o((()=>{V(),Rd(),Ed(),zd=`AccessDeniedException`,Bd=`AuthorizationPendingException`,Vd=`AccessToken`,Hd=`ClientSecret`,Ud=`CreateToken`,Wd=`CreateTokenRequest`,Gd=`CreateTokenResponse`,Kd=`CodeVerifier`,qd=`ExpiredTokenException`,Jd=`InvalidClientException`,Yd=`InvalidGrantException`,Xd=`InvalidRequestException`,Zd=`InternalServerException`,Qd=`InvalidScopeException`,$d=`IdToken`,ef=`RefreshToken`,tf=`SlowDownException`,nf=`UnauthorizedClientException`,rf=`UnsupportedGrantTypeException`,af=`accessToken`,of=`client`,sf=`clientId`,cf=`clientSecret`,lf=`codeVerifier`,uf=`code`,df=`deviceCode`,q=`error`,ff=`expiresIn`,pf=`error_description`,mf=`grantType`,hf=`http`,gf=`httpError`,_f=`idToken`,vf=`reason`,yf=`refreshToken`,bf=`redirectUri`,xf=`scope`,Sf=`server`,Cf=`smithy.ts.sdk.synthetic.com.amazonaws.ssooidc`,wf=`tokenType`,J=`com.amazonaws.ssooidc`,Tf=[0,J,Vd,8,0],Ef=[0,J,Hd,8,0],Df=[0,J,Kd,8,0],Of=[0,J,$d,8,0],kf=[0,J,ef,8,0],Af=[-3,J,zd,{[q]:of,[gf]:400},[q,vf,pf],[0,0,0]],B.for(J).registerError(Af,Dd),jf=[-3,J,Bd,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(jf,Od),Mf=[3,J,Wd,0,[sf,cf,mf,df,uf,yf,xf,bf,lf],[0,[()=>Ef,0],0,0,0,[()=>kf,0],64,0,[()=>Df,0]]],Nf=[3,J,Gd,0,[af,wf,ff,yf,_f],[[()=>Tf,0],0,1,[()=>kf,0],[()=>Of,0]]],Pf=[-3,J,qd,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(Pf,kd),Ff=[-3,J,Zd,{[q]:Sf,[gf]:500},[q,pf],[0,0]],B.for(J).registerError(Ff,Ad),If=[-3,J,Jd,{[q]:of,[gf]:401},[q,pf],[0,0]],B.for(J).registerError(If,jd),Lf=[-3,J,Yd,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(Lf,Md),Rf=[-3,J,Xd,{[q]:of,[gf]:400},[q,vf,pf],[0,0,0]],B.for(J).registerError(Rf,Nd),zf=[-3,J,Qd,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(zf,Pd),Bf=[-3,J,tf,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(Bf,Fd),Vf=[-3,J,nf,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(Vf,Id),Hf=[-3,J,rf,{[q]:of,[gf]:400},[q,pf],[0,0]],B.for(J).registerError(Hf,Ld),Uf=[-3,Cf,`SSOOIDCServiceException`,0,[],[]],B.for(Cf).registerError(Uf,Td),Wf=[9,J,Ud,{[hf]:[`POST`,`/token`,200]},()=>Mf,()=>Nf]})),Kf,qf,Jf,Yf=o((()=>{Kf=jl(),qf=K(),tu(),Gf(),Jf=class extends qf.Command.classBuilder().ep(eu).m(function(e,t,n,r){return[(0,Kf.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSSOOIDCService`,`CreateToken`,{}).n(`SSOOIDCClient`,`CreateTokenCommand`).sc(Wf).build(){}})),Xf,Zf,Qf,$f=o((()=>{Xf=K(),Yf(),Cd(),Zf={CreateTokenCommand:Jf},Qf=class extends Sd{},(0,Xf.createAggregatedClient)(Zf,Qf)})),ep=o((()=>{Yf()})),tp,np,rp=o((()=>{tp={KMS_ACCESS_DENIED:`KMS_AccessDeniedException`},np={KMS_DISABLED_KEY:`KMS_DisabledException`,KMS_INVALID_KEY_USAGE:`KMS_InvalidKeyUsageException`,KMS_INVALID_STATE:`KMS_InvalidStateException`,KMS_KEY_NOT_FOUND:`KMS_NotFoundException`}})),ip=c({$Command:()=>qf.Command,AccessDeniedException:()=>Dd,AccessDeniedExceptionReason:()=>tp,AuthorizationPendingException:()=>Od,CreateTokenCommand:()=>Jf,ExpiredTokenException:()=>kd,InternalServerException:()=>Ad,InvalidClientException:()=>jd,InvalidGrantException:()=>Md,InvalidRequestException:()=>Nd,InvalidRequestExceptionReason:()=>np,InvalidScopeException:()=>Pd,SSOOIDC:()=>Qf,SSOOIDCClient:()=>Sd,SSOOIDCServiceException:()=>Td,SlowDownException:()=>Fd,UnauthorizedClientException:()=>Id,UnsupportedGrantTypeException:()=>Ld,__Client:()=>xd.Client}),ap=o((()=>{Cd(),$f(),ep(),rp(),Rd(),Ed()})),op=s((e=>{var t=(Ha(),d(Va)),n=(jo(),d(Ao)),r=_o(),i=Dl(),a=require(`fs`);let o=({logger:e,signingName:i}={})=>async()=>{if(e?.debug?.(`@aws-sdk/token-providers - fromEnvSigningName`),!i)throw new r.TokenProviderError(`Please pass 'signingName' to compute environment variable key`,{logger:e});let a=n.getBearerTokenEnvKey(i);if(!(a in process.env))throw new r.TokenProviderError(`Token not present in '${a}' environment variable`,{logger:e});let o={token:process.env[a]};return t.setTokenFeature(o,`BEARER_SERVICE_ENV_VARS`,`3`),o},s=`To refresh this SSO session run 'aws sso login' with the corresponding profile.`,c=async(e,t={})=>{let{SSOOIDCClient:n}=await Promise.resolve().then(()=>(ap(),ip)),r=e=>t.clientConfig?.[e]??t.parentClientConfig?.[e];return new n(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:r(`logger`),userAgentAppId:r(`userAgentAppId`)}))},l=async(e,t,n={})=>{let{CreateTokenCommand:r}=await Promise.resolve().then(()=>(ap(),ip));return(await c(t,n)).send(new r({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:`refresh_token`}))},u=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new r.TokenProviderError(`Token is expired. ${s}`,!1)},f=(e,t,n=!1)=>{if(t===void 0)throw new r.TokenProviderError(`Value not present for '${e}' in SSO Token${n?`. Cannot refresh`:``}. ${s}`,!1)},{writeFile:p}=a.promises,m=(e,t)=>p(i.getSSOTokenFilepath(e),JSON.stringify(t,null,2)),h=new Date(0),g=(e={})=>async({callerClientConfig:t}={})=>{let n={...e,parentClientConfig:{...t,...e.parentClientConfig}};n.logger?.debug(`@aws-sdk/token-providers - fromSso`);let a=await i.parseKnownFiles(n),o=i.getProfileName({profile:n.profile??t?.profile}),c=a[o];if(c){if(!c.sso_session)throw new r.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new r.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let d=c.sso_session,p=(await i.loadSsoSessionData(n))[d];if(!p)throw new r.TokenProviderError(`Sso session '${d}' could not be found in shared credentials file.`,!1);for(let e of[`sso_start_url`,`sso_region`])if(!p[e])throw new r.TokenProviderError(`Sso session '${d}' is missing required property '${e}'.`,!1);p.sso_start_url;let g=p.sso_region,_;try{_=await i.getSSOTokenFromFile(d)}catch{throw new r.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${s}`,!1)}f(`accessToken`,_.accessToken),f(`expiresAt`,_.expiresAt);let{accessToken:v,expiresAt:y}=_,b={token:v,expiration:new Date(y)};if(b.expiration.getTime()-Date.now()>3e5)return b;if(Date.now()-h.getTime()<30*1e3)return u(b),b;f(`clientId`,_.clientId,!0),f(`clientSecret`,_.clientSecret,!0),f(`refreshToken`,_.refreshToken,!0);try{h.setTime(Date.now());let e=await l(_,g,n);f(`accessToken`,e.accessToken),f(`expiresIn`,e.expiresIn);let t=new Date(Date.now()+e.expiresIn*1e3);try{await m(d,{..._,accessToken:e.accessToken,expiresAt:t.toISOString(),refreshToken:e.refreshToken})}catch{}return{token:e.accessToken,expiration:t}}catch{return u(b),b}};e.fromEnvSigningName=o,e.fromSso=g,e.fromStatic=({token:e,logger:t})=>async()=>{if(t?.debug(`@aws-sdk/token-providers - fromStatic`),!e||!e.token)throw new r.TokenProviderError(`Please pass a valid token to fromStatic`,!1);return e},e.nodeProvider=(e={})=>r.memoize(r.chain(g(e),async()=>{throw new r.TokenProviderError(`Could not load token from any providers`,!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0)})),sp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthSchemeConfig=e.defaultSSOHttpAuthSchemeProvider=e.defaultSSOHttpAuthSchemeParametersProvider=void 0;let t=(vl(),d(_l)),n=k();e.defaultSSOHttpAuthSchemeParametersProvider=async(e,t,r)=>({operation:(0,n.getSmithyContext)(t).operation,region:await(0,n.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function r(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`awsssoportal`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function i(e){return{schemeId:`smithy.api#noAuth`}}e.defaultSSOHttpAuthSchemeProvider=e=>{let t=[];switch(e.operation){case`GetRoleCredentials`:t.push(i(e));break;case`ListAccountRoles`:t.push(i(e));break;case`ListAccounts`:t.push(i(e));break;case`Logout`:t.push(i(e));break;default:t.push(r(e))}return t},e.resolveHttpAuthSchemeConfig=e=>{let r=(0,t.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,n.normalizeProvider)(e.authSchemePreference??[])})}})),cp=s(((e,t)=>{t.exports={name:`@aws-sdk/client-sso`,description:`AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native`,version:`3.946.0`,scripts:{build:`concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'`,"build:cjs":`node ../../scripts/compilation/inline client-sso`,"build:es":`tsc -p tsconfig.es.json`,"build:include:deps":`lerna run --scope $npm_package_name --include-dependencies build`,"build:types":`tsc -p tsconfig.types.json`,"build:types:downlevel":`downlevel-dts dist-types dist-types/ts3.4`,clean:`rimraf ./dist-* && rimraf *.tsbuildinfo`,"extract:docs":`api-extractor run --local`,"generate:client":`node ../../scripts/generate-clients/single-service --solo sso`,"test:index":`tsc --noEmit ./test/index-types.ts && node ./test/index-objects.spec.mjs`},main:`./dist-cjs/index.js`,types:`./dist-types/index.d.ts`,module:`./dist-es/index.js`,sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":`5.2.0`,"@aws-crypto/sha256-js":`5.2.0`,"@aws-sdk/core":`3.946.0`,"@aws-sdk/middleware-host-header":`3.936.0`,"@aws-sdk/middleware-logger":`3.936.0`,"@aws-sdk/middleware-recursion-detection":`3.936.0`,"@aws-sdk/middleware-user-agent":`3.946.0`,"@aws-sdk/region-config-resolver":`3.936.0`,"@aws-sdk/types":`3.936.0`,"@aws-sdk/util-endpoints":`3.936.0`,"@aws-sdk/util-user-agent-browser":`3.936.0`,"@aws-sdk/util-user-agent-node":`3.946.0`,"@smithy/config-resolver":`^4.4.3`,"@smithy/core":`^3.18.7`,"@smithy/fetch-http-handler":`^5.3.6`,"@smithy/hash-node":`^4.2.5`,"@smithy/invalid-dependency":`^4.2.5`,"@smithy/middleware-content-length":`^4.2.5`,"@smithy/middleware-endpoint":`^4.3.14`,"@smithy/middleware-retry":`^4.4.14`,"@smithy/middleware-serde":`^4.2.6`,"@smithy/middleware-stack":`^4.2.5`,"@smithy/node-config-provider":`^4.3.5`,"@smithy/node-http-handler":`^4.4.5`,"@smithy/protocol-http":`^5.3.5`,"@smithy/smithy-client":`^4.9.10`,"@smithy/types":`^4.9.0`,"@smithy/url-parser":`^4.2.5`,"@smithy/util-base64":`^4.3.0`,"@smithy/util-body-length-browser":`^4.2.0`,"@smithy/util-body-length-node":`^4.2.1`,"@smithy/util-defaults-mode-browser":`^4.3.13`,"@smithy/util-defaults-mode-node":`^4.2.16`,"@smithy/util-endpoints":`^3.2.5`,"@smithy/util-middleware":`^4.2.5`,"@smithy/util-retry":`^4.2.5`,"@smithy/util-utf8":`^4.2.0`,tslib:`^2.6.2`},devDependencies:{"@tsconfig/node18":`18.2.4`,"@types/node":`^18.19.69`,concurrently:`7.0.0`,"downlevel-dts":`0.10.1`,rimraf:`3.0.2`,typescript:`~5.8.3`},engines:{node:`>=18.0.0`},typesVersions:{"<4.0":{"dist-types/*":[`dist-types/ts3.4/*`]}},files:[`dist-*/**`],author:{name:`AWS SDK for JavaScript Team`,url:`https://aws.amazon.com/javascript/`},license:`Apache-2.0`,browser:{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.browser`},"react-native":{"./dist-es/runtimeConfig":`./dist-es/runtimeConfig.native`},homepage:`https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso`,repository:{type:`git`,url:`https://github.com/aws/aws-sdk-js-v3.git`,directory:`clients/client-sso`}}})),lp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`argv`,r=`isSet`,i=`booleanEquals`,a=`error`,o=`endpoint`,s=`tree`,c=`PartitionResult`,l=`getAttr`,u={[t]:!1,type:`string`},d={[t]:!0,default:!1,type:`boolean`},f={ref:`Endpoint`},p={fn:i,[n]:[{ref:`UseFIPS`},!0]},m={fn:i,[n]:[{ref:`UseDualStack`},!0]},h={},g={fn:l,[n]:[{ref:c},`supportsFIPS`]},_={ref:c},v={fn:i,[n]:[!0,{fn:l,[n]:[_,`supportsDualStack`]}]},y=[p],b=[m],x=[{ref:`Region`}];e.ruleSet={version:`1.0`,parameters:{Region:u,UseDualStack:d,UseFIPS:d,Endpoint:u},rules:[{conditions:[{fn:r,[n]:[f]}],rules:[{conditions:y,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:a},{conditions:b,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:a},{endpoint:{url:f,properties:h,headers:h},type:o}],type:s},{conditions:[{fn:r,[n]:x}],rules:[{conditions:[{fn:`aws.partition`,[n]:x,assign:c}],rules:[{conditions:[p,m],rules:[{conditions:[{fn:i,[n]:[!0,g]},v],rules:[{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:a}],type:s},{conditions:y,rules:[{conditions:[{fn:i,[n]:[g,!0]}],rules:[{conditions:[{fn:`stringEquals`,[n]:[{fn:l,[n]:[_,`name`]},`aws-us-gov`]}],endpoint:{url:`https://portal.sso.{Region}.amazonaws.com`,properties:h,headers:h},type:o},{endpoint:{url:`https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`FIPS is enabled but this partition does not support FIPS`,type:a}],type:s},{conditions:b,rules:[{conditions:[v],rules:[{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:h,headers:h},type:o}],type:s},{error:`DualStack is enabled but this partition does not support DualStack`,type:a}],type:s},{endpoint:{url:`https://portal.sso.{Region}.{PartitionResult#dnsSuffix}`,properties:h,headers:h},type:o}],type:s}],type:s},{error:`Invalid Configuration: Missing Region`,type:a}]}})),up=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=ja(),n=Oa(),r=lp(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),dp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(vl(),d(_l)),n=(gl(),d(hl)),r=(Da(),d(Ea)),i=K(),a=Aa(),o=De(),s=R(),c=sp(),l=up();e.getRuntimeConfig=e=>({apiVersion:`2019-06-10`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??new n.AwsRestJsonProtocol({defaultNamespace:`com.amazonaws.sso`}),serviceId:e?.serviceId??`SSO`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),fp=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(zr(),d(tr)).__importDefault(cp()),n=(vl(),d(_l)),r=ru(),i=xl(),a=iu(),o=Fl(),s=Ol(),c=Ve(),l=K(),u=au(),f=ou(),p=Nl(),m=dp();e.getRuntimeConfig=e=>{(0,l.emitWarningIfUnsupportedVersion)(process.version);let d=(0,f.resolveDefaultsModeConfig)(e),h=()=>d().then(l.loadConfigsForDefaultMode),g=(0,m.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let _={profile:e?.profile,logger:g.logger};return{...g,...e,runtime:`node`,defaultsMode:d,authSchemePreference:e?.authSchemePreference??(0,s.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,_),bodyLengthChecker:e?.bodyLengthChecker??u.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,r.createDefaultUserAgentProvider)({serviceId:g.serviceId,clientVersion:t.default.version}),maxAttempts:e?.maxAttempts??(0,s.loadConfig)(o.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,s.loadConfig)(i.NODE_REGION_CONFIG_OPTIONS,{...i.NODE_REGION_CONFIG_FILE_OPTIONS,..._}),requestHandler:c.NodeHttpHandler.create(e?.requestHandler??h),retryMode:e?.retryMode??(0,s.loadConfig)({...o.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await h()).retryMode||p.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??a.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??c.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,s.loadConfig)(i.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,_),useFipsEndpoint:e?.useFipsEndpoint??(0,s.loadConfig)(i.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,_),userAgentAppId:e?.userAgentAppId??(0,s.loadConfig)(r.NODE_APP_ID_CONFIG_OPTIONS,_)}}})),pp=s((e=>{var t=m(),n=h(),r=T(),i=yl(),a=xl(),o=(Da(),d(Ea)),s=(V(),d(Kt)),c=Sl(),l=jl(),u=Fl(),f=K(),g=sp(),_=fp(),v=id(),y=p();let b=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`awsssoportal`}),x={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}},S=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},C=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),w=(e,t)=>{let n=Object.assign(v.getAwsRegionExtensionConfiguration(e),f.getDefaultExtensionConfiguration(e),y.getHttpHandlerExtensionConfiguration(e),S(e));return t.forEach(e=>e.configure(n)),Object.assign(e,v.resolveAwsRegionExtensionConfiguration(n),f.resolveDefaultRuntimeConfig(n),y.resolveHttpHandlerRuntimeConfig(n),C(n))};var E=class extends f.Client{config;constructor(...[e]){let d=_.getRuntimeConfig(e||{});super(d),this.initConfig=d;let f=b(d),p=i.resolveUserAgentConfig(f),m=u.resolveRetryConfig(p),h=a.resolveRegionConfig(m),v=t.resolveHostHeaderConfig(h),y=l.resolveEndpointConfig(v);this.config=w(g.resolveHttpAuthSchemeConfig(y),e?.extensions||[]),this.middlewareStack.use(s.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(i.getUserAgentPlugin(this.config)),this.middlewareStack.use(u.getRetryPlugin(this.config)),this.middlewareStack.use(c.getContentLengthPlugin(this.config)),this.middlewareStack.use(t.getHostHeaderPlugin(this.config)),this.middlewareStack.use(n.getLoggerPlugin(this.config)),this.middlewareStack.use(r.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(o.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:g.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(o.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}};let D=class e extends f.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},O=class e extends D{name=`InvalidRequestException`;$fault=`client`;constructor(t){super({name:`InvalidRequestException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},k=class e extends D{name=`ResourceNotFoundException`;$fault=`client`;constructor(t){super({name:`ResourceNotFoundException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},A=class e extends D{name=`TooManyRequestsException`;$fault=`client`;constructor(t){super({name:`TooManyRequestsException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},j=class e extends D{name=`UnauthorizedException`;$fault=`client`;constructor(t){super({name:`UnauthorizedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},M=`accountId`,N=`accessToken`,ee=`account_id`,te=`client`,ne=`error`,re=`http`,ie=`httpError`,ae=`httpHeader`,P=`httpQuery`,F=`message`,oe=`maxResults`,se=`max_result`,ce=`nextToken`,le=`next_token`,I=`roleName`,ue=`smithy.ts.sdk.synthetic.com.amazonaws.sso`,de=`x-amz-sso_bearer_token`,L=`com.amazonaws.sso`;var fe=[0,L,`AccessTokenType`,8,0],pe=[0,L,`SecretAccessKeyType`,8,0],me=[0,L,`SessionTokenType`,8,0],he=[3,L,`AccountInfo`,0,[M,`accountName`,`emailAddress`],[0,0,0]],ge=[3,L,`GetRoleCredentialsRequest`,0,[I,M,N],[[0,{[P]:`role_name`}],[0,{[P]:ee}],[()=>fe,{[ae]:de}]]],_e=[3,L,`GetRoleCredentialsResponse`,0,[`roleCredentials`],[[()=>Te,0]]],ve=[-3,L,`InvalidRequestException`,{[ne]:te,[ie]:400},[F],[0]];s.TypeRegistry.for(L).registerError(ve,O);var ye=[3,L,`ListAccountRolesRequest`,0,[ce,oe,N,M],[[0,{[P]:le}],[1,{[P]:se}],[()=>fe,{[ae]:de}],[0,{[P]:ee}]]],be=[3,L,`ListAccountRolesResponse`,0,[ce,`roleList`],[0,()=>je]],xe=[3,L,`ListAccountsRequest`,0,[ce,oe,N],[[0,{[P]:le}],[1,{[P]:se}],[()=>fe,{[ae]:de}]]],Se=[3,L,`ListAccountsResponse`,0,[ce,`accountList`],[0,()=>Ae]],Ce=[3,L,`LogoutRequest`,0,[N],[[()=>fe,{[ae]:de}]]],we=[-3,L,`ResourceNotFoundException`,{[ne]:te,[ie]:404},[F],[0]];s.TypeRegistry.for(L).registerError(we,k);var Te=[3,L,`RoleCredentials`,0,[`accessKeyId`,`secretAccessKey`,`sessionToken`,`expiration`],[0,[()=>pe,0],[()=>me,0],1]],R=[3,L,`RoleInfo`,0,[I,M],[0,0]],Ee=[-3,L,`TooManyRequestsException`,{[ne]:te,[ie]:429},[F],[0]];s.TypeRegistry.for(L).registerError(Ee,A);var De=[-3,L,`UnauthorizedException`,{[ne]:te,[ie]:401},[F],[0]];s.TypeRegistry.for(L).registerError(De,j);var Oe=`unit`,ke=[-3,ue,`SSOServiceException`,0,[],[]];s.TypeRegistry.for(ue).registerError(ke,D);var Ae=[1,L,`AccountListType`,0,()=>he],je=[1,L,`RoleListType`,0,()=>R],Me=[9,L,`GetRoleCredentials`,{[re]:[`GET`,`/federation/credentials`,200]},()=>ge,()=>_e],Ne=[9,L,`ListAccountRoles`,{[re]:[`GET`,`/assignment/roles`,200]},()=>ye,()=>be],Pe=[9,L,`ListAccounts`,{[re]:[`GET`,`/assignment/accounts`,200]},()=>xe,()=>Se],Fe=[9,L,`Logout`,{[re]:[`POST`,`/logout`,200]},()=>Ce,()=>Oe],Ie=class extends f.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`GetRoleCredentials`,{}).n(`SSOClient`,`GetRoleCredentialsCommand`).sc(Me).build(){},Le=class extends f.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccountRoles`,{}).n(`SSOClient`,`ListAccountRolesCommand`).sc(Ne).build(){},Re=class extends f.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`ListAccounts`,{}).n(`SSOClient`,`ListAccountsCommand`).sc(Pe).build(){},ze=class extends f.Command.classBuilder().ep(x).m(function(e,t,n,r){return[l.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`SWBPortalService`,`Logout`,{}).n(`SSOClient`,`LogoutCommand`).sc(Fe).build(){};let Be={GetRoleCredentialsCommand:Ie,ListAccountRolesCommand:Le,ListAccountsCommand:Re,LogoutCommand:ze};var Ve=class extends E{};f.createAggregatedClient(Be,Ve);let He=o.createPaginator(E,Le,`nextToken`,`nextToken`,`maxResults`),Ue=o.createPaginator(E,Re,`nextToken`,`nextToken`,`maxResults`);Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return f.Command}}),Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return f.Client}}),e.GetRoleCredentialsCommand=Ie,e.InvalidRequestException=O,e.ListAccountRolesCommand=Le,e.ListAccountsCommand=Re,e.LogoutCommand=ze,e.ResourceNotFoundException=k,e.SSO=Ve,e.SSOClient=E,e.SSOServiceException=D,e.TooManyRequestsException=A,e.UnauthorizedException=j,e.paginateListAccountRoles=He,e.paginateListAccounts=Ue})),mp=s((e=>{var t=pp();Object.defineProperty(e,`GetRoleCredentialsCommand`,{enumerable:!0,get:function(){return t.GetRoleCredentialsCommand}}),Object.defineProperty(e,`SSOClient`,{enumerable:!0,get:function(){return t.SSOClient}})})),hp=s((e=>{var t=_o(),n=Dl(),r=(Ha(),d(Va)),i=op();let a=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),o=async({ssoStartUrl:e,ssoSession:a,ssoAccountId:o,ssoRegion:s,ssoRoleName:c,ssoClient:l,clientConfig:u,parentClientConfig:d,profile:f,filepath:p,configFilepath:m,ignoreCache:h,logger:g})=>{let _,v=`To refresh this SSO session run aws sso login with the corresponding profile.`;if(a)try{let e=await i.fromSso({profile:f,filepath:p,configFilepath:m,ignoreCache:h})();_={accessToken:e.token,expiresAt:new Date(e.expiration).toISOString()}}catch(e){throw new t.CredentialsProviderError(e.message,{tryNextLink:!1,logger:g})}else try{_=await n.getSSOTokenFromFile(e)}catch{throw new t.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${v}`,{tryNextLink:!1,logger:g})}if(new Date(_.expiresAt).getTime()-Date.now()<=0)throw new t.CredentialsProviderError(`The SSO session associated with this profile has expired. ${v}`,{tryNextLink:!1,logger:g});let{accessToken:y}=_,{SSOClient:b,GetRoleCredentialsCommand:x}=await Promise.resolve().then(function(){return mp()}),S=l||new b(Object.assign({},u??{},{logger:u?.logger??d?.logger,region:u?.region??s,userAgentAppId:u?.userAgentAppId??d?.userAgentAppId})),C;try{C=await S.send(new x({accountId:o,roleName:c,accessToken:y}))}catch(e){throw new t.CredentialsProviderError(e,{tryNextLink:!1,logger:g})}let{roleCredentials:{accessKeyId:w,secretAccessKey:T,sessionToken:E,expiration:D,credentialScope:O,accountId:k}={}}=C;if(!w||!T||!E||!D)throw new t.CredentialsProviderError(`SSO returns an invalid temporary credential.`,{tryNextLink:!1,logger:g});let A={accessKeyId:w,secretAccessKey:T,sessionToken:E,expiration:new Date(D),...O&&{credentialScope:O},...k&&{accountId:k}};return a?r.setCredentialFeature(A,`CREDENTIALS_SSO`,`s`):r.setCredentialFeature(A,`CREDENTIALS_SSO_LEGACY`,`u`),A},s=(e,n)=>{let{sso_start_url:r,sso_account_id:i,sso_region:a,sso_role_name:o}=e;if(!r||!i||!a||!o)throw new t.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(`, `)}\nReference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:n});return e};e.fromSSO=(e={})=>async({callerClientConfig:r}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-sso - fromSSO`);let{ssoStartUrl:i,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoSession:d}=e,{ssoClient:f}=e,p=n.getProfileName({profile:e.profile??r?.profile});if(!i&&!c&&!l&&!u&&!d){let r=(await n.parseKnownFiles(e))[p];if(!r)throw new t.CredentialsProviderError(`Profile ${p} was not found.`,{logger:e.logger});if(!a(r))throw new t.CredentialsProviderError(`Profile ${p} is not configured with SSO credentials.`,{logger:e.logger});if(r?.sso_session){let a=(await n.loadSsoSessionData(e))[r.sso_session],o=` configurations in profile ${p} and sso-session ${r.sso_session}`;if(l&&l!==a.sso_region)throw new t.CredentialsProviderError(`Conflicting SSO region`+o,{tryNextLink:!1,logger:e.logger});if(i&&i!==a.sso_start_url)throw new t.CredentialsProviderError(`Conflicting SSO start_url`+o,{tryNextLink:!1,logger:e.logger});r.sso_region=a.sso_region,r.sso_start_url=a.sso_start_url}let{sso_start_url:c,sso_account_id:u,sso_region:d,sso_role_name:m,sso_session:h}=s(r,e.logger);return o({ssoStartUrl:c,ssoSession:h,ssoAccountId:u,ssoRegion:d,ssoRoleName:m,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else if(!i||!c||!l||!u)throw new t.CredentialsProviderError(`Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"`,{tryNextLink:!1,logger:e.logger});else return o({ssoStartUrl:i,ssoSession:d,ssoAccountId:c,ssoRegion:l,ssoRoleName:u,ssoClient:f,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:p,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})},e.isSsoProfile=a,e.validateSsoProfile=s}));function gp(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`signin`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function _p(e){return{schemeId:`smithy.api#noAuth`}}var vp,yp,bp,xp,Sp=o((()=>{vl(),vp=k(),yp=async(e,t,n)=>({operation:(0,vp.getSmithyContext)(t).operation,region:await(0,vp.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),bp=e=>{let t=[];switch(e.operation){case`CreateOAuth2Token`:t.push(_p(e));break;default:t.push(gp(e))}return t},xp=e=>{let t=Eo(e);return Object.assign(t,{authSchemePreference:(0,vp.normalizeProvider)(e.authSchemePreference??[])})}})),Cp,wp,Tp=o((()=>{Cp=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:`signin`}),wp={UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),Ep,Dp,Op,kp,Ap,jp,Mp,Np,Pp,Fp,Ip,Lp,Rp,zp,Bp,Vp,Hp,Up,Wp,Gp,Kp,qp,Jp,Yp,Xp,Zp,Qp=o((()=>{Ep=`required`,Dp=`fn`,Op=`argv`,kp=`ref`,Ap=!0,jp=`isSet`,Mp=`booleanEquals`,Np=`error`,Pp=`endpoint`,Fp=`tree`,Ip=`PartitionResult`,Lp=`stringEquals`,Rp={[Ep]:!0,default:!1,type:`boolean`},zp={[Ep]:!1,type:`string`},Bp={[kp]:`Endpoint`},Vp={[Dp]:Mp,[Op]:[{[kp]:`UseFIPS`},!0]},Hp={[Dp]:Mp,[Op]:[{[kp]:`UseDualStack`},!0]},Up={},Wp={[Dp]:`getAttr`,[Op]:[{[kp]:Ip},`name`]},Gp={[Dp]:Mp,[Op]:[{[kp]:`UseFIPS`},!1]},Kp={[Dp]:Mp,[Op]:[{[kp]:`UseDualStack`},!1]},qp={[Dp]:`getAttr`,[Op]:[{[kp]:Ip},`supportsFIPS`]},Jp={[Dp]:Mp,[Op]:[!0,{[Dp]:`getAttr`,[Op]:[{[kp]:Ip},`supportsDualStack`]}]},Yp=[{[kp]:`Region`}],Xp={version:`1.0`,parameters:{UseDualStack:Rp,UseFIPS:Rp,Endpoint:zp,Region:zp},rules:[{conditions:[{[Dp]:jp,[Op]:[Bp]}],rules:[{conditions:[Vp],error:`Invalid Configuration: FIPS and custom endpoint are not supported`,type:Np},{rules:[{conditions:[Hp],error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,type:Np},{endpoint:{url:Bp,properties:Up,headers:Up},type:Pp}],type:Fp}],type:Fp},{rules:[{conditions:[{[Dp]:jp,[Op]:Yp}],rules:[{conditions:[{[Dp]:`aws.partition`,[Op]:Yp,assign:Ip}],rules:[{conditions:[{[Dp]:Lp,[Op]:[Wp,`aws`]},Gp,Kp],endpoint:{url:`https://{Region}.signin.aws.amazon.com`,properties:Up,headers:Up},type:Pp},{conditions:[{[Dp]:Lp,[Op]:[Wp,`aws-cn`]},Gp,Kp],endpoint:{url:`https://{Region}.signin.amazonaws.cn`,properties:Up,headers:Up},type:Pp},{conditions:[{[Dp]:Lp,[Op]:[Wp,`aws-us-gov`]},Gp,Kp],endpoint:{url:`https://{Region}.signin.amazonaws-us-gov.com`,properties:Up,headers:Up},type:Pp},{conditions:[Vp,Hp],rules:[{conditions:[{[Dp]:Mp,[Op]:[Ap,qp]},Jp],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Up,headers:Up},type:Pp}],type:Fp},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,type:Np}],type:Fp},{conditions:[Vp,Kp],rules:[{conditions:[{[Dp]:Mp,[Op]:[qp,Ap]}],rules:[{endpoint:{url:`https://signin-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Up,headers:Up},type:Pp}],type:Fp},{error:`FIPS is enabled but this partition does not support FIPS`,type:Np}],type:Fp},{conditions:[Gp,Hp],rules:[{conditions:[Jp],rules:[{endpoint:{url:`https://signin.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Up,headers:Up},type:Pp}],type:Fp},{error:`DualStack is enabled but this partition does not support DualStack`,type:Np}],type:Fp},{endpoint:{url:`https://signin.{Region}.{PartitionResult#dnsSuffix}`,properties:Up,headers:Up},type:Pp}],type:Fp}],type:Fp},{error:`Invalid Configuration: Missing Region`,type:Np}],type:Fp}]},Zp=Xp})),$p,em,tm,nm,rm=o((()=>{$p=ja(),em=Oa(),Qp(),tm=new em.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`]}),nm=(e,t={})=>tm.get(e,()=>(0,em.resolveEndpoint)(Zp,{endpointParams:e,logger:t.logger})),em.customEndpointFunctions.aws=$p.awsEndpointFunctions})),im,am,om,sm,cm,lm=o((()=>{vl(),gl(),Da(),im=K(),am=Aa(),om=De(),sm=R(),Sp(),rm(),cm=e=>({apiVersion:`2023-01-01`,base64Decoder:e?.base64Decoder??om.fromBase64,base64Encoder:e?.base64Encoder??om.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??nm,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??bp,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new no},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new ga}],logger:e?.logger??new im.NoOpLogger,protocol:e?.protocol??new Nc({defaultNamespace:`com.amazonaws.signin`}),serviceId:e?.serviceId??`Signin`,urlParser:e?.urlParser??am.parseUrl,utf8Decoder:e?.utf8Decoder??sm.fromUtf8,utf8Encoder:e?.utf8Encoder??sm.toUtf8})})),um,dm,fm,pm,mm,hm,gm,_m,vm,ym,bm,xm=o((()=>{vl(),um=ru(),dm=xl(),fm=iu(),pm=Fl(),mm=Ol(),hm=Ve(),gm=K(),_m=au(),vm=ou(),ym=Nl(),lm(),bm=e=>{(0,gm.emitWarningIfUnsupportedVersion)(process.version);let t=(0,vm.resolveDefaultsModeConfig)(e),n=()=>t().then(gm.loadConfigsForDefaultMode),r=cm(e);Na(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,mm.loadConfig)(ho,i),bodyLengthChecker:e?.bodyLengthChecker??_m.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,um.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:nu}),maxAttempts:e?.maxAttempts??(0,mm.loadConfig)(pm.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,mm.loadConfig)(dm.NODE_REGION_CONFIG_OPTIONS,{...dm.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:hm.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,mm.loadConfig)({...pm.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||ym.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??fm.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??hm.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,mm.loadConfig)(dm.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,mm.loadConfig)(dm.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,mm.loadConfig)(um.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),Sm,Cm,wm=o((()=>{Sm=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},Cm=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),Tm,Em,Dm,Om,km=o((()=>{Tm=id(),Em=p(),Dm=K(),wm(),Om=(e,t)=>{let n=Object.assign((0,Tm.getAwsRegionExtensionConfiguration)(e),(0,Dm.getDefaultExtensionConfiguration)(e),(0,Em.getHttpHandlerExtensionConfiguration)(e),Sm(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,Tm.resolveAwsRegionExtensionConfiguration)(n),(0,Dm.resolveDefaultRuntimeConfig)(n),(0,Em.resolveHttpHandlerRuntimeConfig)(n),Cm(n))}})),Am,jm,Mm,Nm,Pm,Fm,Im,Lm,Rm,zm,Bm=o((()=>{Am=m(),jm=h(),Mm=T(),Nm=yl(),Pm=xl(),Da(),V(),Fm=Sl(),Im=jl(),Lm=Fl(),Rm=K(),Sp(),Tp(),xm(),km(),zm=class extends Rm.Client{config;constructor(...[e]){let t=bm(e||{});super(t),this.initConfig=t,this.config=Om(xp((0,Im.resolveEndpointConfig)((0,Am.resolveHostHeaderConfig)((0,Pm.resolveRegionConfig)((0,Lm.resolveRetryConfig)((0,Nm.resolveUserAgentConfig)(Cp(t))))))),e?.extensions||[]),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use((0,Nm.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Lm.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Fm.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Am.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,jm.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Mm.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(re(this.config,{httpAuthSchemeParametersProvider:yp,identityProviderConfigProvider:async e=>new sa({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(me(this.config))}destroy(){super.destroy()}}})),Vm,Hm,Um=o((()=>{Vm=K(),Hm=class e extends Vm.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),Wm,Gm,Km,qm,Jm=o((()=>{Um(),Wm=class e extends Hm{name=`AccessDeniedException`;$fault=`client`;error;constructor(t){super({name:`AccessDeniedException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Gm=class e extends Hm{name=`InternalServerException`;$fault=`server`;error;constructor(t){super({name:`InternalServerException`,$fault:`server`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},Km=class e extends Hm{name=`TooManyRequestsError`;$fault=`client`;error;constructor(t){super({name:`TooManyRequestsError`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}},qm=class e extends Hm{name=`ValidationException`;$fault=`client`;error;constructor(t){super({name:`ValidationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error}}})),Ym,Xm,Zm,Qm,$m,eh,th,nh,rh,ih,ah,oh,sh,ch,lh,uh,dh,fh,ph,mh,hh,gh,_h,vh,yh,bh,xh,Sh,Ch,wh,Th,Eh,Dh,Oh,kh,Ah,jh,Mh,Nh,Ph,Fh,Ih,Lh,Rh,zh,Bh,Vh,Hh=o((()=>{V(),Jm(),Um(),Ym=`AccessDeniedException`,Xm=`AccessToken`,Zm=`CreateOAuth2Token`,Qm=`CreateOAuth2TokenRequest`,$m=`CreateOAuth2TokenRequestBody`,eh=`CreateOAuth2TokenResponseBody`,th=`CreateOAuth2TokenResponse`,nh=`InternalServerException`,rh=`RefreshToken`,ih=`TooManyRequestsError`,ah=`ValidationException`,oh=`accessKeyId`,sh=`accessToken`,ch=`client`,lh=`clientId`,uh=`codeVerifier`,dh=`code`,fh=`error`,ph=`expiresIn`,mh=`grantType`,hh=`http`,gh=`httpError`,_h=`idToken`,vh=`jsonName`,yh=`message`,bh=`refreshToken`,xh=`redirectUri`,Sh=`server`,Ch=`secretAccessKey`,wh=`sessionToken`,Th=`smithy.ts.sdk.synthetic.com.amazonaws.signin`,Eh=`tokenInput`,Dh=`tokenOutput`,Oh=`tokenType`,kh=`com.amazonaws.signin`,Ah=[0,kh,rh,8,0],jh=[-3,kh,Ym,{[fh]:ch},[fh,yh],[0,0]],B.for(kh).registerError(jh,Wm),Mh=[3,kh,Xm,8,[oh,Ch,wh],[[0,{[vh]:oh}],[0,{[vh]:Ch}],[0,{[vh]:wh}]]],Nh=[3,kh,Qm,0,[Eh],[[()=>Ph,16]]],Ph=[3,kh,$m,0,[lh,mh,dh,xh,uh,bh],[[0,{[vh]:lh}],[0,{[vh]:mh}],0,[0,{[vh]:xh}],[0,{[vh]:uh}],[()=>Ah,{[vh]:bh}]]],Fh=[3,kh,th,0,[Dh],[[()=>Ih,16]]],Ih=[3,kh,eh,0,[sh,Oh,ph,bh,_h],[[()=>Mh,{[vh]:sh}],[0,{[vh]:Oh}],[1,{[vh]:ph}],[()=>Ah,{[vh]:bh}],[0,{[vh]:_h}]]],Lh=[-3,kh,nh,{[fh]:Sh,[gh]:500},[fh,yh],[0,0]],B.for(kh).registerError(Lh,Gm),Rh=[-3,kh,ih,{[fh]:ch,[gh]:429},[fh,yh],[0,0]],B.for(kh).registerError(Rh,Km),zh=[-3,kh,ah,{[fh]:ch,[gh]:400},[fh,yh],[0,0]],B.for(kh).registerError(zh,qm),Bh=[-3,Th,`SigninServiceException`,0,[],[]],B.for(Th).registerError(Bh,Hm),Vh=[9,kh,Zm,{[hh]:[`POST`,`/v1/token`,200]},()=>Nh,()=>Fh]})),Uh,Wh,Gh,Kh=o((()=>{Uh=jl(),Wh=K(),Tp(),Hh(),Gh=class extends Wh.Command.classBuilder().ep(wp).m(function(e,t,n,r){return[(0,Uh.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`Signin`,`CreateOAuth2Token`,{}).n(`SigninClient`,`CreateOAuth2TokenCommand`).sc(Vh).build(){}})),qh,Jh,Yh,Xh=o((()=>{qh=K(),Kh(),Bm(),Jh={CreateOAuth2TokenCommand:Gh},Yh=class extends zm{},(0,qh.createAggregatedClient)(Jh,Yh)})),Zh=o((()=>{Kh()})),Qh,$h=o((()=>{Qh={AUTHCODE_EXPIRED:`AUTHCODE_EXPIRED`,INSUFFICIENT_PERMISSIONS:`INSUFFICIENT_PERMISSIONS`,INVALID_REQUEST:`INVALID_REQUEST`,SERVER_ERROR:`server_error`,TOKEN_EXPIRED:`TOKEN_EXPIRED`,USER_CREDENTIALS_CHANGED:`USER_CREDENTIALS_CHANGED`}})),eg=c({$Command:()=>Wh.Command,AccessDeniedException:()=>Wm,CreateOAuth2TokenCommand:()=>Gh,InternalServerException:()=>Gm,OAuth2ErrorCode:()=>Qh,Signin:()=>Yh,SigninClient:()=>zm,SigninServiceException:()=>Hm,TooManyRequestsError:()=>Km,ValidationException:()=>qm,__Client:()=>Rm.Client}),tg=o((()=>{Bm(),Xh(),Zh(),$h(),Jm(),Um()})),ng=s((e=>{var t=(Ha(),d(Va)),n=_o(),r=Dl(),i=p(),a=require(`node:crypto`),o=require(`node:fs`),s=require(`node:os`),c=require(`node:path`),l=class e{profileData;init;callerClientConfig;static REFRESH_THRESHOLD=300*1e3;constructor(e,t,n){this.profileData=e,this.init=t,this.callerClientConfig=n}async loadCredentials(){let t=await this.loadToken();if(!t)throw new n.CredentialsProviderError(`Failed to load a token for session ${this.loginSession}, please re-authenticate using aws login`,{tryNextLink:!1,logger:this.logger});let r=t.accessToken,i=Date.now();return new Date(r.expiresAt).getTime()-i<=e.REFRESH_THRESHOLD?this.refresh(t):{accessKeyId:r.accessKeyId,secretAccessKey:r.secretAccessKey,sessionToken:r.sessionToken,accountId:r.accountId,expiration:new Date(r.expiresAt)}}get logger(){return this.init?.logger}get loginSession(){return this.profileData.login_session}async refresh(e){let{SigninClient:t,CreateOAuth2TokenCommand:r}=await Promise.resolve().then(()=>(tg(),eg)),{logger:i,userAgentAppId:a}=this.callerClientConfig??{},o=(e=>e?.metadata?.handlerProtocol===`h2`)(this.callerClientConfig?.requestHandler)?void 0:this.callerClientConfig?.requestHandler,s=new t({credentials:{accessKeyId:``,secretAccessKey:``},region:this.profileData.region??await this.callerClientConfig?.region?.()??process.env.AWS_REGION,requestHandler:o,logger:i,userAgentAppId:a,...this.init?.clientConfig});this.createDPoPInterceptor(s.middlewareStack);let c={tokenInput:{clientId:e.clientId,refreshToken:e.refreshToken,grantType:`refresh_token`}};try{let t=await s.send(new r(c)),{accessKeyId:i,secretAccessKey:a,sessionToken:o}=t.tokenOutput?.accessToken??{},{refreshToken:l,expiresIn:u}=t.tokenOutput??{};if(!i||!a||!o||!l)throw new n.CredentialsProviderError(`Token refresh response missing required fields`,{logger:this.logger,tryNextLink:!1});let d=(u??900)*1e3,f=new Date(Date.now()+d),p={...e,accessToken:{...e.accessToken,accessKeyId:i,secretAccessKey:a,sessionToken:o,expiresAt:f.toISOString()},refreshToken:l};await this.saveToken(p);let m=p.accessToken;return{accessKeyId:m.accessKeyId,secretAccessKey:m.secretAccessKey,sessionToken:m.sessionToken,accountId:m.accountId,expiration:f}}catch(e){if(e.name===`AccessDeniedException`){let t=e.error,r;switch(t){case`TOKEN_EXPIRED`:r=`Your session has expired. Please reauthenticate.`;break;case`USER_CREDENTIALS_CHANGED`:r=`Unable to refresh credentials because of a change in your password. Please reauthenticate with your new password.`;break;case`INSUFFICIENT_PERMISSIONS`:r=`Unable to refresh credentials due to insufficient permissions. You may be missing permission for the 'CreateOAuth2Token' action.`;break;default:r=`Failed to refresh token: ${String(e)}. Please re-authenticate using \`aws login\``}throw new n.CredentialsProviderError(r,{logger:this.logger,tryNextLink:!1})}throw new n.CredentialsProviderError(`Failed to refresh token: ${String(e)}. Please re-authenticate using aws login`,{logger:this.logger})}}async loadToken(){let e=this.getTokenFilePath();try{let t;try{t=await r.readFile(e,{ignoreCache:this.init?.ignoreCache})}catch{t=await o.promises.readFile(e,`utf8`)}let i=JSON.parse(t),a=[`accessToken`,`clientId`,`refreshToken`,`dpopKey`].filter(e=>!i[e]);if(i.accessToken?.accountId||a.push(`accountId`),a.length>0)throw new n.CredentialsProviderError(`Token validation failed, missing fields: ${a.join(`, `)}`,{logger:this.logger,tryNextLink:!1});return i}catch(t){throw new n.CredentialsProviderError(`Failed to load token from ${e}: ${String(t)}`,{logger:this.logger,tryNextLink:!1})}}async saveToken(e){let t=this.getTokenFilePath(),n=c.dirname(t);try{await o.promises.mkdir(n,{recursive:!0})}catch{}await o.promises.writeFile(t,JSON.stringify(e,null,2),`utf8`)}getTokenFilePath(){let e=process.env.AWS_LOGIN_CACHE_DIRECTORY??c.join(s.homedir(),`.aws`,`login`,`cache`),t=Buffer.from(this.loginSession,`utf8`),n=a.createHash(`sha256`).update(t).digest(`hex`);return c.join(e,`${n}.json`)}derToRawSignature(e){let t=2;if(e[t]!==2)throw Error(`Invalid DER signature`);t++;let n=e[t++],r=e.subarray(t,t+n);if(t+=n,e[t]!==2)throw Error(`Invalid DER signature`);t++;let i=e[t++],a=e.subarray(t,t+i);r=r[0]===0?r.subarray(1):r,a=a[0]===0?a.subarray(1):a;let o=Buffer.concat([Buffer.alloc(32-r.length),r]),s=Buffer.concat([Buffer.alloc(32-a.length),a]);return Buffer.concat([o,s])}createDPoPInterceptor(e){e.add(e=>async t=>{if(i.HttpRequest.isInstance(t.request)){let e=t.request,n=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:``}${e.path}`,r=await this.generateDpop(e.method,n);e.headers={...e.headers,DPoP:r}}return e(t)},{step:`finalizeRequest`,name:`dpopInterceptor`,override:!0})}async generateDpop(e=`POST`,t){let r=await this.loadToken();try{let n=a.createPrivateKey({key:r.dpopKey,format:`pem`,type:`sec1`}),i=a.createPublicKey(n).export({format:`der`,type:`spki`}),o=-1;for(let e=0;e<i.length;e++)if(i[e]===4){o=e;break}let s=i.slice(o+1,o+33),c=i.slice(o+33,o+65),l={alg:`ES256`,typ:`dpop+jwt`,jwk:{kty:`EC`,crv:`P-256`,x:s.toString(`base64url`),y:c.toString(`base64url`)}},u={jti:crypto.randomUUID(),htm:e,htu:t,iat:Math.floor(Date.now()/1e3)},d=`${Buffer.from(JSON.stringify(l)).toString(`base64url`)}.${Buffer.from(JSON.stringify(u)).toString(`base64url`)}`,f=a.sign(`sha256`,Buffer.from(d),n);return`${d}.${this.derToRawSignature(f).toString(`base64url`)}`}catch(e){throw new n.CredentialsProviderError(`Failed to generate Dpop proof: ${e instanceof Error?e.message:String(e)}`,{logger:this.logger,tryNextLink:!1})}}};e.fromLoginCredentials=e=>async({callerClientConfig:i}={})=>{e?.logger?.debug?.(`@aws-sdk/credential-providers - fromLoginCredentials`);let a=await r.parseKnownFiles(e||{}),o=r.getProfileName({profile:e?.profile??i?.profile}),s=a[o];if(!s?.login_session)throw new n.CredentialsProviderError(`Profile ${o} does not contain login_session.`,{tryNextLink:!0,logger:e?.logger});let c=await new l(s,e,i).loadCredentials();return t.setCredentialFeature(c,`CREDENTIALS_LOGIN`,`AD`)}}));function rg(e){return{schemeId:`aws.auth#sigv4`,signingProperties:{name:`sts`,region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function ig(e){return{schemeId:`smithy.api#noAuth`}}var ag,og,sg,cg,lg,ug=o((()=>{vl(),ag=k(),I_(),og=async(e,t,n)=>({operation:(0,ag.getSmithyContext)(t).operation,region:await(0,ag.normalizeProvider)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),sg=e=>{let t=[];switch(e.operation){case`AssumeRoleWithWebIdentity`:t.push(ig(e));break;default:t.push(rg(e))}return t},cg=e=>Object.assign(e,{stsClientCtor:F_}),lg=e=>{let t=Eo(cg(e));return Object.assign(t,{authSchemePreference:(0,ag.normalizeProvider)(e.authSchemePreference??[])})}})),dg,fg,pg=o((()=>{dg=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:`sts`}),fg={UseGlobalEndpoint:{type:`builtInParams`,name:`useGlobalEndpoint`},UseFIPS:{type:`builtInParams`,name:`useFipsEndpoint`},Endpoint:{type:`builtInParams`,name:`endpoint`},Region:{type:`builtInParams`,name:`region`},UseDualStack:{type:`builtInParams`,name:`useDualstackEndpoint`}}})),mg,Y,X,Z,hg,gg,_g,vg,yg,bg,xg,Sg,Q,Cg,wg,Tg,Eg,Dg,Og,kg,Ag,jg,Mg,Ng,Pg,Fg,Ig,Lg,Rg,zg,Bg,Vg,Hg,Ug,Wg,Gg,Kg,qg,Jg=o((()=>{mg=`required`,Y=`type`,X=`fn`,Z=`argv`,hg=`ref`,gg=!1,_g=!0,vg=`booleanEquals`,yg=`stringEquals`,bg=`sigv4`,xg=`sts`,Sg=`us-east-1`,Q=`endpoint`,Cg=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,wg=`tree`,Tg=`error`,Eg=`getAttr`,Dg={[mg]:!1,[Y]:`string`},Og={[mg]:!0,default:!1,[Y]:`boolean`},kg={[hg]:`Endpoint`},Ag={[X]:`isSet`,[Z]:[{[hg]:`Region`}]},jg={[hg]:`Region`},Mg={[X]:`aws.partition`,[Z]:[jg],assign:`PartitionResult`},Ng={[hg]:`UseFIPS`},Pg={[hg]:`UseDualStack`},Fg={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:bg,signingName:xg,signingRegion:Sg}]},headers:{}},Ig={},Lg={conditions:[{[X]:yg,[Z]:[jg,`aws-global`]}],[Q]:Fg,[Y]:Q},Rg={[X]:vg,[Z]:[Ng,!0]},zg={[X]:vg,[Z]:[Pg,!0]},Bg={[X]:Eg,[Z]:[{[hg]:`PartitionResult`},`supportsFIPS`]},Vg={[hg]:`PartitionResult`},Hg={[X]:vg,[Z]:[!0,{[X]:Eg,[Z]:[Vg,`supportsDualStack`]}]},Ug=[{[X]:`isSet`,[Z]:[kg]}],Wg=[Rg],Gg=[zg],Kg={version:`1.0`,parameters:{Region:Dg,UseDualStack:Og,UseFIPS:Og,Endpoint:Dg,UseGlobalEndpoint:Og},rules:[{conditions:[{[X]:vg,[Z]:[{[hg]:`UseGlobalEndpoint`},_g]},{[X]:`not`,[Z]:Ug},Ag,Mg,{[X]:vg,[Z]:[Ng,gg]},{[X]:vg,[Z]:[Pg,gg]}],rules:[{conditions:[{[X]:yg,[Z]:[jg,`ap-northeast-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`ap-south-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`ap-southeast-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`ap-southeast-2`]}],endpoint:Fg,[Y]:Q},Lg,{conditions:[{[X]:yg,[Z]:[jg,`ca-central-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`eu-central-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`eu-north-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`eu-west-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`eu-west-2`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`eu-west-3`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`sa-east-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,Sg]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`us-east-2`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`us-west-1`]}],endpoint:Fg,[Y]:Q},{conditions:[{[X]:yg,[Z]:[jg,`us-west-2`]}],endpoint:Fg,[Y]:Q},{endpoint:{url:Cg,properties:{authSchemes:[{name:bg,signingName:xg,signingRegion:`{Region}`}]},headers:Ig},[Y]:Q}],[Y]:wg},{conditions:Ug,rules:[{conditions:Wg,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[Y]:Tg},{conditions:Gg,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[Y]:Tg},{endpoint:{url:kg,properties:Ig,headers:Ig},[Y]:Q}],[Y]:wg},{conditions:[Ag],rules:[{conditions:[Mg],rules:[{conditions:[Rg,zg],rules:[{conditions:[{[X]:vg,[Z]:[_g,Bg]},Hg],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Ig,headers:Ig},[Y]:Q}],[Y]:wg},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[Y]:Tg}],[Y]:wg},{conditions:Wg,rules:[{conditions:[{[X]:vg,[Z]:[Bg,_g]}],rules:[{conditions:[{[X]:yg,[Z]:[{[X]:Eg,[Z]:[Vg,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:Ig,headers:Ig},[Y]:Q},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:Ig,headers:Ig},[Y]:Q}],[Y]:wg},{error:`FIPS is enabled but this partition does not support FIPS`,[Y]:Tg}],[Y]:wg},{conditions:Gg,rules:[{conditions:[Hg],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:Ig,headers:Ig},[Y]:Q}],[Y]:wg},{error:`DualStack is enabled but this partition does not support DualStack`,[Y]:Tg}],[Y]:wg},Lg,{endpoint:{url:Cg,properties:Ig,headers:Ig},[Y]:Q}],[Y]:wg}],[Y]:wg},{error:`Invalid Configuration: Missing Region`,[Y]:Tg}]},qg=Kg})),Yg,Xg,Zg,Qg,$g=o((()=>{Yg=ja(),Xg=Oa(),Jg(),Zg=new Xg.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]}),Qg=(e,t={})=>Zg.get(e,()=>(0,Xg.resolveEndpoint)(qg,{endpointParams:e,logger:t.logger})),Xg.customEndpointFunctions.aws=Yg.awsEndpointFunctions})),e_,t_,n_,r_,i_,a_=o((()=>{vl(),gl(),Da(),e_=K(),t_=Aa(),n_=De(),r_=R(),ug(),$g(),i_=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??n_.fromBase64,base64Encoder:e?.base64Encoder??n_.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Qg,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??sg,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new no},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new ga}],logger:e?.logger??new e_.NoOpLogger,protocol:e?.protocol??new Xc({defaultNamespace:`com.amazonaws.sts`,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`}),serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??t_.parseUrl,utf8Decoder:e?.utf8Decoder??r_.fromUtf8,utf8Encoder:e?.utf8Encoder??r_.toUtf8})})),o_,s_,c_,l_,u_,d_,f_,p_,m_,h_,g_,__=o((()=>{vl(),o_=ru(),s_=xl(),Da(),c_=iu(),l_=Fl(),u_=Ol(),d_=Ve(),f_=K(),p_=au(),m_=ou(),h_=Nl(),a_(),g_=e=>{(0,f_.emitWarningIfUnsupportedVersion)(process.version);let t=(0,m_.resolveDefaultsModeConfig)(e),n=()=>t().then(f_.loadConfigsForDefaultMode),r=i_(e);Na(process.version);let i={profile:e?.profile,logger:r.logger};return{...r,...e,runtime:`node`,defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,u_.loadConfig)(ho,i),bodyLengthChecker:e?.bodyLengthChecker??p_.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,o_.createDefaultUserAgentProvider)({serviceId:r.serviceId,clientVersion:nu}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:t=>t.getIdentityProvider(`aws.auth#sigv4`)||(async t=>await e.credentialDefaultProvider(t?.__config||{})()),signer:new no},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new ga}],maxAttempts:e?.maxAttempts??(0,u_.loadConfig)(l_.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,u_.loadConfig)(s_.NODE_REGION_CONFIG_OPTIONS,{...s_.NODE_REGION_CONFIG_FILE_OPTIONS,...i}),requestHandler:d_.NodeHttpHandler.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,u_.loadConfig)({...l_.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await n()).retryMode||h_.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??c_.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??d_.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,u_.loadConfig)(s_.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,i),useFipsEndpoint:e?.useFipsEndpoint??(0,u_.loadConfig)(s_.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,i),userAgentAppId:e?.userAgentAppId??(0,u_.loadConfig)(o_.NODE_APP_ID_CONFIG_OPTIONS,i)}}})),v_,y_,b_=o((()=>{v_=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},y_=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),x_,S_,C_,w_,T_=o((()=>{x_=id(),S_=p(),C_=K(),b_(),w_=(e,t)=>{let n=Object.assign((0,x_.getAwsRegionExtensionConfiguration)(e),(0,C_.getDefaultExtensionConfiguration)(e),(0,S_.getHttpHandlerExtensionConfiguration)(e),v_(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,x_.resolveAwsRegionExtensionConfiguration)(n),(0,C_.resolveDefaultRuntimeConfig)(n),(0,S_.resolveHttpHandlerRuntimeConfig)(n),y_(n))}})),E_,D_,O_,k_,A_,j_,M_,N_,P_,F_,I_=o((()=>{E_=m(),D_=h(),O_=T(),k_=yl(),A_=xl(),Da(),V(),j_=Sl(),M_=jl(),N_=Fl(),P_=K(),ug(),pg(),__(),T_(),F_=class extends P_.Client{config;constructor(...[e]){let t=g_(e||{});super(t),this.initConfig=t,this.config=w_(lg((0,M_.resolveEndpointConfig)((0,E_.resolveHostHeaderConfig)((0,A_.resolveRegionConfig)((0,N_.resolveRetryConfig)((0,k_.resolveUserAgentConfig)(dg(t))))))),e?.extensions||[]),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use((0,k_.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,N_.getRetryPlugin)(this.config)),this.middlewareStack.use((0,j_.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,E_.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,D_.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,O_.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(re(this.config,{httpAuthSchemeParametersProvider:og,identityProviderConfigProvider:async e=>new sa({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use(me(this.config))}destroy(){super.destroy()}}})),L_,R_,z_=o((()=>{L_=K(),R_=class e extends L_.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}})),B_,V_,H_,U_,W_,G_,K_,q_=o((()=>{z_(),B_=class e extends R_{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},V_=class e extends R_{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},H_=class e extends R_{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},U_=class e extends R_{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},W_=class e extends R_{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},G_=class e extends R_{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},K_=class e extends R_{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}}})),J_,Y_,X_,Z_,Q_,$_,ev,tv,nv,rv,iv,av,ov,sv,cv,lv,uv,dv,fv,pv,mv,hv,gv,_v,vv,yv,bv,xv,Sv,Cv,wv,Tv,Ev,Dv,Ov,kv,Av,jv,Mv,Nv,Pv,Fv,Iv,Lv,Rv,zv,Bv,Vv,Hv,Uv,Wv,Gv,Kv,qv,Jv,Yv,Xv,Zv,$,Qv,$v,ey,ty,ny,ry,iy,ay,oy,sy,cy,ly,uy,dy,fy,py,my,hy,gy,_y,vy,yy,by,xy,Sy=o((()=>{V(),q_(),z_(),J_=`Arn`,Y_=`AccessKeyId`,X_=`AssumeRole`,Z_=`AssumedRoleId`,Q_=`AssumeRoleRequest`,$_=`AssumeRoleResponse`,ev=`AssumedRoleUser`,tv=`AssumeRoleWithWebIdentity`,nv=`AssumeRoleWithWebIdentityRequest`,rv=`AssumeRoleWithWebIdentityResponse`,iv=`Audience`,av=`Credentials`,ov=`ContextAssertion`,sv=`DurationSeconds`,cv=`Expiration`,lv=`ExternalId`,uv=`ExpiredTokenException`,dv=`IDPCommunicationErrorException`,fv=`IDPRejectedClaimException`,pv=`InvalidIdentityTokenException`,mv=`Key`,hv=`MalformedPolicyDocumentException`,gv=`Policy`,_v=`PolicyArns`,vv=`ProviderArn`,yv=`ProvidedContexts`,bv=`ProvidedContextsListType`,xv=`ProvidedContext`,Sv=`PolicyDescriptorType`,Cv=`ProviderId`,wv=`PackedPolicySize`,Tv=`PackedPolicyTooLargeException`,Ev=`Provider`,Dv=`RoleArn`,Ov=`RegionDisabledException`,kv=`RoleSessionName`,Av=`SecretAccessKey`,jv=`SubjectFromWebIdentityToken`,Mv=`SourceIdentity`,Nv=`SerialNumber`,Pv=`SessionToken`,Fv=`Tags`,Iv=`TokenCode`,Lv=`TransitiveTagKeys`,Rv=`Tag`,zv=`Value`,Bv=`WebIdentityToken`,Vv=`arn`,Hv=`accessKeySecretType`,Uv=`awsQueryError`,Wv=`client`,Gv=`clientTokenType`,Kv=`error`,qv=`httpError`,Jv=`message`,Yv=`policyDescriptorListType`,Xv=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,Zv=`tagListType`,$=`com.amazonaws.sts`,Qv=[0,$,Hv,8,0],$v=[0,$,Gv,8,0],ey=[3,$,ev,0,[Z_,J_],[0,0]],ty=[3,$,Q_,0,[Dv,kv,_v,gv,sv,Fv,Lv,lv,Nv,Iv,Mv,yv],[0,0,()=>_y,0,1,()=>yy,64,0,0,0,0,()=>vy]],ny=[3,$,$_,0,[av,ev,wv,Mv],[[()=>ay,0],()=>ey,1,0]],ry=[3,$,nv,0,[Dv,kv,Bv,Cv,_v,gv,sv],[0,0,[()=>$v,0],0,()=>_y,0,1]],iy=[3,$,rv,0,[av,jv,ev,wv,Ev,iv,Mv],[[()=>ay,0],0,()=>ey,1,0,0,0]],ay=[3,$,av,0,[Y_,Av,Pv,cv],[0,[()=>Qv,0],0,4]],oy=[-3,$,uv,{[Kv]:Wv,[qv]:400,[Uv]:[`ExpiredTokenException`,400]},[Jv],[0]],B.for($).registerError(oy,B_),sy=[-3,$,dv,{[Kv]:Wv,[qv]:400,[Uv]:[`IDPCommunicationError`,400]},[Jv],[0]],B.for($).registerError(sy,K_),cy=[-3,$,fv,{[Kv]:Wv,[qv]:403,[Uv]:[`IDPRejectedClaim`,403]},[Jv],[0]],B.for($).registerError(cy,W_),ly=[-3,$,pv,{[Kv]:Wv,[qv]:400,[Uv]:[`InvalidIdentityToken`,400]},[Jv],[0]],B.for($).registerError(ly,G_),uy=[-3,$,hv,{[Kv]:Wv,[qv]:400,[Uv]:[`MalformedPolicyDocument`,400]},[Jv],[0]],B.for($).registerError(uy,V_),dy=[-3,$,Tv,{[Kv]:Wv,[qv]:400,[Uv]:[`PackedPolicyTooLarge`,400]},[Jv],[0]],B.for($).registerError(dy,H_),fy=[3,$,Sv,0,[Vv],[0]],py=[3,$,xv,0,[vv,ov],[0,0]],my=[-3,$,Ov,{[Kv]:Wv,[qv]:403,[Uv]:[`RegionDisabledException`,403]},[Jv],[0]],B.for($).registerError(my,U_),hy=[3,$,Rv,0,[mv,zv],[0,0]],gy=[-3,Xv,`STSServiceException`,0,[],[]],B.for(Xv).registerError(gy,R_),_y=[1,$,Yv,0,()=>fy],vy=[1,$,bv,0,()=>py],yy=[1,$,Zv,0,()=>hy],by=[9,$,X_,0,()=>ty,()=>ny],xy=[9,$,tv,0,()=>ry,()=>iy]})),Cy,wy,Ty,Ey=o((()=>{Cy=jl(),wy=K(),pg(),Sy(),Ty=class extends wy.Command.classBuilder().ep(fg).m(function(e,t,n,r){return[(0,Cy.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(by).build(){}})),Dy,Oy,ky,Ay=o((()=>{Dy=jl(),Oy=K(),pg(),Sy(),ky=class extends Oy.Command.classBuilder().ep(fg).m(function(e,t,n,r){return[(0,Dy.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc(xy).build(){}})),jy,My,Ny,Py=o((()=>{jy=K(),Ey(),Ay(),I_(),My={AssumeRoleCommand:Ty,AssumeRoleWithWebIdentityCommand:ky},Ny=class extends F_{},(0,jy.createAggregatedClient)(My,Ny)})),Fy=o((()=>{Ey(),Ay()})),Iy,Ly,Ry,zy,By,Vy,Hy=o((()=>{Ha(),Iy=id(),Ey(),Ay(),Ly=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},Ry=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=await(0,Iy.stsRegionDefaultResolver)(r)();return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),i??a??o},zy=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await Ry(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!Vy(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:o,AssumedRoleUser:s}=await n.send(new Ty(a));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let c=Ly(s),l={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Fa(l,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),l}},By=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await Ry(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!Vy(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new ky(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let o=Ly(a),s={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...o&&{accountId:o}};return o&&Fa(s,`RESOLVED_ACCOUNT_ID`,`T`),Fa(s,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),s}},Vy=e=>e?.metadata?.handlerProtocol===`h2`})),Uy,Wy,Gy,Ky,qy=o((()=>{Hy(),I_(),Uy=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,Wy=(e={},t)=>zy(e,Uy(F_,t)),Gy=(e={},t)=>By(e,Uy(F_,t)),Ky=e=>t=>e({roleAssumer:Wy(t),roleAssumerWithWebIdentity:Gy(t),...t})})),Jy=c({AssumeRoleCommand:()=>Ty,AssumeRoleWithWebIdentityCommand:()=>ky,ExpiredTokenException:()=>B_,IDPCommunicationErrorException:()=>K_,IDPRejectedClaimException:()=>W_,InvalidIdentityTokenException:()=>G_,MalformedPolicyDocumentException:()=>V_,PackedPolicyTooLargeException:()=>H_,RegionDisabledException:()=>U_,STS:()=>Ny,STSClient:()=>F_,STSServiceException:()=>R_,__Client:()=>P_.Client,decorateDefaultCredentialProvider:()=>Ky,getDefaultRoleAssumer:()=>Wy,getDefaultRoleAssumerWithWebIdentity:()=>Gy}),Yy=o((()=>{I_(),Py(),Fy(),q_(),qy(),z_()})),Xy=s((e=>{var t=Dl(),n=_o(),r=require(`child_process`),i=require(`util`),a=(Ha(),d(Va));let o=(e,t,n)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let n=new Date;if(new Date(t.Expiration)<n)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let r=t.AccountId;!r&&n?.[e]?.aws_account_id&&(r=n[e].aws_account_id);let i={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...r&&{accountId:r}};return a.setCredentialFeature(i,`CREDENTIALS_PROCESS`,`w`),i},s=async(e,a,s)=>{let c=a[e];if(a[e]){let l=c.credential_process;if(l!==void 0){let c=i.promisify(t.externalDataInterceptor?.getTokenRecord?.().exec??r.exec);try{let{stdout:t}=await c(l),n;try{n=JSON.parse(t.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return o(e,n,a)}catch(e){throw new n.CredentialsProviderError(e.message,{logger:s})}}else throw new n.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:s})}else throw new n.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:s})};e.fromProcess=(e={})=>async({callerClientConfig:n}={})=>{e.logger?.debug(`@aws-sdk/credential-provider-process - fromProcess`);let r=await t.parseKnownFiles(e);return s(t.getProfileName({profile:e.profile??n?.profile}),r,e.logger)}})),Zy=s((e=>{var t=e&&e.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=e&&e.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t}),r=e&&e.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a=e(r),o=0;o<a.length;o++)a[o]!==`default`&&t(i,r,a[o]);return n(i,r),i}})();Object.defineProperty(e,`__esModule`,{value:!0}),e.fromWebToken=void 0,e.fromWebToken=e=>async t=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromWebToken`);let{roleArn:n,roleSessionName:i,webIdentityToken:a,providerId:o,policyArns:s,policy:c,durationSeconds:l}=e,{roleAssumerWithWebIdentity:u}=e;if(!u){let{getDefaultRoleAssumerWithWebIdentity:n}=await Promise.resolve().then(()=>r((Yy(),d(Jy))));u=n({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:n,RoleSessionName:i??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:a,ProviderId:o,PolicyArns:s,Policy:c,DurationSeconds:l})}})),Qy=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromTokenFile=void 0;let t=(Ha(),d(Va)),n=_o(),r=Dl(),i=require(`fs`),a=Zy(),o=`AWS_WEB_IDENTITY_TOKEN_FILE`;e.fromTokenFile=(e={})=>async s=>{e.logger?.debug(`@aws-sdk/credential-provider-web-identity - fromTokenFile`);let c=e?.webIdentityTokenFile??process.env[o],l=e?.roleArn??process.env.AWS_ROLE_ARN,u=e?.roleSessionName??process.env.AWS_ROLE_SESSION_NAME;if(!c||!l)throw new n.CredentialsProviderError(`Web identity configuration not specified`,{logger:e.logger});let d=await(0,a.fromWebToken)({...e,webIdentityToken:r.externalDataInterceptor?.getTokenRecord?.()[c]??(0,i.readFileSync)(c,{encoding:`ascii`}),roleArn:l,roleSessionName:u})(s);return c===process.env[o]&&(0,t.setCredentialFeature)(d,`CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN`,`h`),d}})),$y=s((e=>{var t=Qy(),n=Zy();Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){t!==`default`&&!Object.prototype.hasOwnProperty.call(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})})),eb=s((e=>{var t=Dl(),n=_o(),r=(Ha(),d(Va)),i=ng();let a=(e,t,r)=>{let i={EcsContainer:async e=>{let{fromHttp:t}=await Promise.resolve().then(()=>u(Gl())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>u(Bl()));return r?.debug(`@aws-sdk/credential-provider-ini - credential_source is EcsContainer`),async()=>n.chain(t(e??{}),i(e))().then(o)},Ec2InstanceMetadata:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata`);let{fromInstanceMetadata:t}=await Promise.resolve().then(()=>u(Bl()));return async()=>t(e)().then(o)},Environment:async e=>{r?.debug(`@aws-sdk/credential-provider-ini - credential_source is Environment`);let{fromEnv:t}=await Promise.resolve().then(()=>u(zl()));return async()=>t(e)().then(o)}};if(e in i)return i[e];throw new n.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},o=e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_NAMED_PROVIDER`,`p`),s=(e,{profile:t=`default`,logger:n}={})=>!!e&&typeof e==`object`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1&&[`undefined`,`string`].indexOf(typeof e.external_id)>-1&&[`undefined`,`string`].indexOf(typeof e.mfa_serial)>-1&&(c(e,{profile:t,logger:n})||l(e,{profile:t,logger:n})),c=(e,{profile:t,logger:n})=>{let r=typeof e.source_profile==`string`&&e.credential_source===void 0;return r&&n?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),r},l=(e,{profile:t,logger:n})=>{let r=typeof e.credential_source==`string`&&e.source_profile===void 0;return r&&n?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),r},f=async(e,i,o,s={},c)=>{o.logger?.debug(`@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)`);let l=i[e],{source_profile:u,region:d}=l;if(!o.roleAssumer){let{getDefaultRoleAssumer:e}=await Promise.resolve().then(()=>(Yy(),Jy));o.roleAssumer=e({...o.clientConfig,credentialProviderLogger:o.logger,parentClientConfig:{...o?.parentClientConfig,region:d??o?.parentClientConfig?.region}},o.clientPlugins)}if(u&&u in s)throw new n.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${t.getProfileName(o)}. Profiles visited: `+Object.keys(s).join(`, `),{logger:o.logger});o.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${u?`source_profile=[${u}]`:`profile=[${e}]`}`);let f=u?c(u,i,o,{...s,[u]:!0},p(i[u]??{})):(await a(l.credential_source,e,o.logger)(o))();if(p(l))return f.then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`));{let t={RoleArn:l.role_arn,RoleSessionName:l.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:l.external_id,DurationSeconds:parseInt(l.duration_seconds||`3600`,10)},{mfa_serial:i}=l;if(i){if(!o.mfaCodeProvider)throw new n.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:o.logger,tryNextLink:!1});t.SerialNumber=i,t.TokenCode=await o.mfaCodeProvider(i)}let a=await f;return o.roleAssumer(a,t).then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SOURCE_PROFILE`,`o`))}},p=e=>!e.role_arn&&!!e.credential_source,m=e=>!!(e&&e.login_session),h=async(e,t)=>{let n=await i.fromLoginCredentials({...t,profile:e})();return r.setCredentialFeature(n,`CREDENTIALS_PROFILE_LOGIN`,`AC`)},g=e=>!!e&&typeof e==`object`&&typeof e.credential_process==`string`,_=async(e,t)=>Promise.resolve().then(()=>u(Xy())).then(({fromProcess:n})=>n({...e,profile:t})().then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_PROCESS`,`v`))),v=async(e,t,n={})=>{let{fromSSO:i}=await Promise.resolve().then(()=>u(hp()));return i({profile:e,logger:n.logger,parentClientConfig:n.parentClientConfig,clientConfig:n.clientConfig})().then(e=>t.sso_session?r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO`,`r`):r.setCredentialFeature(e,`CREDENTIALS_PROFILE_SSO_LEGACY`,`t`))},y=e=>e&&(typeof e.sso_start_url==`string`||typeof e.sso_account_id==`string`||typeof e.sso_session==`string`||typeof e.sso_region==`string`||typeof e.sso_role_name==`string`),b=e=>!!e&&typeof e==`object`&&typeof e.aws_access_key_id==`string`&&typeof e.aws_secret_access_key==`string`&&[`undefined`,`string`].indexOf(typeof e.aws_session_token)>-1&&[`undefined`,`string`].indexOf(typeof e.aws_account_id)>-1,x=async(e,t)=>{t?.logger?.debug(`@aws-sdk/credential-provider-ini - resolveStaticCredentials`);let n={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return r.setCredentialFeature(n,`CREDENTIALS_PROFILE`,`n`)},S=e=>!!e&&typeof e==`object`&&typeof e.web_identity_token_file==`string`&&typeof e.role_arn==`string`&&[`undefined`,`string`].indexOf(typeof e.role_session_name)>-1,C=async(e,t)=>Promise.resolve().then(()=>u($y())).then(({fromTokenFile:n})=>n({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(e=>r.setCredentialFeature(e,`CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN`,`q`))),w=async(e,t,r,i={},a=!1)=>{let o=t[e];if(Object.keys(i).length>0&&b(o))return x(o,r);if(a||s(o,{profile:e,logger:r.logger}))return f(e,t,r,i,w);if(b(o))return x(o,r);if(S(o))return C(o,r);if(g(o))return _(r,e);if(y(o))return await v(e,o,r);if(m(o))return h(e,r);throw new n.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})};e.fromIni=(e={})=>async({callerClientConfig:n}={})=>{let r={...e,parentClientConfig:{...n,...e.parentClientConfig}};r.logger?.debug(`@aws-sdk/credential-provider-ini - fromIni`);let i=await t.parseKnownFiles(r);return w(t.getProfileName({profile:e.profile??n?.profile}),i,r)}})),tb=s((e=>{var t=zl(),n=_o(),r=Dl();let i=`AWS_EC2_METADATA_DISABLED`,a=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:a,fromInstanceMetadata:o}=await Promise.resolve().then(()=>u(Bl()));if(process.env[r]||process.env[t]){e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata`);let{fromHttp:t}=await Promise.resolve().then(()=>u(Gl()));return n.chain(t(e),a(e))}return process.env[i]&&process.env[i]!==`false`?async()=>{throw new n.CredentialsProviderError(`EC2 Instance Metadata Service access disabled`,{logger:e.logger})}:(e.logger?.debug(`@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata`),o(e))};function o(e,t){let n=s(e),r,i,a,o=async e=>{if(e?.forceRefresh)return await n(e);if(a?.expiration&&a?.expiration?.getTime()<Date.now()&&(a=void 0),r)await r;else if(!a||t?.(a))if(a)i||=n(e).then(e=>{a=e,i=void 0});else return r=n(e).then(e=>{a=e,r=void 0}),o(e);return a};return o}let s=e=>async t=>{let n;for(let r of e)try{return await r(t)}catch(e){if(n=e,e?.tryNextLink)continue;throw e}throw n},c=!1,l=(e={})=>o([async()=>{if(e.profile??process.env[r.ENV_PROFILE])throw process.env[t.ENV_KEY]&&process.env[t.ENV_SECRET]&&(c||=((e.logger?.warn&&e.logger?.constructor?.name!==`NoOpLogger`?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),!0)),new n.CredentialsProviderError(`AWS_PROFILE is set, skipping fromEnv provider.`,{logger:e.logger,tryNextLink:!0});return e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv`),t.fromEnv(e)()},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromSSO`);let{ssoStartUrl:r,ssoAccountId:i,ssoRegion:a,ssoRoleName:o,ssoSession:s}=e;if(!r&&!i&&!a&&!o&&!s)throw new n.CredentialsProviderError(`Skipping SSO provider in default chain (inputs do not include SSO fields).`,{logger:e.logger});let{fromSSO:c}=await Promise.resolve().then(()=>u(hp()));return c(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromIni`);let{fromIni:n}=await Promise.resolve().then(()=>u(eb()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromProcess`);let{fromProcess:n}=await Promise.resolve().then(()=>u(Xy()));return n(e)(t)},async t=>{e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile`);let{fromTokenFile:n}=await Promise.resolve().then(()=>u($y()));return n(e)(t)},async()=>(e.logger?.debug(`@aws-sdk/credential-provider-node - defaultProvider::remoteProvider`),(await a(e))()),async()=>{throw new n.CredentialsProviderError(`Could not load credentials from any providers`,{tryNextLink:!1,logger:e.logger})}],f),d=e=>e?.expiration!==void 0,f=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;e.credentialsTreatedAsExpired=f,e.credentialsWillNeedRefresh=d,e.defaultProvider=l})),nb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ruleSet=void 0;let t=`required`,n=`type`,r=`argv`,i=`booleanEquals`,a=`stringEquals`,o=`sigv4`,s=`us-east-1`,c=`endpoint`,l=`https://sts.{Region}.{PartitionResult#dnsSuffix}`,u=`tree`,d=`error`,f=`getAttr`,p={[t]:!1,[n]:`string`},m={[t]:!0,default:!1,[n]:`boolean`},h={ref:`Endpoint`},g={fn:`isSet`,[r]:[{ref:`Region`}]},_={ref:`Region`},v={fn:`aws.partition`,[r]:[_],assign:`PartitionResult`},y={ref:`UseFIPS`},b={ref:`UseDualStack`},x={url:`https://sts.amazonaws.com`,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:s}]},headers:{}},S={},C={conditions:[{fn:a,[r]:[_,`aws-global`]}],[c]:x,[n]:c},w={fn:i,[r]:[y,!0]},T={fn:i,[r]:[b,!0]},E={fn:f,[r]:[{ref:`PartitionResult`},`supportsFIPS`]},D={ref:`PartitionResult`},O={fn:i,[r]:[!0,{fn:f,[r]:[D,`supportsDualStack`]}]},k=[{fn:`isSet`,[r]:[h]}],A=[w],j=[T];e.ruleSet={version:`1.0`,parameters:{Region:p,UseDualStack:m,UseFIPS:m,Endpoint:p,UseGlobalEndpoint:m},rules:[{conditions:[{fn:i,[r]:[{ref:`UseGlobalEndpoint`},!0]},{fn:`not`,[r]:k},g,v,{fn:i,[r]:[y,!1]},{fn:i,[r]:[b,!1]}],rules:[{conditions:[{fn:a,[r]:[_,`ap-northeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-south-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`ap-southeast-2`]}],endpoint:x,[n]:c},C,{conditions:[{fn:a,[r]:[_,`ca-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-central-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-north-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`eu-west-3`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`sa-east-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,s]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-east-2`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-1`]}],endpoint:x,[n]:c},{conditions:[{fn:a,[r]:[_,`us-west-2`]}],endpoint:x,[n]:c},{endpoint:{url:l,properties:{authSchemes:[{name:o,signingName:`sts`,signingRegion:`{Region}`}]},headers:S},[n]:c}],[n]:u},{conditions:k,rules:[{conditions:A,error:`Invalid Configuration: FIPS and custom endpoint are not supported`,[n]:d},{conditions:j,error:`Invalid Configuration: Dualstack and custom endpoint are not supported`,[n]:d},{endpoint:{url:h,properties:S,headers:S},[n]:c}],[n]:u},{conditions:[g],rules:[{conditions:[v],rules:[{conditions:[w,T],rules:[{conditions:[{fn:i,[r]:[!0,E]},O],rules:[{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS and DualStack are enabled, but this partition does not support one or both`,[n]:d}],[n]:u},{conditions:A,rules:[{conditions:[{fn:i,[r]:[E,!0]}],rules:[{conditions:[{fn:a,[r]:[{fn:f,[r]:[D,`name`]},`aws-us-gov`]}],endpoint:{url:`https://sts.{Region}.amazonaws.com`,properties:S,headers:S},[n]:c},{endpoint:{url:`https://sts-fips.{Region}.{PartitionResult#dnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`FIPS is enabled but this partition does not support FIPS`,[n]:d}],[n]:u},{conditions:j,rules:[{conditions:[O],rules:[{endpoint:{url:`https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}`,properties:S,headers:S},[n]:c}],[n]:u},{error:`DualStack is enabled but this partition does not support DualStack`,[n]:d}],[n]:u},C,{endpoint:{url:l,properties:S,headers:S},[n]:c}],[n]:u}],[n]:u},{error:`Invalid Configuration: Missing Region`,[n]:d}]}})),rb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.defaultEndpointResolver=void 0;let t=ja(),n=Oa(),r=nb(),i=new n.EndpointCache({size:50,params:[`Endpoint`,`Region`,`UseDualStack`,`UseFIPS`,`UseGlobalEndpoint`]});e.defaultEndpointResolver=(e,t={})=>i.get(e,()=>(0,n.resolveEndpoint)(r.ruleSet,{endpointParams:e,logger:t.logger})),n.customEndpointFunctions.aws=t.awsEndpointFunctions})),ib=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(vl(),d(_l)),n=(gl(),d(hl)),r=(Da(),d(Ea)),i=K(),a=Aa(),o=De(),s=R(),c=Il(),l=rb();e.getRuntimeConfig=e=>({apiVersion:`2011-06-15`,base64Decoder:e?.base64Decoder??o.fromBase64,base64Encoder:e?.base64Encoder??o.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??l.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??c.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`),signer:new t.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new r.NoAuthSigner}],logger:e?.logger??new i.NoOpLogger,protocol:e?.protocol??new n.AwsQueryProtocol({defaultNamespace:`com.amazonaws.sts`,xmlNamespace:`https://sts.amazonaws.com/doc/2011-06-15/`,version:`2011-06-15`}),serviceId:e?.serviceId??`STS`,urlParser:e?.urlParser??a.parseUrl,utf8Decoder:e?.utf8Decoder??s.fromUtf8,utf8Encoder:e?.utf8Encoder??s.toUtf8})})),ab=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getRuntimeConfig=void 0;let t=(zr(),d(tr)).__importDefault(Rl()),n=(vl(),d(_l)),r=tb(),i=ru(),a=xl(),o=(Da(),d(Ea)),s=iu(),c=Fl(),l=Ol(),u=Ve(),f=K(),p=au(),m=ou(),h=Nl(),g=ib();e.getRuntimeConfig=e=>{(0,f.emitWarningIfUnsupportedVersion)(process.version);let d=(0,m.resolveDefaultsModeConfig)(e),_=()=>d().then(f.loadConfigsForDefaultMode),v=(0,g.getRuntimeConfig)(e);(0,n.emitWarningIfUnsupportedVersion)(process.version);let y={profile:e?.profile,logger:v.logger};return{...v,...e,runtime:`node`,defaultsMode:d,authSchemePreference:e?.authSchemePreference??(0,l.loadConfig)(n.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,y),bodyLengthChecker:e?.bodyLengthChecker??p.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??r.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,i.createDefaultUserAgentProvider)({serviceId:v.serviceId,clientVersion:t.default.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:`aws.auth#sigv4`,identityProvider:e=>e.getIdentityProvider(`aws.auth#sigv4`)||(async e=>await(0,r.defaultProvider)(e?.__config||{})()),signer:new n.AwsSdkSigV4Signer},{schemeId:`smithy.api#noAuth`,identityProvider:e=>e.getIdentityProvider(`smithy.api#noAuth`)||(async()=>({})),signer:new o.NoAuthSigner}],maxAttempts:e?.maxAttempts??(0,l.loadConfig)(c.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,l.loadConfig)(a.NODE_REGION_CONFIG_OPTIONS,{...a.NODE_REGION_CONFIG_FILE_OPTIONS,...y}),requestHandler:u.NodeHttpHandler.create(e?.requestHandler??_),retryMode:e?.retryMode??(0,l.loadConfig)({...c.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await _()).retryMode||h.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??s.Hash.bind(null,`sha256`),streamCollector:e?.streamCollector??u.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,l.loadConfig)(a.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,y),useFipsEndpoint:e?.useFipsEndpoint??(0,l.loadConfig)(a.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,y),userAgentAppId:e?.userAgentAppId??(0,l.loadConfig)(i.NODE_APP_ID_CONFIG_OPTIONS,y)}}})),ob=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveHttpAuthRuntimeConfig=e.getHttpAuthExtensionConfiguration=void 0,e.getHttpAuthExtensionConfiguration=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);n===-1?t.push(e):t.splice(n,1,e)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider(){return n},setCredentials(e){r=e},credentials(){return r}}},e.resolveHttpAuthRuntimeConfig=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})})),sb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.resolveRuntimeExtensions=void 0;let t=id(),n=p(),r=K(),i=ob();e.resolveRuntimeExtensions=(e,a)=>{let o=Object.assign((0,t.getAwsRegionExtensionConfiguration)(e),(0,r.getDefaultExtensionConfiguration)(e),(0,n.getHttpHandlerExtensionConfiguration)(e),(0,i.getHttpAuthExtensionConfiguration)(e));return a.forEach(e=>e.configure(o)),Object.assign(e,(0,t.resolveAwsRegionExtensionConfiguration)(o),(0,r.resolveDefaultRuntimeConfig)(o),(0,n.resolveHttpHandlerRuntimeConfig)(o),(0,i.resolveHttpAuthRuntimeConfig)(o))}})),cb=s((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.STSClient=e.__Client=void 0;let t=m(),n=h(),r=T(),i=yl(),a=xl(),o=(Da(),d(Ea)),s=(V(),d(Kt)),c=Sl(),l=jl(),u=Fl(),f=K();Object.defineProperty(e,`__Client`,{enumerable:!0,get:function(){return f.Client}});let p=Il(),g=Ll(),_=ab(),v=sb();e.STSClient=class extends f.Client{config;constructor(...[e]){let d=(0,_.getRuntimeConfig)(e||{});super(d),this.initConfig=d;let f=(0,g.resolveClientEndpointParameters)(d),m=(0,i.resolveUserAgentConfig)(f),h=(0,u.resolveRetryConfig)(m),y=(0,a.resolveRegionConfig)(h),b=(0,t.resolveHostHeaderConfig)(y),x=(0,l.resolveEndpointConfig)(b),S=(0,p.resolveHttpAuthSchemeConfig)(x);this.config=(0,v.resolveRuntimeExtensions)(S,e?.extensions||[]),this.middlewareStack.use((0,s.getSchemaSerdePlugin)(this.config)),this.middlewareStack.use((0,i.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,u.getRetryPlugin)(this.config)),this.middlewareStack.use((0,c.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,t.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,n.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,r.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,o.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:p.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async e=>new o.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,o.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}}})),lb=s((e=>{var t=cb(),n=K(),r=jl(),i=Ll(),a=(V(),d(Kt)),o=(Ha(),d(Va)),s=id();let c=class e extends n.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},l=class e extends c{name=`ExpiredTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},u=class e extends c{name=`MalformedPolicyDocumentException`;$fault=`client`;constructor(t){super({name:`MalformedPolicyDocumentException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},f=class e extends c{name=`PackedPolicyTooLargeException`;$fault=`client`;constructor(t){super({name:`PackedPolicyTooLargeException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},p=class e extends c{name=`RegionDisabledException`;$fault=`client`;constructor(t){super({name:`RegionDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},m=class e extends c{name=`IDPRejectedClaimException`;$fault=`client`;constructor(t){super({name:`IDPRejectedClaimException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},h=class e extends c{name=`InvalidIdentityTokenException`;$fault=`client`;constructor(t){super({name:`InvalidIdentityTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},g=class e extends c{name=`IDPCommunicationErrorException`;$fault=`client`;constructor(t){super({name:`IDPCommunicationErrorException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},_=class e extends c{name=`InvalidAuthorizationMessageException`;$fault=`client`;constructor(t){super({name:`InvalidAuthorizationMessageException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},v=class e extends c{name=`ExpiredTradeInTokenException`;$fault=`client`;constructor(t){super({name:`ExpiredTradeInTokenException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},y=class e extends c{name=`JWTPayloadSizeExceededException`;$fault=`client`;constructor(t){super({name:`JWTPayloadSizeExceededException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},b=class e extends c{name=`OutboundWebIdentityFederationDisabledException`;$fault=`client`;constructor(t){super({name:`OutboundWebIdentityFederationDisabledException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},x=class e extends c{name=`SessionDurationEscalationException`;$fault=`client`;constructor(t){super({name:`SessionDurationEscalationException`,$fault:`client`,...t}),Object.setPrototypeOf(this,e.prototype)}},S=`AccessKeyId`,C=`AssumedRoleUser`,w=`Account`,T=`Audience`,E=`Credentials`,D=`DurationSeconds`,O=`Expiration`,k=`FederatedUser`,A=`Policy`,j=`PolicyArns`,M=`PackedPolicySize`,N=`RoleArn`,ee=`RoleSessionName`,te=`SourceIdentity`,ne=`SerialNumber`,re=`Tags`,ie=`TokenCode`,ae=`WebIdentityToken`,P=`awsQueryError`,F=`client`,oe=`error`,se=`httpError`,ce=`message`,le=`smithy.ts.sdk.synthetic.com.amazonaws.sts`,I=`com.amazonaws.sts`;var ue=[0,I,`accessKeySecretType`,8,0],de=[0,I,`clientTokenType`,8,0],L=[0,I,`SAMLAssertionType`,8,0],fe=[0,I,`tradeInTokenType`,8,0],pe=[0,I,`webIdentityTokenType`,8,0],me=[3,I,C,0,[`AssumedRoleId`,`Arn`],[0,0]],he=[3,I,`AssumeRoleRequest`,0,[N,ee,j,A,D,re,`TransitiveTagKeys`,`ExternalId`,ne,ie,te,`ProvidedContexts`],[0,0,()=>et,0,1,()=>nt,64,0,0,0,0,()=>tt]],ge=[3,I,`AssumeRoleResponse`,0,[E,C,M,te],[[()=>Ce,0],()=>me,1,0]],_e=[3,I,`AssumeRoleWithSAMLRequest`,0,[N,`PrincipalArn`,`SAMLAssertion`,j,A,D],[0,0,[()=>L,0],()=>et,0,1]],ve=[3,I,`AssumeRoleWithSAMLResponse`,0,[E,C,M,`Subject`,`SubjectType`,`Issuer`,T,`NameQualifier`,te],[[()=>Ce,0],()=>me,1,0,0,0,0,0,0]],ye=[3,I,`AssumeRoleWithWebIdentityRequest`,0,[N,ee,ae,`ProviderId`,j,A,D],[0,0,[()=>de,0],0,()=>et,0,1]],be=[3,I,`AssumeRoleWithWebIdentityResponse`,0,[E,`SubjectFromWebIdentityToken`,C,M,`Provider`,T,te],[[()=>Ce,0],0,()=>me,1,0,0,0]],xe=[3,I,`AssumeRootRequest`,0,[`TargetPrincipal`,`TaskPolicyArn`,D],[0,()=>Je,1]],Se=[3,I,`AssumeRootResponse`,0,[E,te],[[()=>Ce,0],0]],Ce=[3,I,E,0,[S,`SecretAccessKey`,`SessionToken`,O],[0,[()=>ue,0],0,4]],we=[3,I,`DecodeAuthorizationMessageRequest`,0,[`EncodedMessage`],[0]],Te=[3,I,`DecodeAuthorizationMessageResponse`,0,[`DecodedMessage`],[0]],R=[-3,I,`ExpiredTokenException`,{[oe]:F,[se]:400,[P]:[`ExpiredTokenException`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(R,l);var Ee=[-3,I,`ExpiredTradeInTokenException`,{[oe]:F,[se]:400,[P]:[`ExpiredTradeInTokenException`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ee,v);var De=[3,I,k,0,[`FederatedUserId`,`Arn`],[0,0]],Oe=[3,I,`GetAccessKeyInfoRequest`,0,[S],[0]],ke=[3,I,`GetAccessKeyInfoResponse`,0,[w],[0]],Ae=[3,I,`GetCallerIdentityRequest`,0,[],[]],je=[3,I,`GetCallerIdentityResponse`,0,[`UserId`,w,`Arn`],[0,0,0]],Me=[3,I,`GetDelegatedAccessTokenRequest`,0,[`TradeInToken`],[[()=>fe,0]]],Ne=[3,I,`GetDelegatedAccessTokenResponse`,0,[E,M,`AssumedPrincipal`],[[()=>Ce,0],1,0]],Pe=[3,I,`GetFederationTokenRequest`,0,[`Name`,A,j,D,re],[0,0,()=>et,1,()=>nt]],Fe=[3,I,`GetFederationTokenResponse`,0,[E,k,M],[[()=>Ce,0],()=>De,1]],Ie=[3,I,`GetSessionTokenRequest`,0,[D,ne,ie],[1,0,0]],Le=[3,I,`GetSessionTokenResponse`,0,[E],[[()=>Ce,0]]],Re=[3,I,`GetWebIdentityTokenRequest`,0,[T,D,`SigningAlgorithm`,re],[64,1,0,()=>nt]],ze=[3,I,`GetWebIdentityTokenResponse`,0,[ae,O],[[()=>pe,0],4]],Be=[-3,I,`IDPCommunicationErrorException`,{[oe]:F,[se]:400,[P]:[`IDPCommunicationError`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(Be,g);var Ve=[-3,I,`IDPRejectedClaimException`,{[oe]:F,[se]:403,[P]:[`IDPRejectedClaim`,403]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ve,m);var He=[-3,I,`InvalidAuthorizationMessageException`,{[oe]:F,[se]:400,[P]:[`InvalidAuthorizationMessageException`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(He,_);var Ue=[-3,I,`InvalidIdentityTokenException`,{[oe]:F,[se]:400,[P]:[`InvalidIdentityToken`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ue,h);var We=[-3,I,`JWTPayloadSizeExceededException`,{[oe]:F,[se]:400,[P]:[`JWTPayloadSizeExceededException`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(We,y);var Ge=[-3,I,`MalformedPolicyDocumentException`,{[oe]:F,[se]:400,[P]:[`MalformedPolicyDocument`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ge,u);var Ke=[-3,I,`OutboundWebIdentityFederationDisabledException`,{[oe]:F,[se]:403,[P]:[`OutboundWebIdentityFederationDisabledException`,403]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ke,b);var qe=[-3,I,`PackedPolicyTooLargeException`,{[oe]:F,[se]:400,[P]:[`PackedPolicyTooLarge`,400]},[ce],[0]];a.TypeRegistry.for(I).registerError(qe,f);var Je=[3,I,`PolicyDescriptorType`,0,[`arn`],[0]],Ye=[3,I,`ProvidedContext`,0,[`ProviderArn`,`ContextAssertion`],[0,0]],Xe=[-3,I,`RegionDisabledException`,{[oe]:F,[se]:403,[P]:[`RegionDisabledException`,403]},[ce],[0]];a.TypeRegistry.for(I).registerError(Xe,p);var Ze=[-3,I,`SessionDurationEscalationException`,{[oe]:F,[se]:403,[P]:[`SessionDurationEscalationException`,403]},[ce],[0]];a.TypeRegistry.for(I).registerError(Ze,x);var Qe=[3,I,`Tag`,0,[`Key`,`Value`],[0,0]],$e=[-3,le,`STSServiceException`,0,[],[]];a.TypeRegistry.for(le).registerError($e,c);var et=[1,I,`policyDescriptorListType`,0,()=>Je],tt=[1,I,`ProvidedContextsListType`,0,()=>Ye],nt=[1,I,`tagListType`,0,()=>Qe],rt=[9,I,`AssumeRole`,0,()=>he,()=>ge],it=[9,I,`AssumeRoleWithSAML`,0,()=>_e,()=>ve],at=[9,I,`AssumeRoleWithWebIdentity`,0,()=>ye,()=>be],ot=[9,I,`AssumeRoot`,0,()=>xe,()=>Se],st=[9,I,`DecodeAuthorizationMessage`,0,()=>we,()=>Te],ct=[9,I,`GetAccessKeyInfo`,0,()=>Oe,()=>ke],lt=[9,I,`GetCallerIdentity`,0,()=>Ae,()=>je],ut=[9,I,`GetDelegatedAccessToken`,0,()=>Me,()=>Ne],dt=[9,I,`GetFederationToken`,0,()=>Pe,()=>Fe],ft=[9,I,`GetSessionToken`,0,()=>Ie,()=>Le],pt=[9,I,`GetWebIdentityToken`,0,()=>Re,()=>ze],mt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRole`,{}).n(`STSClient`,`AssumeRoleCommand`).sc(rt).build(){},ht=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithSAML`,{}).n(`STSClient`,`AssumeRoleWithSAMLCommand`).sc(it).build(){},gt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoleWithWebIdentity`,{}).n(`STSClient`,`AssumeRoleWithWebIdentityCommand`).sc(at).build(){},_t=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`AssumeRoot`,{}).n(`STSClient`,`AssumeRootCommand`).sc(ot).build(){},vt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`DecodeAuthorizationMessage`,{}).n(`STSClient`,`DecodeAuthorizationMessageCommand`).sc(st).build(){},yt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetAccessKeyInfo`,{}).n(`STSClient`,`GetAccessKeyInfoCommand`).sc(ct).build(){},bt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetCallerIdentity`,{}).n(`STSClient`,`GetCallerIdentityCommand`).sc(lt).build(){},xt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetDelegatedAccessToken`,{}).n(`STSClient`,`GetDelegatedAccessTokenCommand`).sc(ut).build(){},St=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetFederationToken`,{}).n(`STSClient`,`GetFederationTokenCommand`).sc(dt).build(){},Ct=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetSessionToken`,{}).n(`STSClient`,`GetSessionTokenCommand`).sc(ft).build(){},wt=class extends n.Command.classBuilder().ep(i.commonParams).m(function(e,t,n,i){return[r.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s(`AWSSecurityTokenServiceV20110615`,`GetWebIdentityToken`,{}).n(`STSClient`,`GetWebIdentityTokenCommand`).sc(pt).build(){};let Tt={AssumeRoleCommand:mt,AssumeRoleWithSAMLCommand:ht,AssumeRoleWithWebIdentityCommand:gt,AssumeRootCommand:_t,DecodeAuthorizationMessageCommand:vt,GetAccessKeyInfoCommand:yt,GetCallerIdentityCommand:bt,GetDelegatedAccessTokenCommand:xt,GetFederationTokenCommand:St,GetSessionTokenCommand:Ct,GetWebIdentityTokenCommand:wt};var Et=class extends t.STSClient{};n.createAggregatedClient(Tt,Et);let Dt=e=>{if(typeof e?.Arn==`string`){let t=e.Arn.split(`:`);if(t.length>4&&t[4]!==``)return t[4]}},Ot=async(e,t,n,r={})=>{let i=typeof e==`function`?await e():e,a=typeof t==`function`?await t():t,o=await s.stsRegionDefaultResolver(r)();return n?.debug?.(`@aws-sdk/client-sts::resolveRegion`,`accepting first of:`,`${i} (credential provider clientConfig)`,`${a} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),i??a??o},kt=(e,t)=>{let n,r;return async(i,a)=>{if(r=i,!n){let{logger:i=e?.parentClientConfig?.logger,profile:a=e?.parentClientConfig?.profile,region:o,requestHandler:s=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c,userAgentAppId:l=e?.parentClientConfig?.userAgentAppId}=e,u=await Ot(o,e?.parentClientConfig?.region,c,{logger:i,profile:a}),d=!jt(s);n=new t({...e,userAgentAppId:l,profile:a,credentialDefaultProvider:()=>async()=>r,region:u,requestHandler:d?s:void 0,logger:i})}let{Credentials:s,AssumedRoleUser:c}=await n.send(new mt(a));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${a.RoleArn}`);let l=Dt(c),u={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...l&&{accountId:l}};return o.setCredentialFeature(u,`CREDENTIALS_STS_ASSUME_ROLE`,`i`),u}},At=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,profile:i=e?.parentClientConfig?.profile,region:a,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:s,userAgentAppId:c=e?.parentClientConfig?.userAgentAppId}=e,l=await Ot(a,e?.parentClientConfig?.region,s,{logger:r,profile:i}),u=!jt(o);n=new t({...e,userAgentAppId:c,profile:i,region:l,requestHandler:u?o:void 0,logger:r})}let{Credentials:i,AssumedRoleUser:a}=await n.send(new gt(r));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);let s=Dt(a),c={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...s&&{accountId:s}};return s&&o.setCredentialFeature(c,`RESOLVED_ACCOUNT_ID`,`T`),o.setCredentialFeature(c,`CREDENTIALS_STS_ASSUME_ROLE_WEB_ID`,`k`),c}},jt=e=>e?.metadata?.handlerProtocol===`h2`,Mt=(e,t)=>t?class extends e{constructor(e){super(e);for(let e of t)this.middlewareStack.use(e)}}:e,Nt=(e={},n)=>kt(e,Mt(t.STSClient,n)),Pt=(e={},n)=>At(e,Mt(t.STSClient,n));Object.defineProperty(e,`$Command`,{enumerable:!0,get:function(){return n.Command}}),e.AssumeRoleCommand=mt,e.AssumeRoleWithSAMLCommand=ht,e.AssumeRoleWithWebIdentityCommand=gt,e.AssumeRootCommand=_t,e.DecodeAuthorizationMessageCommand=vt,e.ExpiredTokenException=l,e.ExpiredTradeInTokenException=v,e.GetAccessKeyInfoCommand=yt,e.GetCallerIdentityCommand=bt,e.GetDelegatedAccessTokenCommand=xt,e.GetFederationTokenCommand=St,e.GetSessionTokenCommand=Ct,e.GetWebIdentityTokenCommand=wt,e.IDPCommunicationErrorException=g,e.IDPRejectedClaimException=m,e.InvalidAuthorizationMessageException=_,e.InvalidIdentityTokenException=h,e.JWTPayloadSizeExceededException=y,e.MalformedPolicyDocumentException=u,e.OutboundWebIdentityFederationDisabledException=b,e.PackedPolicyTooLargeException=f,e.RegionDisabledException=p,e.STS=Et,e.STSServiceException=c,e.SessionDurationEscalationException=x,e.decorateDefaultCredentialProvider=e=>t=>e({roleAssumer:Nt(t),roleAssumerWithWebIdentity:Pt(t),...t}),e.getDefaultRoleAssumer=Nt,e.getDefaultRoleAssumerWithWebIdentity=Pt,Object.keys(t).forEach(function(n){n!==`default`&&!Object.prototype.hasOwnProperty.call(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})})),ub=lb();const db=new ub.STSClient,fb=async()=>db.send(new ub.GetCallerIdentityCommand);exports.handler=fb;